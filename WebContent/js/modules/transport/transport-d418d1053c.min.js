function pageStyle(t,e,a){a=a||"",1==e?$("#fistPage"+a+", #upPage"+a+", #nextPage"+a+", #lastPage"+a+", #Gotojump"+a).prop("disabled","disabled").removeClass("btn-primary").addClass("btn-default"):1==t?($("#fistPage"+a+", #upPage"+a).prop("disabled","disabled").removeClass("btn-primary").addClass("btn-default"),$("#lastPage"+a+", #nextPage"+a+", #Gotojump"+a).prop("disabled",!1).removeClass("btn-default").addClass("btn-primary")):t==e?($("#lastPage"+a+", #nextPage"+a).prop("disabled","disabled").removeClass("btn-primary").addClass("btn-default"),$("#fistPage"+a+", #upPage"+a+", #Gotojump"+a).prop("disabled",!1).removeClass("btn-default").addClass("btn-primary")):$("#lastPage"+a+", #nextPage"+a+", #fistPage"+a+", #upPage"+a+", #Gotojump"+a).prop("disabled",!1).removeClass("btn-default").addClass("btn-primary")}function Check(t){"singleSelect"==t?($(".select2").hide(),$(".select-content").css("margin-left","33%")):($(".select2").show(),$(".select-content").css("margin-left","23%"))}function selectSearch(){if("none"==$(".select1 .time").css("display")&&"none"==$(".select2 .time").css("display")){if(console.log("ininnin"),"none"==$(".select2").css("display")){if(""!=$("#searchContent1").val()){$("#search").val("search");var t=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=DateOfSign&condition=All";$("#top_text_from").attr("action",t),$("#top_text_from").submit()}}else if(""!=$("#searchContent1").val()&&""!=$("#searchContent2").val()){$("#search").val("search");t=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=DateOfSign&condition=All";$("#top_text_from").attr("action",t),$("#top_text_from").submit()}}else if("none"==$(".select2").css("display"))if($(".select1 .startTime").val().replace("-","").replace("-","")<$(".select1 .endTime").val().replace("-","").replace("-","")){$("#search").val("search");t=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=DateOfSign&condition=All";$("#top_text_from").attr("action",t),$("#top_text_from").submit()}else alert("请正确输入时间！");else if("none"==$(".select1 .time").css("display")&&"none"!=$(".select2 .time").css("display")){if($(".select2 .startTime").val().replace("-","").replace("-","")<$(".select2 .endTime").val().replace("-","").replace("-","")){$("#search").val("search");t=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=DateOfSign&condition=All";$("#top_text_from").attr("action",t),$("#top_text_from").submit()}else alert("请正确输入时间！")}else if("none"!=$(".select1 .time").css("display")&&"none"==$(".select2 .time").css("display")){if($(".select1 .startTime").val().replace("-","").replace("-","")<$(".select1 .endTime").val().replace("-","").replace("-","")){$("#search").val("search");t=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=DateOfSign&condition=All";$("#top_text_from").attr("action",t),$("#top_text_from").submit()}else alert("请正确输入时间！")}else{var e=$(".select1 .startTime").val().replace("-","").replace("-",""),a=$(".select1 .endTime").val().replace("-","").replace("-",""),o=$(".select2 .startTime").val().replace("-","").replace("-",""),n=$(".select2 .endTime").val().replace("-","").replace("-","");if(e<a&&o<n){$("#search").val("search");t=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=DateOfSign&condition=All";$("#top_text_from").attr("action",t),$("#top_text_from").submit()}else alert("请正确输入时间！")}}function selectCancel(){window.location.assign(globalBaseUrl+"/Transport?ActualDelivery=no&column=DateOfSign&condition=All")}function FistPage(t){var e=window.location.href.split("ActualDelivery=")[1];window.location.href=t+"1&ActualDelivery="+e}function UpPage(t){var e=window.location.href.split("ActualDelivery=")[1];window.location.href=t+"&ActualDelivery="+e}function NextPage(t){var e=window.location.href.split("ActualDelivery=")[1];console.log(e),window.location.href=t+"&ActualDelivery="+e}function PageJump(t){var e=window.location.href.split("ActualDelivery=")[1],a=document.getElementById("jumpNumber").value;null==a||0==a?a=$("#currentPage").html():a>parseInt($("#allPage").html())&&(a=$("#allPage").html()),window.location.href=t+a+"&ActualDelivery="+e}function LastPage(t){var e=window.location.href.split("ActualDelivery=")[1],a=parseInt($("#allPage").html());window.location.href=t+a+"&ActualDelivery="+e}var ContractNo,ContractTitle,operateMark;!function(){$.MsgBox={Alert:function(t,e,a){o("alert",t,e),d(a),r()},Judge:function(t,e,a){o("judge",t,e),i(a),r()},Confirm:function(t,e,a){o("confirm",t,e),d(a),r()},Prompt:function(t,e,a){o("prompt",t,e),d(a),r()},Remind:function(t,e,a){o("remind",t,e),d(a),r()}};var o=function(t,e,a){var o="";o+='<div id="mb_box"></div><div id="mb_con"><span id="mb_tit">'+e+"</span>",o+='<a id="mb_ico"></a><div id="mb_msg">'+a+'</div><div id="mb_btnbox">',"alert"==t&&(o+='<input id="mb_btn_ok" type="button" value="确定" />'),"judge"==t&&(o+='<input id="mb_jug_ok" type="button" value="确定" />'),"confirm"==t&&(o+='<input id="mb_btn_ok" type="button" value="是" />',o+='<input id="mb_btn_no" type="button" value="否" />'),"prompt"==t&&(o+='<span style="display:inline-block;width:100%;height:27px;background:#00aeef"></span>'),"remind"==t&&(o+='<span style="display:inline-block;width:100%;height:27px;background:#fff;margin-top: -1px;"></span>'),o+="</div></div>",$("body").append(o),n()},n=function(){$("#mb_box").css({width:"100%",height:"100%",zIndex:"99999",position:"fixed",filter:"Alpha(opacity=60)",backgroundColor:"rgba(10%,20%,30%,0.6)",top:"0",left:"0",opacity:"0.6"}),$("#mb_con").css({zIndex:"999999",width:"355px",height:"189px",position:"fixed",backgroundColor:"White",borderRadius:"",border:"1px solid #fff"}),$("#mb_tit").css({display:"block",fontSize:"16px",color:"#444",padding:"2px 15px",backgroundColor:"#00aeef",borderRadius:"",borderBottom:"",fontWeight:"normal",fontFamily:"microsoft yahei"}),$("#mb_msg").css({height:"60px",lineHeight:"125px",fontSize:"13px",textAlign:"center",fontSize:"16px",fontFamily:"microsoft yahei"}),$("#mb_msg p").css({height:"30px",lineHeight:"30px",width:"350px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),$("#mb_btnbox").css({margin:"75px 0 0",textAlign:"center",background:"#00aeef",paddingTop:"1px"}),$("#mb_btn_ok,#mb_jug_ok,#mb_btn_no").css({width:"60px",height:"28px",color:"#000",border:"1px solid #fff",borderRadius:"3px",background:"#00aeef",fontSize:"14px",fontFamily:"microsoft yahei"}),$("#mb_btn_ok,#mb_jug_ok").css({backgroundColor:"#00aeef"}),$("#mb_btn_no").css({backgroundColor:"#00aeef",marginLeft:"20px"}),$("#mb_ico").hover(function(){$(this).css({backgroundColor:"Red",color:"White"})},function(){$(this).css({backgroundColor:"#DDD",color:"black"})});var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight,a=$("#mb_con").width(),o=$("#mb_con").height();$("#mb_con").css({top:(e-o)/2+"px",left:(t-a)/2+"px"})},d=function(t){$("#mb_btn_ok").click(function(){$("#mb_box,#mb_con").remove(),"function"==typeof t&&t()})},i=function(t){$("#mb_jug_ok").click(function(){$("#mb_box,#mb_con").remove(),"function"==typeof t&&t()})},r=function(){$("#mb_btn_no,#mb_ico").click(function(){$("#mb_box,#mb_con").remove()})}}(),function(){$.Response_Load={Before:function(t,e,a){o(t,e),""===a||null==a?alertGroupOpen(".eoulu-response-load-bg",".eoulu-response-load",200):alertGroupOpen(".eoulu-response-load-bg",".eoulu-response-load",a),$(window).on("resize",function(){alertResponse(".eoulu-response-load",250,355)})},Loading:function(t){e(t)},After:function(t,e){a(t,e)}};var o=function(t,e){if(0==$(".eoulu-response-load").length){var a="";a+='<div class="eoulu-response-load-bg" style="display:none"></div><div class="eoulu-response-load" style="display:none"><div class="eoulu-response-load-tit">'+t+'</div><div class="eoulu-response-load-message"><img width="190" height="14"><p>'+e+"</p></div></div>",$("body").append(a),n()}else $(".eoulu-response-load-tit").text(t),$(".eoulu-response-load-message p").text(e)},n=function(){$(".eoulu-response-load-bg").css({width:"100%",height:"100%","z-index":"99998",position:"fixed",filter:"Alpha(opacity=60)","background-color":"rgba(10%,20%,30%,0.6)",top:"0",left:"0",opacity:"0.6"}),$(".eoulu-response-load").css({position:"fixed",width:"355px",height:"190px","z-index":"99999","background-color":"rgba(255,255,255,0.95)","border-radius":"10px","font-family":"microsoft yahei"}),alertResponse(".eoulu-response-load",250,355),$(".eoulu-response-load-tit").css({height:"30px","line-height":"30px","font-size":"16px",color:"#fff",padding:"2px 15px","background-color":"#707070","border-top-left-radius":"10px","border-top-right-radius":"10px"}),$(".eoulu-response-load-message img").attr("src","./image/response-loading.gif"),$(".eoulu-response-load-message img").css({margin:"30px auto"}),$(".eoulu-response-load-message").css({margin:"5px auto",width:"350px",height:"165px","font-size":"16px","text-align":"center"}),$(".eoulu-response-load-message p").css({height:"30px","line-height":"30px",width:"350px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden","text-align":"center"})},e=function(t){0!=$(".eoulu-response-load").length&&$(".eoulu-response-load-message p").text(t)},a=function(t,e){0!=$(".eoulu-response-load").length&&($(".eoulu-response-load-message p").text(t),e?alertGroupDelayClose(".eoulu-response-load-bg",".eoulu-response-load",e):alertGroupDelayClose(".eoulu-response-load-bg",".eoulu-response-load",200))}}(),$(".cover-color").height($(document).height()-80),"singleSelect"==$('input[name="selected"]:checked').val()?$(".select-content").css("margin-left","33%"):$(".select-content").css("margin-left","23%"),$("#searchContent1").keypress(function(t){$("#search").val("search"),"13"==(t.keyCode?t.keyCode:t.which)&&$("#top_text_from").submit()}),$("#searchContent2").keypress(function(t){$("#search").val("search"),"13"==(t.keyCode?t.keyCode:t.which)&&$("#top_text_from").submit()}),$("#type1").click(function(){0<=$(this).val().indexOf("货期")?($("#searchContent1").hide(),$(".select1 .time").show()):($("#searchContent1").show(),$(".select1 .time").hide())}),$("#type2").click(function(){0<=$(this).val().indexOf("货期")?($("#searchContent2").hide(),$(".select2 .time").show()):($("#searchContent2").show(),$(".select2 .time").hide())}),$(function(){pageStyle(Number($("#currentPage").text()),Number($("#allPage").text()));var t=$("#transport_queryType").val();"singleSelect"==t||"common"==t?$(".select2").hide():$(".select2").show(),$(".D3_D2, .D3_D1").each(function(){var t=$(this).siblings(".ActualDelivery_td").text();if(""!=t&&"--"!=t&&"0000-00-00"!=t){var e,a,o,n,d=$(this).text();$(this).is(".D3_D2")?(e="逾期",a="提前",o="正常发货"):$(this).is(".D3_D4")?(e="延迟",a="提前",o="正常发货"):$(this).is(".D4_D2")?(e="预计延迟",a="预计提前",o="正常发货"):$(this).is(".D3_D1")&&(e="",a="提前",o="当天发货"),0==d?n=o:0<d?n=e+d+"天":d<0&&(n=a+Math.abs(d)+"天"),$(this).text(n).css({color:"#000",opacity:"1"})}}),$(".D3_D4").each(function(){var t=$(this).siblings(".ActualDelivery_td").text(),e=$(this).siblings(".ExpectedDeliveryPeriod_td").attr("title");if(""!=t&&"--"!=t&&"0000-00-00"!=t&&""!=e&&"--"!=e&&"0000-00-00"!=e){var a,o,n,d,i=$(this).text();$(this).is(".D3_D2")?(a="逾期",o="提前",n="正常发货"):$(this).is(".D3_D4")?(a="延迟",o="提前",n="正常发货"):$(this).is(".D4_D2")?(a="预计延迟",o="预计提前",n="正常发货"):$(this).is(".D3_D1")&&(a="",o="提前",n="当天发货"),0==i?d=n:0<i?d=a+i+"天":i<0&&(d=o+Math.abs(i)+"天"),$(this).text(d).css({color:"#000",opacity:"1"})}}),$(".D4_D2").each(function(){var t=$(this).siblings(".ExpectedDeliveryPeriod_td").attr("title");if(""!=t&&"--"!=t&&"0000-00-00"!=t){var e,a,o,n,d=$(this).text();$(this).is(".D3_D2")?(e="逾期",a="提前",o="正常发货"):$(this).is(".D3_D4")?(e="延迟",a="提前",o="正常发货"):$(this).is(".D4_D2")?(e="预计延迟",a="预计提前",o="正常发货"):$(this).is(".D3_D1")&&(e="",a="提前",o="当天发货"),0==d?n=o:0<d?n=e+d+"天":d<0&&(n=a+Math.abs(d)+"天"),$(this).text(n).css({color:"#000",opacity:"1"})}})}),$("#export").click(function(){var t=$('input[name="query_type"]').val();console.log(t);var e=window.location.href.split("ActualDelivery=")[1].split("&")[0],a=window.location.href.split("column=")[1].split("&")[0],o=window.location.href.split("condition=")[1].split("&")[0],n=$('input[name="classify1"]').val(),d=$('input[name="classify2"]').val(),i=$('input[name="parameter1"]').val(),r=$('input[name="parameter2"]').val();"singleSelect"!=t||"合同货期"!=n&&"实际货期"!=n&&"预计货期"!=n||(i=$('input[name="start_time1"]').val(),r=$('input[name="end_time1"]').val()),$("#export").attr("disabled","disabled"),$("#export").css({background:"#ddd",color:"rgba(0,0,0,0.7)",border:"none",cursor:"not-allowed"}),$.ajax({type:"get",url:"ExportOrder",data:{query_type:t,classify1:n,classify2:d,parameter1:i,parameter2:r,ActualDelivery:e,column:a,condition:o},beforeSend:function(t){$.Response_Load.Before("导出提示","正在传输数据......",200)},complete:function(t,e){"success"==e&&$.Response_Load.After("导出完成！",300)},success:function(t){console.log(t),window.location.href=t,$("#export").attr("disabled",!1),$("#export").css({background:"#00aeef",color:"#fff",border:"none","box-shadow":"1px 2px 5px 0 #00aeef",cursor:"pointer"})},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})}),$(".supply-show").click(function(){var t=$(this).attr("value");$.ajax({type:"get",url:"GetLogistic",data:{order_id:t},dataType:"json",success:function(t){$(".info .infoPage tbody").html("");for(var e=1;e<t.length;e++){var a="<tr><td>"+t[e].Supplier+"</td><td>"+t[e].PONO+"</td><td>"+t[e].SONO+"</td><td>"+t[e].POAmount+"</td><td>"+t[e].FactoryShipment+"</td></tr>";$(".info .infoPage tbody").append(a)}$(".cover-color").show(),$(".info").show()},error:function(){alert("defeat"),$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})}),$(".info_close").click(function(){$(".cover-color").hide(),$(".info").hide()}),$(".contract-show").click(function(){var t=$(this).attr("value");$.ajax({type:"get",url:"GetOrderInfo",data:{order_id:t},dataType:"json",success:function(t){$(".contractPage tbody").html("");for(var e=1;e<t.length;e++){var a="<tr><td>"+t[e].OrderID+"</td><td>"+t[e].EquipmentModel+"</td><td>"+t[e].Remarks+"</td><td>"+t[e].Number+"</td><td>"+t[e].LogisticsNumber+"</td><td>"+t[e].Date+"</td><td>"+t[e].ExceptDate+"</td><td>"+t[e].DeliveryNumber+"</td><td>"+t[e].Status+"</td></tr>";$(".contractPage tbody").append(a)}$(".cover-color").show(),$(".contract").show()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})}),$(".contract_close").click(function(){$(".cover-color").hide(),$(".contract").hide()}),$(".supply-detail-show").click(function(){var t=$(this).attr("value");$.ajax({type:"get",url:"GetQuotes",data:{order_id:t},dataType:"json",success:function(t){$(".detailPage tbody").html("");for(var e=1;e<t.length;e++){var a="<tr><td>"+t[e].WhetherToPay+"</td><td>"+t[e].DutyFree+"</td></tr>";$(".detailPage tbody").append(a)}$(".cover-color").show(),$(".supply-detail").show()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})}),$(".supply_detail_close").click(function(){$(".cover-color").hide(),$(".supply-detail").hide()}),$(".supply-po-show").click(function(){var t=$(this).attr("value");$.ajax({type:"get",url:"GetPOStatics",data:{order_id:t},dataType:"json",success:function(t){$(".info_po .poPage tbody").html("");for(var e=1;e<t.length;e++){var a="<tr><td>"+t[e].PONO+"</td><td>"+t[e].RMB+"</td><td>"+t[e].USD+"</td></tr>";"--"!=t[e].PONO&&""!=t[e].PONO&&$(".info_po .poPage tbody").append(a)}$(".cover-color").show(),$(".info_po").show()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})}),$(".po_close").click(function(){$(".cover-color").hide(),$(".info_po").hide()}),$(".operate-edit").click(function(){var user_id=$("#userID").val(),check1=$("#review_name1").val(),check2=$("#review_name2").val(),order_id=$(this).attr("value");ContractNo=$(this).parent().parent().find("td").eq(4).text(),ContractTitle=$(this).parent().parent().find("td").eq(3).text(),$('.operate .update_date input[name="order_id"]').val(order_id),$('.operate .update_date input[name="actual_delivery"]').val($(this).parent().parent().find("td").eq(12).html()),"change"==$(this).parent().parent().find("td").eq(13).attr("class")?$('.operate .update_date input[name="expected_delivery_period"]').val($(this).parent().parent().find("td").eq(13).find("span").html()):$('.operate .update_date input[name="expected_delivery_period"]').val($(this).parent().parent().find("td").eq(13).html()),$('.operate .update_date select[name="status"]').find('option[text="'+$(this).parent().parent().find("td").eq(15).html()+'"]').prop("selected",!0),$.ajax({type:"get",url:"GetOrderType",data:{order_id:order_id},dataType:"json",success:function(data){data=eval("("+data+")"),$("#order_type").val(data.Type),$.ajax({type:"get",url:"GetOrderInfoAndLogisc",data:{order_id:order_id},dataType:"json",success:function(t){var e;$(".operatePage tbody").html("");for(var a=1;a<t.length;a++){var o,n="0000-00-00"==t[a].FactoryShipment?"--":t[a].FactoryShipment;o="0"==t[a].Review1?'<td>未审核<span style="display:none">'+t[a].Review1+"</span></td>":"1"==t[a].Review1?"<td>不通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>":"<td>通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>","0"==t[a].Review2?review_state2='<td>未审核<span style="display:none">'+t[a].Review2+"</span></td>":"1"==t[a].Review2?review_state2="<td>不通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>":review_state2="<td>通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>",e="1"==t[a].Review1||"1"==t[a].Review2?"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+n+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td style="background-color:white;"> <input type="button" name="operate-update" value="修改" class="bToggle"><br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+n+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td style="background-color:white;"> <input type="button" name="operate-update" value="修改" class="bToggle"><br></td></tr>':"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+n+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td> <input type="button" name="operate-update" value="修改" class="bToggle"><br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+n+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td> <input type="button" name="operate-update" value="修改" class="bToggle"></td></tr>',$(".operatePage tbody").append(e)}$(".cover-color").show(),$(".operate").show()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})}),$(document).on("click","input[name='update_date']",function(){$(this).siblings().show(),$(this).parent().find("input[type='date']").removeAttr("disabled"),$(this).hide()}),$(document).on("click","input[name='submit_date']",function(){var a=$(this),o=$('.operate .update_date input[name="order_id"]').val(),t=$('.operate .update_date input[name="actual_delivery"]').val(),e=$('.operate .update_date input[name="expected_delivery_period"]').val();$.ajax({type:"get",url:"ModifyOrderLogisticsDate",data:{order_id:o,actual_delivery:t,expected_delivery_period:e},dataType:"json",success:function(t){var e=$("#table1").find('.operate-edit[value="'+o+'"]').parent().parent();e.find("td").eq(11).html(t[1].ActualDelivery),e.find("td").eq(12).html(t[1].ExpectedDeliveryPeriod),a.parent().find("input[name='actual_delivery']").val(t[1].ActualDelivery),a.parent().find("input[name='expected_delivery_period']").val(t[1].ExpectedDeliveryPeriod),a.siblings().show(),a.parent().find("input[type='date']").attr("disabled",!0),a.hide()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})}),$(document).on("click","input[name='update_state']",function(){$(this).siblings().show(),$(this).parent().find("select[name='status']").removeAttr("disabled"),$(this).hide()}),$(document).on("click","input[name='submit_state']",function(){var e=$(this),a=$('.operate .update_date input[name="order_id"]').val(),t=$('.operate .update_date select[name="status"]').val();$.ajax({type:"get",url:"ModifyContractStatus",data:{order_id:a,status:t},dataType:"json",success:function(t){$("#table1").find('.operate-edit[value="'+a+'"]').parent().parent().find("td").eq(13).html(t[1].Status),e.parent().find("input[name='status']").val(t[1].Status),e.siblings().show(),e.parent().find("select[name='status']").attr("disabled",!0),e.hide()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})});var operateMarkSet=[];function GetDateStr(t){var e=new Date($('.editPage input[name="factory_shipment"]').val().replace(/\-/g,"/"));return e.setDate(e.getDate()+t),e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())}$(document).on("click","input[name='operate-update']",function(){var t=$(this).parent().parent(),e=t.index();operateMark=0==e?.1:e;var a=$(".bottom_table");if(t.parent().find("input[name='operate-update']").addClass("bToggle"),t.parent().find("input[name='operate-update']").removeAttr("disabled"),t.parent().find("input[name='operate-check']").addClass("bToggle"),t.parent().find("input[name='operate-check']").removeAttr("disabled"),$(this).attr("disabled","true"),$(this).removeClass("bToggle"),a.find('input[name="id"]').val(t.find("td").eq(0).html()),a.find('input[name="order_id"]').val(t.find("td").eq(1).html()),""!=t.find("td").eq(2).html()&&"--"!=t.find("td").eq(2).html()){var o=t.find("td").eq(2).html();a.find('select[name="supplier"]').find('option[text="'+o+'"]').prop("selected",!0)}else a.find('select[name="supplier"]').find('option[text=""]').prop("selected",!0);a.find('input[name="po_no"]').val(t.find("td").eq(3).html()),a.find('input[name="so_no"]').val(t.find("td").eq(4).html()),a.find('input[name="po_amount"]').val(t.find("td").eq(5).html()),a.find('input[name="rmb_po_amount"]').val(t.find("td").eq(6).html()),a.find('input[name="factory_shipment"]').val(t.find("td").eq(7).html()),a.find('input[name="logistics_number"]').val(t.find("td").eq(11).html()),a.find('input[name="stock_number"]').val(t.find("td").eq(12).html()),a.find('input[name="date"]').val(t.find("td").eq(13).html()),a.find('input[name="except_date"]').val(t.find("td").eq(14).html()),a.find('input[name="delivery_number"]').val(t.find("td").eq(15).html()),""!=t.find("td").eq(16).html()&&"--"!=t.find("td").eq(16).html()?a.find('select[name="status"]').find("option[text="+t.find("td").eq(16).html()+"]").prop("selected",!0):a.find('select[name="status"]').find('option[text=""]').prop("selected",!0),a.find('input[name="estimated_payment_time"]').val(t.find("td").eq(17).html()),a.find('input[name="actual_payment_time"]').val(t.find("td").eq(18).html()),a.show(),$(".check_table").hide()}),$(document).on("click","input[name='operate-check']",function(){$("#userID").val();var t=$("#review_name1").val(),e=$("#review_name2").val(),a=$(this).parent().parent(),o=$(".check_table");a.parent().find("input[name='operate-update']").addClass("bToggle"),a.parent().find("input[name='operate-update']").removeAttr("disabled"),a.parent().find("input[name='operate-check']").addClass("bToggle"),a.parent().find("input[name='operate-check']").removeAttr("disabled"),$(this).attr("disabled","true"),$(this).removeClass("bToggle"),o.find('input[name="id"]').val(a.find("td").eq(0).html()),o.find('input[name="order_id"]').val(a.find("td").eq(1).html()),o.find('select[name="review1"]').find("option[value="+a.find("td").eq(19).find("span").html()+"]").prop("selected",!0),o.find('select[name="review2"]').find("option[value="+a.find("td").eq(20).find("span").html()+"]").prop("selected",!0),$('select[name="review1"]').removeAttr("disabled"),$('select[name="review2"]').removeAttr("disabled"),"OrderInfoReview1"==t?$('select[name="review2"]').attr("disabled","true"):"OrderInfoReview2"==e?$('select[name="review1"]').attr("disabled","true"):($('select[name="review1"]').attr("disabled","true"),$('select[name="review2"]').attr("disabled","true")),o.show(),$(".bottom_table").hide()}),$(".operate_close").click(function(){operateMarkSet=[],$(".cover-color").hide(),$(".operate").hide(),$(".bottom_table").hide(),$(".check_table").hide(),window.location.reload()}),$("#edit_cancel").click(function(){$(".bottom_table").hide(),$(this).parent().parent().parent().find("input[name='operate-update']").addClass("bToggle"),$(this).parent().parent().parent().find("input[name='operate-update']").removeAttr("disabled")}),$("#check_cancel").click(function(){$(".check_table").hide(),$(this).parent().parent().parent().find("input[name='operate-check']").addClass("bToggle"),$(this).parent().parent().parent().find("input[name='operate-check']").removeAttr("disabled")}),$('.editPage input[name="rmb_po_amount"]').blur(function(){""!=$(this).val()&&0!=$(this).val()&&"--"!=$(this).val()&&""!=$('.editPage input[name="po_amount"]').val()&&0!=$('.editPage input[name="po_amount"]').val()&&$('.editPage input[name="po_amount"]').val(0)}),$('.editPage input[name="po_amount"]').blur(function(){""!=$(this).val()&&0!=$(this).val()&&"--"!=$(this).val()&&""!=$('.editPage input[name="rmb_po_amount"]').val()&&0!=$('.editPage input[name="rmb_po_amount"]').val()&&$('.editPage input[name="rmb_po_amount"]').val(0)}),$(document).on("blur",'.editPage input[name="factory_shipment"]',function(){"RMB"==$("#order_type").val()?($(".usd").hide(),$(".rmb").show(),$('.editPage input[name="except_date"]').val(GetDateStr(15))):($(".usd").show(),$(".rmb").hide(),$('.editPage input[name="except_date"]').val(GetDateStr(7)))}),$(document).on("click","#edit_submit",function(){var columns=[],user_id=$("#userID").val(),check1=$("#review_name1").val(),check2=$("#review_name2").val(),order_id=""==$('.bottom_table input[name="order_id"]').val()?"--":$('.bottom_table input[name="order_id"]').val(),supplier=$('.bottom_table select[name="supplier"]').val(),supplierText=$('.bottom_table select[name="supplier"] option:checked').text(),po_no=""==$('.bottom_table input[name="po_no"]').val()?"--":$('.bottom_table input[name="po_no"]').val(),so_no=""==$('.bottom_table input[name="so_no"]').val()?"--":$('.bottom_table input[name="so_no"]').val(),po_amount=$('.bottom_table input[name="po_amount"]').val(),rmb_po_amount=$('.bottom_table input[name="rmb_po_amount"]').val(),factory_shipment=""==$('.bottom_table input[name="factory_shipment"]').val()?"--":$('.bottom_table input[name="factory_shipment"]').val(),logistics_number=""==$('.bottom_table input[name="logistics_number"]').val()?"--":$('.bottom_table input[name="logistics_number"]').val(),date=$('.bottom_table input[name="date"]').val(),except_date=$('.bottom_table input[name="except_date"]').val(),delivery_number=""==$('.bottom_table input[name="delivery_number"]').val()?"--":$('.bottom_table input[name="delivery_number"]').val(),status=$('.bottom_table select[name="status"]').val(),statusText=$('.bottom_table select[name="status"] option:checked').text(),estimated_payment_time=$('.bottom_table input[name="estimated_payment_time"]').val(),actual_payment_time=$('.bottom_table input[name="actual_payment_time"]').val(),IsChangeIndex=.1==operateMark?1:operateMark,changeDom=$(".operatePage  tr").eq(IsChangeIndex).children();changeDom.eq(2).text()!=(""==supplierText?"":supplierText)&&columns.push("Supplier"),changeDom.eq(3).text()!=po_no&&columns.push("PONO"),changeDom.eq(4).text()!=so_no&&columns.push("SONO"),changeDom.eq(5).text()!=po_amount&&columns.push("POAmount"),changeDom.eq(6).text()!=rmb_po_amount&&columns.push("RMBPOAmount"),changeDom.eq(7).text()!=factory_shipment&&columns.push("FactoryShipment"),changeDom.eq(11).text()!=logistics_number&&columns.push("LogisticsNumber"),changeDom.eq(13).text()!=(""==date?"--":date)&&columns.push("Date"),changeDom.eq(14).text()!=(""==except_date?"--":except_date)&&columns.push("ExceptDate"),changeDom.eq(15).text()!=delivery_number&&columns.push("DeliveryNumber"),changeDom.eq(16).text()!=(""==statusText?"--":statusText)&&columns.push("Status"),changeDom.eq(17).text()!=(""==estimated_payment_time?"--":estimated_payment_time)&&columns.push("EstimatedPaymentTime"),changeDom.eq(18).text()!=(""==actual_payment_time?"--":actual_payment_time)&&columns.push("ActualPaymentTime"),columns=columns.unique();var dataSet=new Object;if(.1==operateMark){for(var edit_submit_url="ModifyOrderInfo",operatePageLength=$(".operatePage tbody tr").length,id="",i=0;i<operatePageLength;i++)id+=$(".operatePage tbody tr").eq(i).find("td").eq(0).text()+",";dataSet.id=id,dataSet.order_id=order_id,dataSet.columns=columns,0<=$.inArray("Supplier",columns)&&(dataSet.supplier=supplier),0<=$.inArray("PONO",columns)&&(dataSet.po_no=po_no),0<=$.inArray("SONO",columns)&&(dataSet.so_no=so_no),0<=$.inArray("POAmount",columns)&&(dataSet.po_amount=po_amount),0<=$.inArray("RMBPOAmount",columns)&&(dataSet.rmb_po_amount=rmb_po_amount),0<=$.inArray("FactoryShipment",columns)&&(dataSet.factory_shipment=factory_shipment),0<=$.inArray("LogisticsNumber",columns)&&(dataSet.logistics_number=logistics_number),0<=$.inArray("Date",columns)&&(dataSet.date=date),0<=$.inArray("ExceptDate",columns)&&(dataSet.except_date=except_date),0<=$.inArray("DeliveryNumber",columns)&&(dataSet.delivery_number=delivery_number),0<=$.inArray("Status",columns)&&(dataSet.status=status),0<=$.inArray("EstimatedPaymentTime",columns)&&(dataSet.estimated_payment_time=estimated_payment_time),0<=$.inArray("ActualPaymentTime",columns)&&(dataSet.actual_payment_time=actual_payment_time)}else{var edit_submit_url="ModifyOrderInfoAlone",id=$('.bottom_table input[name="id"]').val();dataSet={id:id,order_id:order_id,supplier:supplier,po_no:po_no,so_no:so_no,po_amount:po_amount,rmb_po_amount:rmb_po_amount,factory_shipment:factory_shipment,logistics_number:logistics_number,date:date,except_date:except_date,delivery_number:delivery_number,status:status,estimated_payment_time:estimated_payment_time,actual_payment_time:actual_payment_time}}console.log(dataSet),$.ajax({type:"get",url:edit_submit_url,data:dataSet,dataType:"json",success:function(data){data=eval("("+data+")"),data.message?($.MsgBox.Alert("提示","修改成功！"),$.ajax({type:"get",url:"GetOrderInfoAndLogisc",data:{order_id:order_id},dataType:"json",success:function(t){var e;$(".operatePage tbody").html("");for(var a=1;a<t.length;a++){var o;operateMark!=a-1&&.1!=operateMark||operateMarkSet.push(operateMark),o='<input type="button" name="operate-update" value="修改"  class="bToggle">';var n,d="0000-00-00"==t[a].FactoryShipment?"--":t[a].FactoryShipment;n="0"==t[a].Review1?'<td>未审核<span style="display:none">'+t[a].Review1+"</span></td>":"1"==t[a].Review1?"<td>不通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>":"<td>通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>","0"==t[a].Review2?review_state2='<td>未审核<span style="display:none">'+t[a].Review2+"</span></td>":"1"==t[a].Review2?review_state2="<td>不通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>":review_state2="<td>通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>",e="1"==t[a].Review1||"1"==t[a].Review2?"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+d+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+n+review_state2+'<td style="background-color:white;">'+o+'<br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+d+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+n+review_state2+'<td style="background-color:white;">'+o+"<br></td></tr>":"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+d+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+n+review_state2+"<td> "+o+'<br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+d+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].InventoryQuantity+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+n+review_state2+"<td> "+o+"</td></tr>",$(".operatePage tbody").append(e)}$(".cover-color").show(),$(".operate").show()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")},complete:function(){operateMarkSet=operateMarkSet.unique();for(var t=0;t<operateMarkSet.length;t++).1==operateMarkSet[t]?$(".operatePage  tr").eq(1).children().eq(21).find('input[name="operate-update"]').css("background","red"):$(".operatePage tbody tr").eq(operateMarkSet[t]).children().eq(21).find('input[name="operate-update"]').css("background","red")}})):$.MsgBox.Alert("提示","修改失败！")},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！"),$(".bottom_table").hide()}})}),$(document).on("click","#check_submit",function(){var user_id=$("#userID").val(),check1=$("#review_name1").val(),check2=$("#review_name2").val(),id=$('.check_table input[name="id"]').val(),order_id=$('.check_table input[name="order_id"]').val(),review1=$('.check_table select[name="review1"]').val(),review2=$('.check_table select[name="review2"]').val();"OrderInfoReview1"==check1?$.ajax({type:"get",url:"OrderInfoReview1",data:{user_id:user_id,order_info_id:id,review1:review1,review_name1:user_id},dataType:"json",success:function(data){data=eval("("+data+")"),data.message?($.MsgBox.Alert("提示","审核成功！"),$.ajax({type:"get",url:"GetOrderInfoAndLogisc",data:{order_id:order_id},dataType:"json",success:function(t){var e;$(".operatePage tbody").html("");for(var a=1;a<t.length;a++){var o;o="0"==t[a].Review1?'<td>未审核<span style="display:none">'+t[a].Review1+"</span></td>":"1"==t[a].Review1?"<td>不通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>":"<td>通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>","0"==t[a].Review2?review_state2='<td>未审核<span style="display:none">'+t[a].Review2+"</span></td>":"1"==t[a].Review2?review_state2="<td>不通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>":review_state2="<td>通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>",e="1"==t[a].Review1||"1"==t[a].Review2?"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td style="background-color:white;"> <input type="button" name="operate-update" value="修改" class="bToggle"><br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td style="background-color:white;"> <input type="button" name="operate-update" value="修改" class="bToggle"><br></td></tr>':"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td> <input type="button" name="operate-update" value="修改" class="bToggle"><br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td> <input type="button" name="operate-update" value="修改" class="bToggle"></td></tr>',$(".operatePage tbody").append(e)}$(".cover-color").show(),$(".operate").show()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})):$.MsgBox.Alert("提示","修改失败！")},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！"),$(".bottom_table").hide()}}):"OrderInfoReview2"==check2?$.ajax({type:"get",url:"OrderInfoReview2",data:{user_id:user_id,order_info_id:id,review2:review2,review_name2:user_id},dataType:"json",success:function(data){data=eval("("+data+")"),data.message?($.MsgBox.Alert("提示","审核成功！"),$.ajax({type:"get",url:"GetOrderInfoAndLogisc",data:{order_id:order_id},dataType:"json",success:function(t){var e;$(".operatePage tbody").html("");for(var a=1;a<t.length;a++){var o;o="0"==t[a].Review1?'<td>未审核<span style="display:none">'+t[a].Review1+"</span></td>":"1"==t[a].Review1?"<td>不通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>":"<td>通过<br>（"+t[a].ReviewName1+'）<span style="display:none">'+t[a].Review1+"</span></td>","0"==t[a].Review2?review_state2='<td>未审核<span style="display:none">'+t[a].Review2+"</span></td>":"1"==t[a].Review2?review_state2="<td>不通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>":review_state2="<td>通过<br>（"+t[a].ReviewName2+'）<span style="display:none">'+t[a].Review2+"</span></td>",e="1"==t[a].Review1||"1"==t[a].Review2?"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td style="background-color:white;"> <input type="button" name="operate-update" value="修改" class="bToggle"><br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr class="change current_line"><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td style="background-color:white;"> <input type="button" name="operate-update" value="修改" class="bToggle"><br></td></tr>':"OrderInfoReview1"==check1||"OrderInfoReview2"==check2?'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td> <input type="button" name="operate-update" value="修改" class="bToggle"><br><input type="button" name="operate-check" value="审核" class="bToggle"></td></tr>':'<tr><td style="display: none">'+t[a].ID+'</td><td style="display: none">'+t[a].OrderID+"</td><td>"+t[a].Name+"</td><td>"+t[a].PONO+"</td><td>"+t[a].SONO+"</td><td>"+t[a].POAmount+"</td><td>"+t[a].RMBPOAmount+"</td><td>"+t[a].FactoryShipment+"</td><td>"+t[a].EquipmentModel+"</td><td>"+t[a].Remarks+"</td><td>"+t[a].Number+"</td><td>"+t[a].LogisticsNumber+"</td><td>"+t[a].StockNumber+"</td><td>"+t[a].Date+"</td><td>"+t[a].ExceptDate+"</td><td>"+t[a].DeliveryNumber+"</td><td>"+t[a].Status+"</td><td>"+t[a].EstimatedPaymentTime+"</td><td>"+t[a].ActualPaymentTime+"</td>"+o+review_state2+'<td> <input type="button" name="operate-update" value="修改" class="bToggle"></td></tr>',$(".operatePage tbody").append(e)}$(".cover-color").show(),$(".operate").show()},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！")}})):$.MsgBox.Alert("提示","修改失败！")},error:function(){$.MsgBox.Alert("提示","服务器繁忙，稍后重试！"),$(".bottom_table").hide()}}):$.MsgBox.Alert("提示","没有修改权限！")}),$("#fa-button1").on("click",function(){$(this).toggleClass("glyphicon-plus glyphicon-minus"),$("#table1 tbody tr").find("td:eq(6)").toggle(),$("#table1 tbody tr").find("td:eq(7)").toggle(),$("#table1 tbody tr").find("td:eq(8)").toggle(),$("#table1 tbody tr").find("td:eq(9)").toggle(),$("#table1 tbody tr").find("td:eq(10)").toggle(),$(".Customer_th, .Contact_th, .ContactInfo_th, .SalesRepresentative_th, .DateOfSign_th").toggle()}),$("#fa-button2").on("click",function(){$(this).toggleClass("glyphicon-plus glyphicon-minus"),$("#table1 tbody tr").find("td:eq(16)").toggle(),$("#table1 tbody tr").find("td:eq(17)").toggle(),$(".InstalledTimeSite_th, .Remarks_th").toggle()}),$("#fa-button3").on("click",function(){$(this).toggleClass("glyphicon-plus glyphicon-minus"),$(".D3_D2_th, .D3_D4_th, .D4_D2_th, .D3_D1_th, .D3_D2, .D3_D4, .D4_D2, .D3_D1").toggle()}),$("#hetonghuoqiSel").on("change",function(){window.location.href.split("ActualDelivery=")[1].split("&")[0];var t=window.location.href.split("/")[4].split("?")[0],a=($(".AllNoSend").val(),$(".OtherNoSend").val(),$(this).val());if("AllNoSend"==a)if("GetOrderRoute"==t){var e=document.getElementById("top_text_from").action+"?ActualDelivery=yes&column=CargoPeriod&condition=AllNoSend";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"AllNoSend",column:"CargoPeriod",ActualDelivery:"yes"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="yes",e.column="CargoPeriod",e.condition="AllNoSend",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#hetonghuoqiSel").val(a)}});else if("OtherNoSend"==a)if("GetOrderRoute"==t){e=document.getElementById("top_text_from").action+"?ActualDelivery=yes&column=CargoPeriod&condition=OtherNoSend";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"OtherNoSend",column:"CargoPeriod",ActualDelivery:"yes"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="yes",e.column="CargoPeriod",e.condition="OtherNoSend",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#hetonghuoqiSel").val(a)}});else if("All"==a)if("GetOrderRoute"==t){e=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=CargoPeriod&condition=All";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"All",column:"CargoPeriod",ActualDelivery:"no"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="no",e.column="CargoPeriod",e.condition="All",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#hetonghuoqiSel").val(a)}})}),$("#shijihuoqiSel").on("change",function(){window.location.href.split("ActualDelivery=")[1].split("&")[0];var t=window.location.href.split("/")[4].split("?")[0],a=($(".AllNoSend").val(),$(".OtherNoSend").val(),$(this).val());if("AllNoSend"==a)if("GetOrderRoute"==t){var e=document.getElementById("top_text_from").action+"?ActualDelivery=yes&column=DateOfSign&condition=AllNoSend";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"AllNoSend",column:"DateOfSign",ActualDelivery:"yes"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="yes",e.column="DateOfSign",e.condition="AllNoSend",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#shijihuoqiSel").val(a)}});else if("OtherNoSend"==a)if("GetOrderRoute"==t){e=document.getElementById("top_text_from").action+"?ActualDelivery=yes&column=DateOfSign&condition=OtherNoSend";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"OtherNoSend",column:"DateOfSign",ActualDelivery:"yes"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="yes",e.column="DateOfSign",e.condition="OtherNoSend",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#shijihuoqiSel").val(a)}});else if("All"==a)if("GetOrderRoute"==t){e=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=DateOfSign&condition=All";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"All",column:"DateOfSign",ActualDelivery:"no"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="no",e.column="DateOfSign",e.condition="All",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#shijihuoqiSel").val(a)}})}),$("#yujihuoqiSel").on("change",function(){window.location.href.split("ActualDelivery=")[1].split("&")[0];var t=window.location.href.split("/")[4].split("?")[0],a=($(".AllNoSend").val(),$(".OtherNoSend").val(),$(this).val());if("AllNoSend"==a)if("GetOrderRoute"==t){var e=document.getElementById("top_text_from").action+"?ActualDelivery=yes&column=ExpectedDeliveryPeriod&condition=AllNoSend";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"AllNoSend",column:"ExpectedDeliveryPeriod",ActualDelivery:"yes"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="yes",e.column="ExpectedDeliveryPeriod",e.condition="AllNoSend",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#yujihuoqiSel").val(a)}});else if("OtherNoSend"==a)if("GetOrderRoute"==t){e=document.getElementById("top_text_from").action+"?ActualDelivery=yes&column=ExpectedDeliveryPeriod&condition=OtherNoSend";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"OtherNoSend",column:"ExpectedDeliveryPeriod",ActualDelivery:"yes"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="yes",e.column="ExpectedDeliveryPeriod",e.condition="OtherNoSend",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#yujihuoqiSel").val(a)}});else if("All"==a)if("GetOrderRoute"==t){e=document.getElementById("top_text_from").action+"?ActualDelivery=no&column=ExpectedDeliveryPeriod&condition=All";$("#top_text_from").attr("action",e),$("#top_text_from").submit()}else $.ajax({type:"get",url:"Transport",data:{condition:"All",column:"ExpectedDeliveryPeriod",ActualDelivery:"no"},success:function(t){var e=ecDo.getUrlPrmt(window.location.href);e.currentPage="1",e.ActualDelivery="no",e.column="ExpectedDeliveryPeriod",e.condition="All",eouluGlobal.S_settingURLParam(e,!1,!1,!1),$("#yujihuoqiSel").val(a)}})}),$(".writeEmail").click(function(){$(".MailBar").show(),$(".MailBar_cover_color").show()}),$(".MailBar_close").click(function(){$(".MailBar_cover_color").hide(),$(".MailBar").hide()});var EmailCont=$(".MailBar_content").val().replace(/\n|\r\n/g,"<br>");$("#Mail_Send").on("click",function(){console.log(ContractNo+"===="+ContractTitle);var t=$("#Mail_fileToUpload")[0].files;if(0==t.length)return $.MsgBox_Unload.Alert("提示","请选择文件！"),!1;var a=$(this),e=new FormData;e.enctype="multipart/form-data",e.append("ContractNo",ContractNo),e.append("ContractTitle",ContractTitle),e.append("Content",EmailCont),e.append("file",t[0]);globalUploadFiles(e,{type:"POST",accept:"text/html; charset=UTF-8",url:"SendToBusiness",dataType:"text"},null,function(t){console.log(typeof t),-1<t.indexOf("true")?($.MsgBox.Alert("提示","发送成功！"),$(".MailBar").hide(),$(".MailBar_cover_color").hide()):$.MsgBox_Unload.Alert("提示","发送失败！")},function(){$.MsgBox_Unload.Alert("提示","服务器繁忙！")},function(t){a.css("cursor","not-allowed").prop("disabled","disabled")},function(t,e){a.css("cursor","pointer").prop("disabled",!1)})}),$(function(){var t,e=ecDo.getUrlPrmt(window.location.href),a=e.column,o=e.condition;"CargoPeriod"==a?t=$("#hetonghuoqiSel"):"ExpectedDeliveryPeriod"==a?t=$("#yujihuoqiSel"):"DateOfSign"==a&&(t=$("#shijihuoqiSel")),t.val(o);var n=$(".transport_calc_data").data("idata");for(var d in n){var i;i=""==n[d]||"--"==n[d]||null==n[d]||null==n[d]?0:n[d],$(".transport_calc_table").find("."+d+"_td").text(i)}}),Array.prototype.unique=function(){for(var t=[],e={},a=0;a<this.length;a++)e[this[a]]||(t.push(this[a]),e[this[a]]=1);return t},$(".transport_calc_table [class$='_td']").on("click",function(t){t.stopPropagation();var e=$(this).attr("class").replace("_td","");$.cookie("transportCAT",e,{expires:360}),window.open("TransportDetail")});