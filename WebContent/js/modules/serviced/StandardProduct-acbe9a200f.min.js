!function(){$.Response_Load={Before:function(t,e,a){n(t,e),""===a||null==a?alertGroupOpen(".eoulu-response-load-bg",".eoulu-response-load",200):alertGroupOpen(".eoulu-response-load-bg",".eoulu-response-load",a),$(window).on("resize",function(){alertResponse(".eoulu-response-load",250,355)})},Loading:function(t){e(t)},After:function(t,e){a(t,e)}};var n=function(t,e){if(0==$(".eoulu-response-load").length){var a="";a+='<div class="eoulu-response-load-bg" style="display:none"></div><div class="eoulu-response-load" style="display:none"><div class="eoulu-response-load-tit">'+t+'</div><div class="eoulu-response-load-message"><img width="190" height="14"><p>'+e+"</p></div></div>",$("body").append(a),o()}else $(".eoulu-response-load-tit").text(t),$(".eoulu-response-load-message p").text(e)},o=function(){$(".eoulu-response-load-bg").css({width:"100%",height:"100%","z-index":"99998",position:"fixed",filter:"Alpha(opacity=60)","background-color":"rgba(10%,20%,30%,0.6)",top:"0",left:"0",opacity:"0.6"}),$(".eoulu-response-load").css({position:"fixed",width:"355px",height:"190px","z-index":"99999","background-color":"rgba(255,255,255,0.95)","border-radius":"10px","font-family":"microsoft yahei"}),alertResponse(".eoulu-response-load",250,355),$(".eoulu-response-load-tit").css({height:"30px","line-height":"30px","font-size":"16px",color:"#fff",padding:"2px 15px","background-color":"#707070","border-top-left-radius":"10px","border-top-right-radius":"10px"}),$(".eoulu-response-load-message img").attr("src","./image/response-loading.gif"),$(".eoulu-response-load-message img").css({margin:"30px auto"}),$(".eoulu-response-load-message").css({margin:"5px auto",width:"350px",height:"165px","font-size":"16px","text-align":"center"}),$(".eoulu-response-load-message p").css({height:"30px","line-height":"30px",width:"350px","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden","text-align":"center"})},e=function(t){0!=$(".eoulu-response-load").length&&$(".eoulu-response-load-message p").text(t)},a=function(t,e){0!=$(".eoulu-response-load").length&&($(".eoulu-response-load-message p").text(t),e?alertGroupDelayClose(".eoulu-response-load-bg",".eoulu-response-load",e):alertGroupDelayClose(".eoulu-response-load-bg",".eoulu-response-load",200))}}();var addSubmitObj=new Object;addSubmitObj.Operate=null,addSubmitObj.Model=null,addSubmitObj.Title=null,addSubmitObj.Type=null,addSubmitObj.Machine=null,addSubmitObj.ProductInstructions=null,addSubmitObj.InstallInstructions=null,addSubmitObj.TestInstructions=null,addSubmitObj.CheckingReport=null,addSubmitObj.DocumentIntegrity=null,addSubmitObj.UpdateTime=null;var updateSubmitObj=new Object;updateSubmitObj.Operate=null,updateSubmitObj.ID=null,updateSubmitObj.Model=null,updateSubmitObj.Title=null,updateSubmitObj.Type=null,updateSubmitObj.Machine=null,updateSubmitObj.ProductInstructions=null,updateSubmitObj.InstallInstructions=null,updateSubmitObj.TestInstructions=null,updateSubmitObj.CheckingReport=null,updateSubmitObj.DocumentIntegrity=null,updateSubmitObj.UpdateTime=null;var curFileupload,hasSearch=0;function pageStyle(t,e){1==e?($("#fistPage").attr("disabled","disabled"),$("#upPage").attr("disabled","disabled"),$("#nextPage").attr("disabled","disabled"),$("#lastPage").attr("disabled","disabled"),buttonDisabled("#fistPage, #upPage, #nextPage, #lastPage")):1==t?($("#fistPage").attr("disabled","disabled"),$("#upPage").attr("disabled","disabled"),$("#lastPage").attr("disabled",!1),$("#nextPage").attr("disabled",!1),buttonDisabled("#fistPage, #upPage"),buttonAbled("#nextPage, #lastPage")):t==e?($("#lastPage").attr("disabled","disabled"),$("#nextPage").attr("disabled","disabled"),$("#fistPage").attr("disabled",!1),$("#upPage").attr("disabled",!1),buttonDisabled("#nextPage, #lastPage"),buttonAbled("#fistPage, #upPage")):($("#lastPage, #nextPage, #fistPage, #upPage").attr("disabled",!1),buttonAbled("#lastPage, #nextPage, #fistPage, #upPage"))}function buttonDisabled(t){return $(t).removeClass("buttonDisabled buttonAbled").addClass("buttonDisabled")}function buttonAbled(t){return $(t).removeClass("buttonDisabled buttonAbled").addClass("buttonAbled")}function tableRender(t,e,a){for(var n="",o=1;o<a.length;o++){var l=a[o].DocumentIntegrity;""!=l&&"--"!=l||(l="否"),n+='<tr><td class="update_td" data-iid="'+a[o].ID+'">'+parseInt(10*(t-1)+o)+'</td><td class="hastd_Model" title="'+a[o].Model+'">'+a[o].Model+'</td><td class="hastd_Title" title="'+a[o].Title+'">'+a[o].Title+'</td><td class="hastd_Type" title="'+a[o].Type+'">'+a[o].Type+'</td><td class="hastd_Machine" title="'+a[o].Machine+'">'+a[o].Machine+'</td><td class="hastd_ProductInstructions" title="'+a[o].ProductInstructions+'">'+a[o].ProductInstructions+'</td><td class="hastd_InstallInstructions" title="'+a[o].InstallInstructions+'">'+a[o].InstallInstructions+'</td><td class="hastd_TestInstructions" title="'+a[o].TestInstructions+'">'+a[o].TestInstructions+'</td><td class="hastd_CheckingReport" title="'+a[o].CheckingReport+'">'+a[o].CheckingReport+'</td><td class="hastd_DocumentIntegrity" title="'+l+'"><input type="button" value="'+l+'"></td><td class="checkAll_td" title="'+a[o].Review+'"><input type="button" value="'+a[o].Review+'"></td><td class="hastd_UpdateTime" title="'+a[o].UpdateTime+'">'+a[o].UpdateTime+"</td></tr>"}$(".m_table table tbody").empty().append(n),$(".m_page #currentPage").text(t),$(".m_page #allPage").text(e)}function tableRenderAjax(n){$.ajax({type:"GET",url:"StandardProduct",data:{LoadType:"data",CurrentPage:n},dataType:"json",success:function(t){console.log(typeof t);var e=t.pageCount,a=t.data;tableRender(n,e,a),pageStyle(n,e)},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙！")},complete:function(t,e){}})}function searchTABRenderAjax(n,t,e,a,o,l){null==o&&null==l?$.ajax({type:"GET",url:"StandardProduct",data:{LoadType:"data",QueryType:t,Column1:e,Content1:a,CurrentPage:n},dataType:"json",success:function(t){console.log(typeof t);var e=t.pageCount,a=t.data;tableRender(n,e,a),pageStyle(n,e)},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙！")},complete:function(t,e){"success"==e&&(hasSearch=1)}}):$.ajax({type:"GET",url:"StandardProduct",data:{LoadType:"data",QueryType:t,Column1:e,Content1:a,Column2:o,Content2:l,CurrentPage:n},dataType:"json",success:function(t){console.log(typeof t);var e=t.pageCount,a=t.data;tableRender(n,e,a),pageStyle(n,e)},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙！")},complete:function(t,e){"success"==e&&(hasSearch=1)}})}function searchGetParam(t){var e=$(".m_button_r_top input[name='querytype']:checked").val(),a=$(".m_button_r_m .input-group-btn button").attr("title"),n=$(".m_button_r_m input").val().trim();if(null==e||""==e||null==e||"on"==e)return $.MsgBox_Unload.Alert("提示","请选择搜索类别"),!1;if("singleSelect"==e){if(null==a||""==a||null==a||"选择"==a)return $.MsgBox_Unload.Alert("提示","请选择搜索字段"),!1;if(""==n||null==n||null==n)return $.MsgBox_Unload.Alert("提示","搜索内容为空"),!1;searchTABRenderAjax(t,e,a,n)}else if("mixSelect"==e){var o,l,s,i,r=$(".m_button_r_l .input-group-btn button").attr("title"),d=$(".m_button_r_l input").val().trim();if(null!=a&&""!=a&&null!=a&&"选择"!=a||(o=1),null!=r&&""!=r&&null!=r&&"选择"!=r||(l=1),""!=n&&null!=n&&null!=n||(s=1),""!=d&&null!=d&&null!=d||(i=1),1==o||1==l)return $.MsgBox_Unload.Alert("提示","请选择搜索字段"),!1;if(1==s||1==i)return $.MsgBox_Unload.Alert("提示","搜索内容为空"),!1;searchTABRenderAjax(t,e,a,n,r,d)}}function sosuoInit(){$("input[name='querytype'][value='singleSelect']").prop("checked","checked"),$("input[name='querytype'][value='singleSelect']").parent().addClass("active").css("color","#333"),$("input[name='querytype'][value='mixSelect']").prop("checked",!1),$("input[name='querytype'][value='mixSelect']").parent().removeClass("active").css("color","#fff"),$(".m_button_r_l .input-group").fadeOut(100),$(".m_button_r_l .input-group-btn button").html("选择<span class='caret'></span>"),$(".m_button_r_l .input-group-btn button").attr("title",""),$(".m_button_r_l .input-group input").val(""),$(".m_button_r_m .input-group-btn button").html("选择<span class='caret'></span>"),$(".m_button_r_m .input-group-btn button").attr("title",""),$(".m_button_r_m .input-group input").val("")}function uploadFiles(){var t=new FormData;t.enctype="multipart/form-data",t.append("file",$("#serFinRepUpload")[0].files[0]),$.ajax({type:"POST",async:!0,accept:"text/html;charset=UTF-8",data:t,url:"UploadFile",processData:!1,contentType:!1,cache:!1,dataType:"text",xhr:function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&myXhr.upload.addEventListener("progress",function(t){var e=t.loaded,a=t.total,n=Math.floor(100*e/a)+"%";console.log("已经上传了："+n);var o=400*globalToPoint(n);console.log("进度条宽度："+o),$(".progressIn").css("width",o+"px"),$(".progressIn").text(n)},!1),myXhr},success:function(t){if(-1<t.indexOf("上传成功")){$("span.isUpload").text("上传成功！");var e,a=$("input.serFinRepUploadName").val();e=-1<curFileupload.indexOf("++")?curFileupload.split("++"):["",""],$("."+e[0]+" ."+e[1]).val(a),$("."+e[0]+" ."+e[1]).attr("title",a),$(".dropFileTit span").trigger("click")}else $("span.isUpload").text("上传失败！"),$(".progressIn").css("width","30px"),$(".progressIn").text("0%");$.MsgBox_Unload.Alert("提示",t)},error:function(){$("span.isUpload").text(""),$(".progressIn").css("width","30px"),$(".progressIn").text("0%"),$.MsgBox_Unload.Alert("上传提示","网络繁忙！上传失败！")}})}function IsStandardProductPreview(){$("span#StandardProduct_check").length&&"是"==$("span#StandardProduct_check").text()?$(".m_table").addClass("Privileged"):$(".m_table").removeClass("Privileged")}function getDataByPage(t){0==hasSearch?tableRenderAjax(t):1==hasSearch&&searchGetParam(t)}$(function(){sosuoInit(),tableRenderAjax(1),IsStandardProductPreview()}),$(".m_button_l input[value='添加']").on("click",function(){$(".add_NonStandard_body_in [class^='info_']").each(function(){$(this).val(""),($(this).is(".info_ProductInstructions")||$(this).is(".info_InstallInstructions")||$(this).is(".info_TestInstructions")||$(this).is(".info_CheckingReport"))&&$(this).attr("title","")}),$(".bg_cover").slideDown(350),$(".add_NonStandard").slideDown(350)}),$(document).on("click",".update_td",function(){updateSubmitObj.ID=Number($(this).data("iid")).toString();var n=$(this);$(".update_NonStandard_body_in [class^='info_']").each(function(){var t,e=$(this).attr("class").split(" ")[0].replace("info_","hastd_");t=$(this).is(".info_DocumentIntegrity")?n.siblings("."+e).attr("title"):n.siblings("."+e).text();var a=globalDataHandle(t,"");$(this).val(a),($(this).is(".info_ProductInstructions")||$(this).is(".info_InstallInstructions")||$(this).is(".info_TestInstructions")||$(this).is(".info_CheckingReport"))&&$(this).attr("title",a)}),$(".bg_cover").slideDown(350),$(".update_NonStandard").slideDown(350)}),$("#NonStandard_addclose, .add_NonStandard_tit_r").on("click",function(){for(var t in addSubmitObj)addSubmitObj[t]=null;$(".bg_cover").slideUp(350),$(".add_NonStandard").slideUp(350)}),$("#NonStandard_updateclose, .update_NonStandard_tit_r").on("click",function(){for(var t in updateSubmitObj)updateSubmitObj[t]=null;$(".bg_cover").slideUp(350),$(".update_NonStandard").slideUp(350)}),$("#jumpNumber").on("input propertychange",function(){var t=$(this).val().replace(/[^\d]/g,"");$(this).val(t)}),$("#fistPage").click(function(){getDataByPage(1)}),$("#lastPage").click(function(){getDataByPage(Number($("#allPage").text()))}),$("#upPage").click(function(){var t=Number($("#currentPage").text());1!=t&&getDataByPage(--t)}),$("#nextPage").click(function(){var t=Number($("#currentPage").text());t!=Number($("#allPage").text())&&getDataByPage(++t)}),$("#Gotojump").click(function(){var t=$("#jumpNumber").val().trim(),e=Number($("#allPage").text());t==Number($("#currentPage").text())||t<=0||e<t?$("#jumpNumber").val(""):getDataByPage(t)}),$("#NonStandard_addsubmit").on("click",function(){for(var t in addSubmitObj)addSubmitObj[t]="Operate"!=t?$(".add_NonStandard").find(".info_"+t).val():"add";for(var e in addSubmitObj)if(addSubmitObj[e]=globalDataHandle(addSubmitObj[e],"").trim(),"UpdateTime"==e&&""==addSubmitObj[e])return $.MsgBox_Unload.Alert("提示","未选择更新时间！"),!1;console.log("add我执行了吗"),console.log(addSubmitObj),$.ajax({type:"POST",url:"StandardProduct",dataType:"json",data:addSubmitObj,success:function(t){console.log(typeof t),1==t?($.MsgBox_Unload.Alert("提示","添加成功！"),$("#NonStandard_addclose").trigger("click")):0==t&&$.MsgBox_Unload.Alert("提示","添加失败！")},error:function(){$.MsgBox_Unload.Alert("提示","网络繁忙，刷新页面试下！")},complete:function(t,e){"success"==e&&(tableRenderAjax(1),hasSearch=0,sosuoInit())}})}),$("#NonStandard_updatesubmit").on("click",function(){for(var t in updateSubmitObj)"Operate"!=t?"ID"!=t&&(updateSubmitObj[t]=$(".update_NonStandard").find(".info_"+t).val()):updateSubmitObj[t]="update";for(var e in updateSubmitObj)if(updateSubmitObj[e]=globalDataHandle(updateSubmitObj[e],"").trim(),"UpdateTime"==e&&""==updateSubmitObj[e])return $.MsgBox_Unload.Alert("提示","未选择更新时间！"),!1;console.log("update我执行了吗"),console.log(updateSubmitObj),$.ajax({type:"POST",url:"StandardProduct",dataType:"json",data:updateSubmitObj,success:function(t){console.log(typeof t),1==t?($.MsgBox_Unload.Alert("提示","修改成功！"),$("#NonStandard_updateclose").trigger("click")):0==t&&$.MsgBox_Unload.Alert("提示","修改失败！")},error:function(){$.MsgBox_Unload.Alert("提示","网络繁忙，刷新页面试下！")},complete:function(t,e){"success"==e&&(tableRenderAjax(1),hasSearch=0,sosuoInit())}})}),$(".m_button_r_top label").on("click",function(){"singleSelect"==$(this).children().val()?($(this).css("color","#333"),$(this).siblings("label").css("color","#fff"),$(".m_button_r_l div.input-group").fadeOut(100)):($(this).css("color","#333"),$(this).siblings("label").css("color","#fff"),$(".m_button_r_l div.input-group").fadeIn(100))}),$(".m_button_r_l .dropdown-menu li").on("click",function(){var t=$(this).text(),e=$(this).attr("title");$(this).parent().siblings("button").text(e),$(this).parent().siblings("button").attr("title",t)}),$(".m_button_r_m .dropdown-menu li").on("click",function(){var t=$(this).text(),e=$(this).attr("title");$(this).parent().siblings("button").text(e),$(this).parent().siblings("button").attr("title",t)}),$("#NonStandard_cancel").on("click",function(){for(var t in hasSearch=0,sosuoInit(),tableRenderAjax(1),addSubmitObj)addSubmitObj[t]=null;for(var e in updateSubmitObj)updateSubmitObj[e]=null;$("#jumpNumber").val("")}),$("#NonStandard_search").on("click",function(){searchGetParam(1)}),$(".line_relative input[type='button']").on("click",function(){var t;$(this).parents(".add_NonStandard").length?t="add_NonStandard":$(this).parents(".update_NonStandard").length&&(t="update_NonStandard"),curFileupload=t+"++"+$(this).siblings("input[type='text']").attr("class"),$(".upload_bgcover").slideDown(300),$(".dropFileBox").slideDown(300)}),$("input.dropUp2").on("click",function(){var t=$("input.serFinRepUploadName").val(),e=$("#serFinRepUpload").val(),a=t.replace(/.*(\/|\\)/,""),n=e.replace(/.*(\/|\\)/,""),o=/[.]/.exec(a)?/[^.]+$/.exec(a.toLowerCase()):"",l=/[.]/.exec(n)?/[^.]+$/.exec(n.toLowerCase()):"";if(""==o||""==l)return $.MsgBox_Unload.Alert("上传提示","文件没有后缀名，请重新上传"),!1;t&&e?uploadFiles():$.MsgBox_Unload.Alert("上传提示","请检查是否选择或更换了文件")}),$("#serFinRepUpload").on("change",function(){$("span.isUpload").text(""),$(".progressIn").css("width","30px"),$(".progressIn").text("0%"),console.log("文件上传改变值"+$(this).val());var t=-1<$(this).val().indexOf("\\fakepath\\")?$(this).val().split("\\fakepath\\")[1]:$(this).val().split("\\").pop();console.log("赋给input的值"+t),$("input.serFinRepUploadName").val(t),$("input.serFinRepUploadName").attr("title",t)}),$(".dropFileTit span").on("click",function(){$(".upload_bgcover").slideUp(300),$(".dropFileBox").slideUp(300),$("span.isUpload").text(""),$(".progressIn").css("width","30px"),$(".progressIn").text("0%"),$("input.serFinRepUploadName").val(""),$("input.serFinRepUploadName").attr("title",""),$("#serFinRepUpload").val("")}),$(document).on("click",".hastd_ProductInstructions, .hastd_CheckingReport, .hastd_InstallInstructions, .hastd_TestInstructions",function(t){t.stopPropagation();var e=$(this).text().trim();if(""==e||"--"==e)return $.MsgBox_Unload.Alert("下载提示","无文件可下载"),!1;var a=window.location.href.split(globalProjectName)[0];window.open(a+"LogisticsFile/File/"+e),console.log("服务报告下载"+a+"LogisticsFile/File/"+e)}),$(document).on("mouseenter",".m_table tbody td",function(){$(this).parent().css({border:"2px solid red"})}),$(document).on("mouseleave",".m_table tbody td",function(){$(this).parent().css({border:"1px solid transparent"})}),$(document).on("click",".checkAll_td input",function(){var t=Number($(this).parent().siblings(".update_td").data("iid")).toString(),a=Number($("span#currentPage").text());$.ajax({type:"GET",url:"StandardProductOperate",data:{ID:t},dataType:"text",complete:function(t,e){"timeout"==e&&((window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp")).abort(),$.MsgBox_Unload.Alert("审核提示","连接超时！"));tableRenderAjax(a),sosuoInit()},success:function(t){"true"==t?$.MsgBox_Unload.Alert("审核提示","审核请求成功！"):"false"==t?$.MsgBox_Unload.Alert("审核提示","审核请求失败！"):$.MsgBox_Unload.Alert("审核提示",t)},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，请稍后重试！")}})}),$(document).on("click",".hastd_DocumentIntegrity input",function(){if("否"==$(this).val())$.MsgBox_Unload.Alert("文档完整性提示","文档完整性是：否，请先修改！");else if("是"==$(this).val()){var t=Number($(this).parent().siblings(".update_td").data("iid")).toString(),e=$(this).parent().siblings(".hastd_Title").text(),a=Number($("span#currentPage").text());$.ajax({type:"POST",url:"StandardProductOperate",data:{ID:t,Title:e},dataType:"text",beforeSend:function(t){$.Response_Load.Before("发送提示","正在发送邮件......",200)},complete:function(t,e){if("success"==e)$.Response_Load.After("发送成功！",550);else if("error"==e)$.Response_Load.After("发送失败！",550);else if("timeout"==e){(window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp")).abort(),$.Response_Load.After("连接超时！",550)}getDataByPage(a)},success:function(t){},error:function(){}})}});