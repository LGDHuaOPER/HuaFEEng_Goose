var schedule_provinceANDcity;if(function(ve,ye){function e(e){ve.extend(!0,p,e)}function o(t,r,e){function n(){setTimeout(function(){!M.start&&i()&&s()},0)}function a(){return t.is(":visible")}function i(){return ve("body").is(":visible")}function o(e){var t;M&&e==M.name||(t=e,Y++,M&&(_("viewDestroy",M,M,M.element),v(),M.triggerEventDestroy(),y(),M.element.remove(),S.deactivateButton(M.name)),S.activateButton(t),M=new X[t](ve("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(x),w),s(),b(),Y--)}function s(e){(!M.start||e||M.start>N||N>=M.end)&&a()&&l(e)}function l(e){var t;Y++,M.start&&(_("viewDestroy",M,M,M.element),v(),m()),y(),M.render(N,e||0),d(),b(),(M.afterRender||function(){})(),S.updateTitle(M.title),(t=new Date)>=M.start&&M.end>t?S.disableButton("today"):S.enableButton("today"),_("viewRender",M,M,M.element),M.trigger("viewDisplay",A),Y--,!r.lazyFetching||O(M.visStart,M.visEnd)?g():p()}function u(){a()&&(v(),m(),c(),d(),p())}function c(){k=r.contentHeight?r.contentHeight:r.height?r.height-(D?D.height():0)-Ae(x):Math.round(x.width()/Math.max(r.aspectRatio,.5))}function d(){k===ye&&c(),Y++,M.setHeight(k),M.setWidth(x.width()),Y--,C=t.outerWidth()}function f(){if(!Y)if(M.start){var e=++E;setTimeout(function(){e==E&&!Y&&a()&&C!=(C=t.outerWidth())&&(Y++,u(),M.trigger("windowResize",A),Y--)},200)}else n()}function h(e){m(),p(e)}function p(e){a()&&(M.setEventData(F),M.renderEvents(F,e),M.trigger("eventAfterAllRender"))}function m(){M.triggerEventDestroy(),M.clearEvents(),M.clearEventData()}function g(){$(M.visStart,M.visEnd)}function v(){M&&M.unselect()}function y(){x.css({width:"100%",height:x.height(),overflow:"hidden"})}function b(){x.css({width:"",height:"",overflow:""})}function _(e,t){return r[e]?r[e].apply(t||A,Array.prototype.slice.call(arguments,2)):ye}var w=this;w.options=r,w.render=function(e){x?a()&&(c(),l(e)):(r.theme?"ui":"fc",t.addClass("fc"),r.isRTL?t.addClass("fc-rtl"):t.addClass("fc-ltr"),r.theme&&t.addClass("ui-widget"),x=ve("<div class='fc-content' style='position:relative'/>").prependTo(t),S=new j(w,r),(D=S.render())&&t.prepend(D),o(r.defaultView),r.handleWindowResize&&ve(window).resize(f),i()||n())},w.destroy=function(){M&&(_("viewDestroy",M,M,M.element),M.triggerEventDestroy()),ve(window).unbind("resize",f),S.destroy(),x.remove(),t.removeClass("fc fc-rtl ui-widget")},w.refetchEvents=function(){m(),g()},w.reportEvents=function(e){F=e,p()},w.reportEventChange=function(e){h(e)},w.rerenderEvents=h,w.changeView=o,w.select=function(e,t,n){M.select(e,t,n===ye||n)},w.unselect=v,w.prev=function(){s(-1)},w.next=function(){s(1)},w.prevYear=function(){B(N,-1),s()},w.nextYear=function(){B(N,1),s()},w.today=function(){N=new Date,s()},w.gotoDate=function(e,t,n){e instanceof Date?N=Se(e):I(N,e,t,n),s()},w.incrementDate=function(e,t,n){e!==ye&&B(N,e),t!==ye&&H(N,t),n!==ye&&be(N,n),s()},w.formatDate=function(e,t){return P(e,t,r)},w.formatDates=function(e,t,n){return R(e,t,n,r)},w.getDate=function(){return Se(N)},w.getView=function(){return M},w.option=function(e,t){return t===ye?r[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(r[e]=t,u()),ye)},w.trigger=_,function(m,e){function r(n,a){!function e(t,n){var a,i,r=J.sourceFetchers;for(a=0;r.length>a;a++){if(!0===(i=r[a](t,y,b,n)))return;if("object"==typeof i)return e(i,n),ye}var o=t.events;if(o)ve.isFunction(o)?(g(),o(Se(y),Se(b),function(e){n(e),v()})):ve.isArray(o)?n(o):n();else{var s=t.url;if(s){var l,u=t.success,c=t.error,d=t.complete;l=ve.isFunction(t.data)?t.data():t.data;var f=ve.extend({},l||{}),h=G(t.startParam,m.startParam),p=G(t.endParam,m.endParam);h&&(f[h]=Math.round(+y/1e3)),p&&(f[p]=Math.round(+b/1e3)),g(),ve.ajax(ve.extend({},Q,t,{data:f,success:function(e){e=e||[];var t=z(u,this,arguments);ve.isArray(t)&&(e=t),n(e)},error:function(){z(c,this,arguments),n()},complete:function(){z(d,this,arguments),v()}}))}else n()}}(n,function(e){if(a==f){if(e){m.eventDataTransform&&(e=ve.map(e,m.eventDataTransform)),n.eventDataTransform&&(e=ve.map(e,n.eventDataTransform));for(var t=0;e.length>t;t++)e[t].source=n,s(e[t]);_=_.concat(e)}--h||u(_)}})}function t(e){return ve.isFunction(e)||ve.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e?(function(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=J.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}(e),d.push(e),e):ye}function g(){p++||o("loading",null,!0,l())}function v(){--p||o("loading",null,!1,l())}function s(e){var t=e.source||{},n=G(t.ignoreTimezone,m.ignoreTimezone);e._id=e._id||(e.id===ye?"_fc"+K++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=Se(e.start=L(e.start,n)),e.end=L(e.end,n),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?Se(e.end):null,e.allDay===ye&&(e.allDay=G(t.allDayDefault,m.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function n(e,t){return e&&t&&a(e)==a(t)}function a(e){return("object"==typeof e?e.events||e.url:"")||e}var i=this;i.isFetchNeeded=function(e,t){return!y||e<y||b<t},i.fetchEvents=function(e,t){y=e,b=t,_=[];var n=++f,a=d.length;h=a;for(var i=0;i<a;i++)r(d[i],n)},i.addEventSource=function(e){(e=t(e))&&(h++,r(e,f))},i.removeEventSource=function(t){d=ve.grep(d,function(e){return!n(e,t)}),_=ve.grep(_,function(e){return!n(e.source,t)}),u(_)},i.updateEvent=function(e){var t,n,a=_.length,i=l().defaultEventEnd,r=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;t<a;t++)(n=_[t])._id==e._id&&n!=e&&(n.start=new Date(+n.start+r),n.end=e.end?n.end?new Date(+n.end+o):new Date(+i(n)+o):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,s(n));s(e),u(_)},i.renderEvent=function(e,t){s(e),e.source||(t&&(c.events.push(e),e.source=c),_.push(e)),u(_)},i.removeEvents=function(e){if(e){if(!ve.isFunction(e)){var t=e+"";e=function(e){return e._id==t}}_=ve.grep(_,e,!0);for(var n=0;d.length>n;n++)ve.isArray(d[n].events)&&(d[n].events=ve.grep(d[n].events,e,!0))}else{_=[];for(var n=0;d.length>n;n++)ve.isArray(d[n].events)&&(d[n].events=[])}u(_)},i.clientEvents=function(t){return ve.isFunction(t)?ve.grep(_,t):t?(t+="",ve.grep(_,function(e){return e._id==t})):_},i.normalizeEvent=s;for(var y,b,o=i.trigger,l=i.getView,u=i.reportEvents,c={events:[]},d=[c],f=0,h=0,p=0,_=[],w=0;e.length>w;w++)t(e[w])}.call(w,r,e);var S,D,x,M,C,k,T,O=w.isFetchNeeded,$=w.fetchEvents,A=t[0],E=0,Y=0,N=new Date,F=[];I(N,r.year,r.month,r.date),r.droppable&&ve(document).bind("dragstart",function(e,t){var n=e.target,a=ve(n);if(!a.parents(".fc").length){var i=r.dropAccept;(ve.isFunction(i)?i.call(n,a):a.is(i))&&(T=n,M.dragStart(T,e,t))}}).bind("dragstop",function(e,t){T&&(M.dragStop(T,e,t),T=null)})}function j(l,u){function e(e){var s=ve("<td class='fc-header-"+e+"'/>"),t=u.header[e];return t&&ve.each(t.split(" "),function(e){var o;0<e&&s.append("<span class='fc-header-space'/>"),ve.each(this.split(","),function(e,t){var n;if("title"==t)s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(c+"-corner-right"),o=null;else if(l[t]?n=l[t]:X[t]&&(n=function(){r.removeClass(c+"-state-hover"),l.changeView(t)}),n){var a=u.theme?O(u.buttonIcons,t):null,i=O(u.buttonText,t),r=ve("<span class='fc-button fc-button-"+t+" "+c+"-state-default'>"+(a?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+a+"'/></span>":i)+"</span>").click(function(){r.hasClass(c+"-state-disabled")||n()}).mousedown(function(){r.not("."+c+"-state-active").not("."+c+"-state-disabled").addClass(c+"-state-down")}).mouseup(function(){r.removeClass(c+"-state-down")}).hover(function(){r.not("."+c+"-state-active").not("."+c+"-state-disabled").addClass(c+"-state-hover")},function(){r.removeClass(c+"-state-hover").removeClass(c+"-state-down")}).appendTo(s);Ne(r),o||r.addClass(c+"-corner-left"),o=r}}),o&&o.addClass(c+"-corner-right")}),s}var t=this;t.render=function(){return c=u.theme?"ui":"fc",u.header?n=ve("<table class='fc-header' style='width:100%'/>").append(ve("<tr/>").append(e("left")).append(e("center")).append(e("right"))):ye},t.destroy=function(){n.remove()},t.updateTitle=function(e){n.find("h2").html(e)},t.activateButton=function(e){n.find("span.fc-button-"+e).addClass(c+"-state-active")},t.deactivateButton=function(e){n.find("span.fc-button-"+e).removeClass(c+"-state-active")},t.disableButton=function(e){n.find("span.fc-button-"+e).addClass(c+"-state-disabled")},t.enableButton=function(e){n.find("span.fc-button-"+e).removeClass(c+"-state-disabled")};var c,n=ve([])}function B(e,t,n){return e.setFullYear(e.getFullYear()+t),n||we(e),e}function H(e,t,n){if(+e){var a=e.getMonth()+t,i=Se(e);for(i.setDate(1),i.setMonth(a),e.setMonth(a),n||we(e);e.getMonth()!=i.getMonth();)e.setDate(e.getDate()+(e<i?1:-1))}return e}function be(e,t,n){if(+e){var a=e.getDate()+t,i=Se(e);i.setHours(9),i.setDate(a),e.setDate(a),n||we(e),s(e,i)}return e}function s(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(e<t?1:-1)*f)}function _e(e,t){return e.setMinutes(e.getMinutes()+t),e}function we(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function Se(e,t){return t?we(new Date(+e)):new Date(+e)}function De(){for(var e,t=0;(e=new Date(1970,t++,1)).getHours(););return e}function xe(e,t){return Math.round((Se(e,!0)-Se(t,!0))/i)}function I(e,t,n,a){t!==ye&&t!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(t)),n!==ye&&n!=e.getMonth()&&(e.setDate(1),e.setMonth(n)),a!==ye&&e.setDate(a)}function L(e,t){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(t===ye&&(t=!0),U(e,t)||(e?new Date(e):null)):null}function U(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var a=new Date(n[1],0,1);if(t||!n[13]){var i=new Date(n[1],0,1,9,0);n[3]&&(a.setMonth(n[3]-1),i.setMonth(n[3]-1)),n[5]&&(a.setDate(n[5]),i.setDate(n[5])),s(a,i),n[7]&&a.setHours(n[7]),n[8]&&a.setMinutes(n[8]),n[10]&&a.setSeconds(n[10]),n[12]&&a.setMilliseconds(1e3*Number("0."+n[12])),s(a,i)}else if(a.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),a.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var r=60*Number(n[16])+(n[18]?Number(n[18]):0);r*="-"==n[15]?1:-1,a=new Date(+a+6e4*r)}return a}function Me(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function P(e,t,n){return R(e,null,t,n)}function R(e,t,n,a){a=a||p;var i,r,o,s,l=e,u=t,c=n.length,d="";for(i=0;i<c;i++)if("'"==(r=n.charAt(i))){for(o=i+1;o<c;o++)if("'"==n.charAt(o)){l&&(d+=o==i+1?"'":n.substring(i+1,o),i=o);break}}else if("("==r){for(o=i+1;o<c;o++)if(")"==n.charAt(o)){var f=P(l,n.substring(i+1,o),a);parseInt(f.replace(/\D/,""),10)&&(d+=f),i=o;break}}else if("["==r){for(o=i+1;o<c;o++)if("]"==n.charAt(o)){var h=n.substring(i+1,o);(f=P(l,h,a))!=P(u,h,a)&&(d+=f),i=o;break}}else if("{"==r)l=t,u=e;else if("}"==r)l=e,u=t;else{for(o=c;i<o;o--)if(s=m[n.substring(i,o)]){l&&(d+=s(l,a)),i=o-1;break}o==i&&l&&(d+=r)}return d}function Ce(e){return e.end?(t=e.end,n=e.allDay,t=Se(t),n||t.getHours()||t.getMinutes()?be(t,1):we(t)):be(Se(e.start),1);var t,n}function ke(e,r,o){e.unbind("mouseover").mouseover(function(e){for(var t,n,a,i=e.target;i!=this;)i=(t=i).parentNode;(n=t._fci)!==ye&&(t._fci=ye,a=r[n],o(a.event,a.element,a),ve(e.target).trigger(e)),e.stopPropagation()})}function Te(e,t,n){for(var a,i=0;e.length>i;i++)(a=ve(e[i])).width(Math.max(0,t-$e(a,n)))}function Oe(e,t,n){for(var a,i=0;e.length>i;i++)(a=ve(e[i])).height(Math.max(0,t-Ae(a,n)))}function $e(e,t){return i=e,(parseFloat(ve.css(i[0],"paddingLeft",!0))||0)+(parseFloat(ve.css(i[0],"paddingRight",!0))||0)+(a=e,(parseFloat(ve.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(ve.css(a[0],"borderRightWidth",!0))||0))+(t?(n=e,(parseFloat(ve.css(n[0],"marginLeft",!0))||0)+(parseFloat(ve.css(n[0],"marginRight",!0))||0)):0);var n,a,i}function Ae(e,t){return i=e,(parseFloat(ve.css(i[0],"paddingTop",!0))||0)+(parseFloat(ve.css(i[0],"paddingBottom",!0))||0)+(a=e,(parseFloat(ve.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(ve.css(a[0],"borderBottomWidth",!0))||0))+(t?(n=e,(parseFloat(ve.css(n[0],"marginTop",!0))||0)+(parseFloat(ve.css(n[0],"marginBottom",!0))||0)):0);var n,a,i}function Ee(e,t){return e-t}function W(e){return Math.max.apply(Math,e)}function t(e){return(e<10?"0":"")+e}function O(e,t){if(e[t]!==ye)return e[t];for(var n,a=t.split(/(?=[A-Z])/),i=a.length-1;0<=i;i--)if((n=e[a[i].toLowerCase()])!==ye)return n;return e[""]}function Ye(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ne(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Fe(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function je(e,t){var n=e.source||{},a=e.color,i=n.color,r=t("eventColor"),o=e.backgroundColor||a||n.backgroundColor||i||t("eventBackgroundColor")||r,s=e.borderColor||a||n.borderColor||i||t("eventBorderColor")||r,l=e.textColor||n.textColor||t("eventTextColor"),u=[];return o&&u.push("background-color:"+o),s&&u.push("border-color:"+s),l&&u.push("color:"+l),u.join(";")}function z(e,t,n){if(ve.isFunction(e)&&(e=[e]),e){var a,i;for(a=0;e.length>a;a++)i=e[a].apply(t,n)||i;return i}}function G(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==ye)return arguments[e]}function n(r,e,t){function o(e){e.click(n).mousedown(B)}function n(e){if(!Y("selectable")){var t=U(ve(this).data("date"));N("dayClick",this,t,!0,e)}}function a(e,t,n){n&&x.build();for(var a=L(e,t),i=0;a.length>i;i++){var r=a[i];o(s(r.row,r.leftCol,r.row,r.rightCol))}}function s(e,t,n,a){var i=x.rect(e,t,n,a,r);return F(i,r)}var d=this;d.renderBasic=function(e,t,n){var a;w=e,S=t,D=n,T=Y("theme")?"ui":"fc",O=Y("columnFormat"),$=Y("weekNumbers"),A=Y("weekNumberTitle"),E="iso"!=Y("weekNumberCalculation")?"w":"W",c||(v=ve("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(r)),a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var e,t,n=T+"-widget-header",a="";for(a+="<thead><tr>",$&&(a+="<th class='fc-week-number "+n+"'>"+Ye(A)+"</th>"),e=0;e<S;e++)t=H(0,e),a+="<th class='fc-day-header fc-"+Ge[t.getDay()]+" "+n+"'>"+Ye(P(t,O))+"</th>";return a+="</tr></thead>"}()+function(){var e,t,n,a,i,r,o,s,l,u=T+"-widget-content",c="";for(c+="<tbody>",e=0;e<w;e++){for(c+="<tr class='fc-week'>",$&&(n=H(e,0),c+="<td class='fc-week-number "+u+"'><div>"+Ye(P(n,E))+"</div></td>"),t=0;t<S;t++)n=H(e,t),c+=(a=n,l=s=void 0,i=T+"-widget-content",r=d.start.getMonth(),o=we(new Date),s="",l=["fc-day","fc-"+Ge[a.getDay()],i],a.getMonth()!=r&&l.push("fc-other-month"),+a==+o?l.push("fc-today",T+"-state-highlight"):a<o?l.push("fc-past"):l.push("fc-future"),s+="<td class='"+l.join(" ")+"' data-date='"+P(a,"yyyy-MM-dd")+"'><div>",D&&(s+="<div class='fc-day-number'>"+a.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>");c+="</tr>"}return c+="</tbody>"}()+"</table>",i&&i.remove(),i=ve(a).appendTo(r),l=i.find("thead"),u=l.find(".fc-day-header"),c=i.find("tbody"),f=c.find("tr"),h=c.find(".fc-day"),p=f.find("td:first-child"),m=f.eq(0).find(".fc-day > div"),g=f.eq(0).find(".fc-day-content > div"),Fe(l.add(l.find("tr"))),Fe(f),f.eq(0).addClass("fc-first"),f.filter(":last").addClass("fc-last"),h.each(function(e,t){var n=H(Math.floor(e/S),e%S);N("dayRender",d,n,ve(t))}),o(h)},d.setHeight=function(e){var n,a,i,t=e-l.height();"variable"==Y("weekMode")?n=a=Math.floor(t/(1==w?2:6)):(n=Math.floor(t/w),a=t-n*(w-1)),p.each(function(e,t){e<w&&(i=ve(t)).find("> div").css("min-height",(e==w-1?a:n)-Ae(i))})},d.setWidth=function(e){y=e,C.clear(),k.clear(),_=0,$&&(_=l.find("th.fc-week-number").outerWidth()),b=Math.floor((y-_)/S),Te(u.slice(0,-1),b)},d.renderDayOverlay=a,d.defaultSelectionEnd=function(e){return Se(e)},d.renderSelection=function(e,t){a(e,be(Se(t),1),!0)},d.clearSelection=function(){j()},d.reportDayClick=function(e,t,n){var a=I(e),i=h[a.row*S+a.col];N("dayClick",i,e,t,n)},d.dragStart=function(e,t){M.start(function(e){j(),e&&s(e.row,e.col,e.row,e.col)},t)},d.dragStop=function(e,t,n){var a=M.stop();if(j(),a){var i=H(a);N("drop",e,i,!0,t,n)}},d.defaultEventEnd=function(e){return Se(e.start)},d.getHoverListener=function(){return M},d.colLeft=function(e){return C.left(e)},d.colRight=function(e){return C.right(e)},d.colContentLeft=function(e){return k.left(e)},d.colContentRight=function(e){return k.right(e)},d.getIsCellAllDay=function(){return!0},d.allDayRow=function(e){return f.eq(e)},d.getRowCnt=function(){return w},d.getColCnt=function(){return S},d.getColWidth=function(){return b},d.getDaySegmentContainer=function(){return v},Ie.call(d,r,e,t),Ue.call(d),Pe.call(d),function(){var n=this;n.renderEvents=function(e,t){n.renderDayEvents(e,t)},n.clearEvents=function(){n.getDaySegmentContainer().empty()},Le.call(n)}.call(d);var i,l,u,c,f,h,p,m,g,v,y,b,_,w,S,D,x,M,C,k,T,O,$,A,E,Y=d.opt,N=d.trigger,F=d.renderOverlay,j=d.clearOverlays,B=d.daySelectionMousedown,H=d.cellToDate,I=d.dateToCell,L=d.rangeToSegments,P=e.formatDate;Ne(r.addClass("fc-grid")),x=new Re(function(n,a){var i,r,o;u.each(function(e,t){i=ve(t),r=i.offset().left,e&&(o[1]=r),o=[r],a[e]=o}),o[1]=r+i.outerWidth(),f.each(function(e,t){e<w&&(i=ve(t),r=i.offset().top,e&&(o[1]=r),o=[r],n[e]=o)}),o[1]=r+i.outerHeight()}),M=new We(x),C=new ze(function(e){return m.eq(e)}),k=new ze(function(e){return g.eq(e)})}function a(l,e,t){function u(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var e,t,n,a=J+"-widget-header",i="";for(i+="<thead><tr>",te?(e=fe(0,0),t=me(e,ae),X?t+=ne:t=ne+t,i+="<th class='fc-agenda-axis fc-week-number "+a+"'>"+Ye(t)+"</th>"):i+="<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n=0;n<W;n++)e=fe(0,n),i+="<th class='fc-"+Ge[e.getDay()]+" fc-col"+n+" "+a+"'>"+Ye(me(e,ee))+"</th>";return i+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th></tr></thead>"}()+function(){var e,t,n,a,i,r=J+"-widget-header",o=J+"-widget-content",s=we(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n="",t=0;t<W;t++)e=fe(0,t),i=["fc-col"+t,"fc-"+Ge[e.getDay()],o],+e==+s?i.push(J+"-state-highlight","fc-today"):e<s?i.push("fc-past"):i.push("fc-future"),a="<td class='"+i.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",n+=a;return l+=n,l+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}()+"</table>";y&&y.remove(),y=ve(e).appendTo(l),b=y.find("thead"),_=b.find("th").slice(1,-1),w=y.find("tbody"),S=w.find("td").slice(0,-1),D=S.find("> div"),x=S.find(".fc-day-content > div"),M=S.eq(0),C=D.eq(0),Fe(b.add(b.find("tr"))),Fe(w.add(w.find("tr")))}function c(e){e.click(n).mousedown(ce)}function d(e){e.click(n).mousedown(i)}function n(e){if(!ie("selectable")){var t=Math.min(W-1,Math.floor((e.pageX-y.offset().left-B)/H)),n=fe(0,t),a=this.parentNode.className.match(/fc-slot(\d+)/);if(a){var i=parseInt(a[1])*ie("slotMinutes"),r=Math.floor(i/60);n.setHours(r),n.setMinutes(i%60+Q),re("dayClick",S[t],n,!1,e)}else re("dayClick",S[t],n,!0,e)}}function a(e,t,n){n&&G.build();for(var a=pe(e,t),i=0;a.length>i;i++){var r=a[i];c(o(r.row,r.leftCol,r.row,r.rightCol))}}function o(e,t,n,a){var i=G.rect(e,t,n,a,k);return oe(i,k)}function f(e,t){for(var n=0;n<W;n++){var a=fe(0,n),i=be(Se(a),1),r=new Date(Math.max(a,e)),o=new Date(Math.min(i,t));if(r<o){var s=G.rect(0,n,0,n,E),l=h(a,r),u=h(a,o);s.top=l,s.height=u-l,d(oe(s,E))}}}function r(e){return ie("allDaySlot")&&!e.row}function s(e){var t=fe(0,e.col),n=e.row;return ie("allDaySlot")&&n--,0<=n&&_e(t,Q+n*P),t}function h(e,t){if(_e(Se(e=Se(e,!0)),Q)>t)return 0;if(t>=_e(Se(e),K))return N.height();var n=ie("slotMinutes"),a=60*t.getHours()+t.getMinutes()-Q,i=Math.floor(a/n),r=ge[i];return r===ye&&(r=ge[i]=N.find("tr").eq(i).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+L*(a%n/n)))}function p(e,t){var n=ie("selectHelper");if(G.build(),n){var a=he(e).col;if(0<=a&&a<W){var i=G.rect(0,a,0,a,E),r=h(e,e),o=h(e,t);if(r<o){if(i.top=r,i.height=o-r,i.left+=2,i.width-=5,ve.isFunction(n)){var s=n(e,t);s&&(i.position="absolute",F=ve(s).css(i).appendTo(E))}else i.isStart=!0,i.isEnd=!0,(F=ve(de({title:"",start:e,end:t,className:["fc-select-helper"],editable:!1},i))).css("opacity",ie("dragOpacity"));F&&(d(F),E.append(F),Te(F,i.width,!0),Oe(F,i.height,!0))}}}else f(e,t)}function m(){se(),F&&(F.remove(),F=null)}function i(e){var i;1==e.which&&ie("selectable")&&(ue(e),q.start(function(e,t){if(m(),e&&e.col==t.col&&!r(e)){var n=s(t),a=s(e);p((i=[n,_e(Se(n),P),a,_e(Se(a),P)].sort(Ee))[0],i[3])}else i=null},e),ve(document).one("mouseup",function(e){q.stop(),i&&(+i[0]==+i[1]&&g(i[0],!1,e),le(i[0],i[3],!1,e))}))}function g(e,t,n){re("dayClick",S[he(e).col],e,t,n)}var v=this;v.renderAgenda=function(e){W=e,J=ie("theme")?"ui":"fc",X=ie("isRTL"),Q=Me(ie("minTime")),K=Me(ie("maxTime")),ee=ie("columnFormat"),te=ie("weekNumbers"),ne=ie("weekNumberTitle"),ae="iso"!=ie("weekNumberCalculation")?"w":"W",P=ie("snapMinutes")||ie("slotMinutes"),y?u():function(){var e,t,n,a,i,r=J+"-widget-header",o=J+"-widget-content",s=0==ie("slotMinutes")%15;for(u(),k=ve("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(l),ie("allDaySlot")?(T=ve("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(k),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+r+" fc-agenda-axis'>"+ie("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+r+" fc-agenda-gutter'>&nbsp;</th></tr></table>",O=ve(e).appendTo(k),c(($=O.find("tr")).find("td")),k.append("<div class='fc-agenda-divider "+r+"'><div class='fc-agenda-divider-inner'/></div>")):T=ve([]),A=ve("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(k),E=ve("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(A),Y=ve("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(E),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",t=De(),a=_e(Se(t),K),_e(t,Q),n=z=0;t<a;n++)i=t.getMinutes(),e+="<tr class='fc-slot"+n+" "+(i?"fc-minor":"")+"'><th class='fc-agenda-axis "+r+"'>"+(s&&i?"&nbsp;":me(t,ie("axisFormat")))+"</th><td class='"+o+"'><div style='position:relative'>&nbsp;</div></td></tr>",_e(t,ie("slotMinutes")),z++;d((N=ve(e+="</tbody></table>").appendTo(E)).find("td"))}()},v.setWidth=function(e){e,V.clear(),Z.clear();var t=b.find("th:first");O&&(t=t.add(O.find("th:first"))),t=t.add(N.find("th:first")),B=0,Te(t.width("").each(function(e,t){B=Math.max(B,ve(t).outerWidth())}),B);var n=y.find(".fc-agenda-gutter");O&&(n=n.add(O.find("th.fc-agenda-gutter")));var a=A[0].clientWidth;(I=A.width()-a)?(Te(n,I),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),H=Math.floor((a-B)/W),Te(_.slice(0,-1),H)},v.setHeight=function(e){e===ye&&(e=j),j=e,ge={};var t=w.position().top,n=A.position().top,a=Math.min(e-t,N.height()+n+1);C.height(a-Ae(M)),k.css("top",t),A.height(a-n-1),L=N.find("tr:first").height()+1,U=ie("slotMinutes")/P,R=L/U},v.afterRender=function(){!function(){function e(){A.scrollTop(a)}var t=De(),n=Se(t);n.setHours(ie("firstHour"));var a=h(t,n)+1;e(),setTimeout(e,0)}()},v.defaultEventEnd=function(e){var t=Se(e.start);return e.allDay?t:_e(t,ie("defaultEventMinutes"))},v.timePosition=h,v.getIsCellAllDay=r,v.allDayRow=function(){return $},v.getCoordinateGrid=function(){return G},v.getHoverListener=function(){return q},v.colLeft=function(e){return V.left(e)},v.colRight=function(e){return V.right(e)},v.colContentLeft=function(e){return Z.left(e)},v.colContentRight=function(e){return Z.right(e)},v.getDaySegmentContainer=function(){return T},v.getSlotSegmentContainer=function(){return Y},v.getMinMinute=function(){return Q},v.getMaxMinute=function(){return K},v.getSlotContainer=function(){return E},v.getRowCnt=function(){return 1},v.getColCnt=function(){return W},v.getColWidth=function(){return H},v.getSnapHeight=function(){return R},v.getSnapMinutes=function(){return P},v.defaultSelectionEnd=function(e,t){return t?Se(e):_e(Se(e),ie("slotMinutes"))},v.renderDayOverlay=a,v.renderSelection=function(e,t,n){n?ie("allDaySlot")&&a(e,be(Se(t),1),!0):p(e,t)},v.clearSelection=m,v.reportDayClick=g,v.dragStart=function(e,t){q.start(function(e){if(se(),e)if(r(e))o(e.row,e.col,e.row,e.col);else{var t=s(e);f(t,_e(Se(t),ie("defaultEventMinutes")))}},t)},v.dragStop=function(e,t,n){var a=q.stop();se(),a&&re("drop",e,s(a),r(a),t,n)},Ie.call(v,l,e,t),Ue.call(v),Pe.call(v),function(){function d(e,t,n,a){var i,r,o,s,l,u,c,d,f=[],h=e.length;for(i=0;i<h;i++)r=e[i],o=r.start,s=t[i],n<s&&o<a&&(o<n?(l=Se(n),c=!1):(l=o,c=!0),a<s?(u=Se(a),d=!1):(u=s,d=!0),f.push({event:r,start:l,end:u,isStart:c,isEnd:d}));return f.sort(He)}function f(e){return e.end?Se(e.end):_e(Se(e.start),M("defaultEventMinutes"))}function S(e,t){var n="<",a=e.url,i=je(e,M),r=["fc-event","fc-event-vert"];return h(e)&&r.push("fc-event-draggable"),t.isStart&&r.push("fc-event-start"),t.isEnd&&r.push("fc-event-end"),r=r.concat(e.className),e.source&&(r=r.concat(e.source.className||[])),n+=a?"a href='"+Ye(e.url)+"'":"div",n+=" class='"+r.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Ye(W(e.start,e.end,M("timeFormat")))+"</div><div class='fc-event-title'>"+Ye(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&p(e)&&(n+="<div class='ui-resizable-handle ui-resizable-js'>=</div>"),n+="</"+(a?"a":"div")+">"}function D(e,t,n){var a,i,r,o,s,l,u,c=t.find("div.fc-event-time");h(e)&&function(a,o,i){function s(){var e,t,n;U(),c&&(f?(i.hide(),o.draggable("option","grid",null),P(be(Se(a.start),g),be(Ce(a),g))):(e=v,n=_e(Se(a.start),e),a.end&&(t=_e(Se(a.end),e)),i.text(W(n,t,M("timeFormat"))),i.css("display",""),o.draggable("option","grid",[w,S])))}var l,u,c,d,f,h,p,m,g,v,y,b=x.getCoordinateGrid(),_=Y(),w=N(),S=F(),D=j();o.draggable({scroll:!1,grid:[w,S],axis:1==_&&"y",opacity:M("dragOpacity"),revertDuration:M("dragRevertDuration"),start:function(e,t){C("eventDragStart",o,a,e,t),I(a,o),b.build(),l=o.position(),u=b.cell(e.pageX,e.pageY),c=d=!0,f=h=O(u),p=m=0,v=y=g=0},drag:function(e,t){var n=b.cell(e.pageX,e.pageY);if(c=!!n){if(f=O(n),(p=Math.round((t.position.left-l.left)/w))!=m){var a=E(0,u.col),i=u.col+p;i=Math.max(0,i),i=Math.min(_-1,i);var r=E(0,i);g=xe(r,a)}f||(v=Math.round((t.position.top-l.top)/S)*D)}(c!=d||f!=h||p!=m||v!=y)&&(s(),d=c,h=f,m=p,y=v),o.draggable("option","revert",!c)},stop:function(e,t){U(),C("eventDragStop",o,a,e,t),c&&(f||g||v)?L(this,a,g,f?0:v,f,e,t):(f=!(c=!0),v=g=p=0,s(),o.css("filter",""),o.css(l),H(a,o))}})}(e,t,c),n.isEnd&&p(e)&&(a=e,i=t,r=c,l=F(),u=j(),i.resizable({handles:{s:".ui-resizable-handle"},grid:l,start:function(e,t){o=s=0,I(a,i),C("eventResizeStart",this,a,e,t)},resize:function(e,t){(o=Math.round((Math.max(l,i.height())-t.originalSize.height)/l))!=s&&(r.text(W(a.start,o||a.end?_e(m(a),u*o):null,M("timeFormat"))),s=o)},stop:function(e,t){C("eventResizeStop",this,a,e,t),o?_(this,a,0,u*o,e,t):H(a,i)}})),g(e,t)}var x=this;x.renderEvents=function(e,t){var n,a=e.length,i=[],r=[];for(n=0;n<a;n++)e[n].allDay?i.push(e[n]):r.push(e[n]);M("allDaySlot")&&(s(i,t),o()),function(e,t){var n,a,i,r,o,s,l,u,c,d,f,h,p,m,g,v,y=e.length,b="",_=k(),w=M("isRTL");for(n=0;n<y;n++)a=e[n],i=a.event,r=T(a.start,a.start),o=T(a.start,a.end),s=$(a.col),l=A(a.col),c=(u=(l-=.025*(u=l-s))-s)*(a.forwardCoord-a.backwardCoord),M("slotEventOverlap")&&(c=Math.max(2*(c-10),c)),w?(f=l-a.backwardCoord*u,d=f-c):(d=s+a.backwardCoord*u,f=d+c),d=Math.max(d,s),f=Math.min(f,l),c=f-d,a.top=r,a.left=d,a.outerWidth=c,a.outerHeight=o-r,b+=S(i,a);for(_[0].innerHTML=b,h=_.children(),n=0;n<y;n++)a=e[n],i=a.event,p=ve(h[n]),!1===(m=C("eventRender",i,i,p))?p.remove():(m&&!0!==m&&(p.remove(),p=ve(m).css({position:"absolute",top:a.top,left:a.left}).appendTo(_)),a.element=p,i._id===t?D(i,p,a):p[0]._fci=n,B(i,p));for(ke(_,e,D),n=0;n<y;n++)a=e[n],(p=a.element)&&(a.vsides=Ae(p,!0),a.hsides=$e(p,!0),(g=p.find(".fc-event-title")).length&&(a.contentTop=g[0].offsetTop));for(n=0;n<y;n++)a=e[n],(p=a.element)&&(p[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",v=Math.max(0,a.outerHeight-a.vsides),p[0].style.height=v+"px",i=a.event,a.contentTop!==ye&&v-a.contentTop<10&&(p.find("div.fc-event-time").text(R(i.start,M("timeFormat"))+" - "+i.title),p.find("div.fc-event-title").remove()),C("eventAfterRender",i,i,p))}(function(e){var t,n,a,i,r,o=Y(),s=y(),l=v(),u=ve.map(e,f),c=[];for(n=0;n<o;n++)for(_e(t=E(0,n),s),r=Be(r=d(e,u,t,_e(Se(t),l-s))),a=0;r.length>a;a++)(i=r[a]).col=n,c.push(i);return c}(r),t)},x.clearEvents=function(){e().empty(),k().empty()},x.slotSegHtml=S,Le.call(x);var M=x.opt,C=x.trigger,h=x.isEventDraggable,p=x.isEventResizable,m=x.eventEnd,g=x.eventElementHandlers,o=x.setHeight,e=x.getDaySegmentContainer,k=x.getSlotSegmentContainer,t=x.getHoverListener,v=x.getMaxMinute,y=x.getMinMinute,T=x.timePosition,O=x.getIsCellAllDay,$=x.colContentLeft,A=x.colContentRight,E=x.cellToDate,Y=x.getColCnt,N=x.getColWidth,F=x.getSnapHeight,j=x.getSnapMinutes,b=x.getSlotContainer,B=x.reportEventElement,H=x.showEvents,I=x.hideEvents,L=x.eventDrop,_=x.eventResize,P=x.renderDayOverlay,U=x.clearOverlays,s=x.renderDayEvents,n=x.calendar,R=n.formatDate,W=n.formatDates;x.draggableDayEvent=function(i,r,e){function o(){c||(r.width(n).height("").draggable("option","grid",null),c=!0)}var n,s,l,u=e.isStart,c=!0,a=t(),d=N(),f=F(),h=j(),p=y();r.draggable({opacity:M("dragOpacity","month"),revertDuration:M("dragRevertDuration"),start:function(e,t){C("eventDragStart",r,i,e,t),I(i,r),n=r.width(),a.start(function(e,t){if(U(),e){s=!1;var n=E(0,t.col),a=E(0,e.col);l=xe(a,n),e.row?u?c&&(r.width(d-10),Oe(r,f*Math.round((i.end?(i.end-i.start)/qe:M("defaultEventMinutes"))/h)),r.draggable("option","grid",[d,1]),c=!1):s=!0:(P(be(Se(i.start),l),be(Ce(i),l)),o()),s=s||c&&!l}else o(),s=!0;r.draggable("option","revert",s)},e,"drag")},stop:function(e,t){if(a.stop(),U(),C("eventDragStop",r,i,e,t),s)o(),r.css("filter",""),H(i,r);else{var n=0;c||(n=Math.round((r.offset().top-b().offset().top)/f)*h+p-(60*i.start.getHours()+i.start.getMinutes())),L(this,i,l,n,c,e,t)}}})}}.call(v);var y,b,_,w,S,D,x,M,C,k,T,O,$,A,E,Y,N,F,j,B,H,I,L,P,U,R,W,z,G,q,V,Z,J,X,Q,K,ee,te,ne,ae,ie=v.opt,re=v.trigger,oe=v.renderOverlay,se=v.clearOverlays,le=v.reportSelection,ue=v.unselect,ce=v.daySelectionMousedown,de=v.slotSegHtml,fe=v.cellToDate,he=v.dateToCell,pe=v.rangeToSegments,me=e.formatDate,ge={};Ne(l.addClass("fc-agenda")),G=new Re(function(e,n){function t(e){return Math.max(s,Math.min(l,e))}var a,i,r;_.each(function(e,t){a=ve(t),i=a.offset().left,e&&(r[1]=i),r=[i],n[e]=r}),r[1]=i+a.outerWidth(),ie("allDaySlot")&&(i=(a=$).offset().top,e[0]=[i,i+a.outerHeight()]);for(var o=E.offset().top,s=A.offset().top,l=s+A.outerHeight(),u=0;u<z*U;u++)e.push([t(o+R*u),t(o+R*(u+1))])}),q=new We(G),V=new ze(function(e){return D.eq(e)}),Z=new ze(function(e){return x.eq(e)})}function Be(e){var t,n=function(e){var t,n,a,i=[];for(t=0;e.length>t;t++){for(n=e[t],a=0;i.length>a&&u(n,i[a]).length;a++);(i[a]||(i[a]=[])).push(n)}return i}(e),a=n[0];if(function(e){var t,n,a,i,r;for(t=0;e.length>t;t++)for(n=e[t],a=0;n.length>a;a++)for((i=n[a]).forwardSegs=[],r=t+1;e.length>r;r++)u(i,e[r],i.forwardSegs)}(n),a){for(t=0;a.length>t;t++)r(a[t]);for(t=0;a.length>t;t++)l(a[t],0,0)}return function(e){var t,n,a,i=[];for(t=0;e.length>t;t++)for(n=e[t],a=0;n.length>a;a++)i.push(n[a]);return i}(n)}function r(e){var t,n,a=e.forwardSegs,i=0;if(e.forwardPressure===ye){for(t=0;a.length>t;t++)r(n=a[t]),i=Math.max(i,1+n.forwardPressure);e.forwardPressure=i}}function l(e,t,n){var a,i=e.forwardSegs;if(e.forwardCoord===ye)for(i.length?(i.sort(c),l(i[0],t+1,n),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),a=0;i.length>a;a++)l(i[a],0,e.forwardCoord)}function u(e,t,n){n=n||[];for(var a=0;t.length>a;a++)i=e,r=t[a],i.end>r.start&&i.start<r.end&&n.push(t[a]);var i,r;return n}function c(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||He(e,t)}function He(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function Ie(e,n,a){function i(e,t){var n=v[e];return ve.isPlainObject(n)?O(n,t||a):n}function u(e,t){return n.trigger.apply(n,[e,t||D].concat(Array.prototype.slice.call(arguments,2),[D]))}function o(e){return e.end?Se(e.end):d(e)}function r(e,t,n){var a,i=m[e._id],r=i.length;for(a=0;a<r;a++)t&&i[a][0]==t[0]||i[a][n]()}function c(e,t,n,a){n=n||0;for(var i,r=e.length,o=0;o<r;o++)i=e[o],a!==ye&&(i.allDay=a),_e(be(i.start,t,!0),n),i.end&&(i.end=_e(be(i.end,t,!0),n)),f(i,v)}function s(e,t,n){n=n||0;for(var a,i=e.length,r=0;r<i;r++)(a=e[r]).end=_e(be(o(a),t,!0),n),f(a,v)}function t(e,t){var n=D.getColCnt(),a=T?-1:1,i=T?n-1:0;return"object"==typeof e&&(t=e.col,e=e.row),e*n+(t*a+i)}function b(e){var t=D.visStart.getDay();return e+=C[t],7*Math.floor(e/y)+k[(e%y+y)%y]-t}function l(e){var t=Se(D.visStart);return be(t,e),t}function _(e){return xe(e,D.visStart)}function w(e){var t=D.visStart.getDay();return e+=t,Math.floor(e/7)*y+C[(e%7+7)%7]-C[t]}function S(e){var t=D.getColCnt(),n=T?-1:1,a=T?t-1:0;return{row:Math.floor(e/t),col:(e%t+t)%t*n+a}}var D=this;D.element=e,D.calendar=n,D.name=a,D.opt=i,D.trigger=u,D.isEventDraggable=function(e){var t=e.source||{};return G(e.startEditable,t.startEditable,i("eventStartEditable"),e.editable,t.editable,i("editable"))&&!i("disableDragging")},D.isEventResizable=function(e){var t=e.source||{};return G(e.durationEditable,t.durationEditable,i("eventDurationEditable"),e.editable,t.editable,i("editable"))&&!i("disableResizing")},D.setEventData=function(e){p={};var t,n,a=e.length;for(t=0;t<a;t++)n=e[t],p[n._id]?p[n._id].push(n):p[n._id]=[n]},D.clearEventData=function(){p={},m={},g=[]},D.eventEnd=o,D.reportEventElement=function(e,t){g.push({event:e,element:t}),m[e._id]?m[e._id].push(t):m[e._id]=[t]},D.triggerEventDestroy=function(){ve.each(g,function(e,t){D.trigger("eventDestroy",t.event,t.event,t.element)})},D.eventElementHandlers=function(t,n){n.click(function(e){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?ye:u("eventClick",this,t,e)}).hover(function(e){u("eventMouseover",this,t,e)},function(e){u("eventMouseout",this,t,e)})},D.showEvents=function(e,t){r(e,t,"show")},D.hideEvents=function(e,t){r(e,t,"hide")},D.eventDrop=function(e,t,n,a,i,r,o){var s=t.allDay,l=t._id;c(p[l],n,a,i),u("eventDrop",e,t,n,a,i,function(){c(p[l],-n,-a,s),h(l)},r,o),h(l)},D.eventResize=function(e,t,n,a,i,r){var o=t._id;s(p[o],n,a),u("eventResize",e,t,n,a,function(){s(p[o],-n,-a),h(o)},i,r),h(o)};var d=D.defaultEventEnd,f=n.normalizeEvent,h=n.reportEventChange,p={},m={},g=[],v=n.options;D.isHiddenDay=function(e){return"object"==typeof e&&(e=e.getDay()),M[e]},D.skipHiddenDays=function(e,t,n){for(t=t||1;M[(e.getDay()+(n?t:0)+7)%7];)be(e,t)},D.getCellsPerWeek=function(){return y},D.dateToCell=function(e){return S(w(_(e)))},D.dateToDayOffset=_,D.dayOffsetToCellOffset=w,D.cellOffsetToCell=S,D.cellToDate=function(){return l(b(t.apply(null,arguments)))},D.cellToCellOffset=t,D.cellOffsetToDayOffset=b,D.dayOffsetToDate=l,D.rangeToSegments=function(e,t){for(var n=D.getRowCnt(),a=D.getColCnt(),i=[],r=_(e),o=_(t),s=w(r),l=w(o)-1,u=0;u<n;u++){var c=u*a,d=c+a-1,f=Math.max(s,c),h=Math.min(l,d);if(f<=h){var p=S(f),m=S(h),g=[p.col,m.col].sort(),v=b(f)==r,y=b(h)+1==o;i.push({row:u,leftCol:g[0],rightCol:g[1],isStart:v,isEnd:y})}}return i};var y,x=i("hiddenDays")||[],M=[],C=[],k=[],T=i("isRTL");!function(){!1===i("weekends")&&x.push(0,6);for(var e=0,t=0;e<7;e++)C[e]=t,M[e]=-1!=ve.inArray(e,x),M[e]||(k[t]=e,t++);if(!(y=t))throw"invalid hiddenDays"}()}function Le(){function y(e,t,n){var a,i,r=k(),o=t?ve("<div/>"):r,s=function(e){for(var t=[],n=0;e.length>n;n++){var a=l(e[n]);t.push.apply(t,a)}return t}(e);return function(e){for(var t=c("isRTL"),n=0;e.length>n;n++){var a=e[n],i=(t?a.isEnd:a.isStart)?v:m,r=(t?a.isStart:a.isEnd)?C:g,o=i(a.leftCol),s=r(a.rightCol);a.left=o,a.outerWidth=s-o}}(s),a=function(e){for(var t="",n=0;e.length>n;n++)t+=u(e[n]);return t}(s),o[0].innerHTML=a,i=o.children(),t&&r.append(i),function(e,t){for(var n=0;e.length>n;n++){var a=e[n],i=a.event,r=t.eq(n),o=b("eventRender",i,i,r);!1===o?r.remove():(o&&!0!==o&&(o=ve(o).css({position:"absolute",left:a.left}),r.replaceWith(o),r=o),a.element=r)}}(s,i),V(s,function(e,t){e.hsides=$e(t,!0)}),V(s,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),V(s,function(e,t){e.outerHeight=t.outerHeight(!0)}),function(e,t){var n=function(e){for(var t=x(),n=M(),a=[],i=function(e){var t,n,a,i=x(),r=[];for(t=0;e.length>t;t++)n=e[t],a=n.row,n.element&&(r[a]?r[a].push(n):r[a]=[n]);for(a=0;a<i;a++)r[a]=d(r[a]||[]);return r}(e),r=0;r<t;r++){for(var o=i[r],s=[],l=0;l<n;l++)s.push(0);for(var u=0;o.length>u;u++){var c=o[u];c.top=W(s.slice(c.leftCol,c.rightCol+1));for(var l=c.leftCol;c.rightCol>=l;l++)s[l]=c.top+c.outerHeight}a.push(W(s))}return a}(e),a=function(){var e,t=x(),n=[];for(e=0;e<t;e++)n[e]=p(e).find("div.fc-day-content > div");return n}(),i=[];if(t)for(var r=0;a.length>r;r++)a[r].height(n[r]);for(var r=0;a.length>r;r++)i.push(a[r].position().top);V(e,function(e,t){t.css("top",i[e.row]+e.top)})}(s,n),s}function l(e){for(var t=e.start,n=Ce(e),a=Y(t,n),i=0;a.length>i;i++)a[i].event=e;return a}function u(e){var t="",n=c("isRTL"),a=e.event,i=a.url,r=["fc-event","fc-event-hori"];s(a)&&r.push("fc-event-draggable"),e.isStart&&r.push("fc-event-start"),e.isEnd&&r.push("fc-event-end"),r=r.concat(a.className),a.source&&(r=r.concat(a.source.className||[]));var o=je(a,c);return t+=i?"<a href='"+Ye(i)+"'":"<div",t+=" class='"+r.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+o+"'><div class='fc-event-inner'>",!a.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+Ye(T(a.start,a.end,c("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+Ye(a.title||"")+"</span></div>",e.isEnd&&f(a)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+"</"+(i?"a":"div")+">"}function d(e){for(var t=[],n=function(e){e.sort(Z);for(var t=[],n=0;e.length>n;n++){for(var a=e[n],i=0;t.length>i&&q(a,t[i]);i++);t[i]?t[i].push(a):t[i]=[a]}return t}(e),a=0;n.length>a;a++)t.push.apply(t,n[a]);return t}function o(e,t,n){s(e)&&a.draggableDayEvent(e,t,n),n.isEnd&&f(e)&&a.resizableDayEvent(e,t,n),i(e,t)}var a=this;a.renderDayEvents=function(e,t){var n,i,a,r=y(e,!1,!0);V(r,function(e,t){h(e.event,t)}),n=r,i=t,a=k(),V(n,function(e,t,n){var a=e.event;a._id===i?o(a,t,e):t[0]._fci=n}),ke(a,n,o),V(r,function(e,t){b("eventAfterRender",e.event,e.event,t)})},a.draggableDayEvent=function(o,s){var l,n=E();s.draggable({delay:50,opacity:c("dragOpacity"),revertDuration:c("dragRevertDuration"),start:function(e,t){b("eventDragStart",s,o,e,t),S(o,s),n.start(function(e,t,n,a){if(s.draggable("option","revert",!e||!n&&!a),$(),e){var i=N(t),r=N(e);l=xe(r,i),O(be(Se(o.start),l),be(Ce(o),l))}else l=0},e,"drag")},stop:function(e,t){n.stop(),$(),b("eventDragStop",s,o,e,t),l?r(this,o,l,0,o.allDay,e,t):(s.css("filter",""),w(o,s))}})},a.resizableDayEvent=function(m,n,g){var v=c("isRTL")?"w":"e",e=n.find(".ui-resizable-"+v),a=!1;Ne(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){a&&(e.preventDefault(),e.stopImmediatePropagation())}),e.mousedown(function(e){if(1==e.which){a=!0;var t=E();x(),M();var c,d,f=n.css("top"),h=ve.extend({},m),p=H(B(m.start));A(),ve("body").css("cursor",v+"-resize").one("mouseup",function(e){b("eventResizeStop",this,m,e),ve("body").css("cursor",""),t.stop(),$(),c&&D(this,m,c,0,e),setTimeout(function(){a=!1},0)}),b("eventResizeStart",this,m,e),t.start(function(e,t){if(e){var n=F(t),a=F(e);if(a=Math.max(a,p),c=j(a)-j(n)){h.end=be(_(m),c,!0);var i=d;r=h,o=g.row,s=f,l=y([r],!0,!1),u=[],V(l,function(e,t){e.row===o&&t.css("top",s),u.push(t[0])}),(d=ve(d=u)).find("*").css("cursor",v+"-resize"),i&&i.remove(),S(m)}else d&&(w(m),d.remove(),d=null);$(),O(m.start,be(Ce(m),c))}var r,o,s,l,u},e)}})};var c=a.opt,b=a.trigger,s=a.isEventDraggable,f=a.isEventResizable,_=a.eventEnd,h=a.reportEventElement,i=a.eventElementHandlers,w=a.showEvents,S=a.hideEvents,r=a.eventDrop,D=a.eventResize,x=a.getRowCnt,M=a.getColCnt;a.getColWidth;var p=a.allDayRow,m=a.colLeft,g=a.colRight,v=a.colContentLeft,C=a.colContentRight;a.dateToCell;var k=a.getDaySegmentContainer,T=a.calendar.formatDates,O=a.renderDayOverlay,$=a.clearOverlays,A=a.clearSelection,E=a.getHoverListener,Y=a.rangeToSegments,N=a.cellToDate,F=a.cellToCellOffset,j=a.cellOffsetToDayOffset,B=a.dateToDayOffset,H=a.dayOffsetToCellOffset}function q(e,t){for(var n=0;t.length>n;n++){var a=t[n];if(a.leftCol<=e.rightCol&&a.rightCol>=e.leftCol)return!0}return!1}function V(e,t){for(var n=0;e.length>n;n++){var a=e[n],i=a.element;i&&t(a,i,n)}}function Z(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function Pe(){function o(e){r&&(r=!1,d(),i("unselect",null,e))}function s(e,t,n,a){r=!0,i("select",null,e,t,n,a)}var l=this;l.select=function(e,t,n){o(),t||(t=a(e,n)),c(e,t,n),s(e,t,n)},l.unselect=o,l.reportSelection=s,l.daySelectionMousedown=function(e){var n,a=l.cellToDate,i=l.getIsCellAllDay,t=l.getHoverListener(),r=l.reportDayClick;1==e.which&&u("selectable")&&(o(e),t.start(function(e,t){d(),e&&i(e)?(n=[a(t),a(e)].sort(Ee),c(n[0],n[1],!0)):n=null},e),ve(document).one("mouseup",function(e){t.stop(),n&&(+n[0]==+n[1]&&r(n[0],!0,e),s(n[0],n[1],!0,e))}))};var u=l.opt,i=l.trigger,a=l.defaultSelectionEnd,c=l.renderSelection,d=l.clearSelection,r=!1;u("selectable")&&u("unselectAuto")&&ve(document).mousedown(function(e){var t=u("unselectCancel");t&&ve(e.target).parents(t).length||o(e)})}function Ue(){this.renderOverlay=function(e,t){var n=i.shift();return n||(n=ve("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=t[0]&&n.appendTo(t),a.push(n.css(e).show()),n},this.clearOverlays=function(){for(var e;e=a.shift();)i.push(e.hide().unbind())};var a=[],i=[]}function Re(e){var s,l;this.build=function(){e(s=[],l=[])},this.cell=function(e,t){var n,a=s.length,i=l.length,r=-1,o=-1;for(n=0;n<a;n++)if(t>=s[n][0]&&s[n][1]>t){r=n;break}for(n=0;n<i;n++)if(e>=l[n][0]&&l[n][1]>e){o=n;break}return 0<=r&&0<=o?{row:r,col:o}:null},this.rect=function(e,t,n,a,i){var r=i.offset();return{top:s[e][0]-r.top,left:l[t][0]-r.left,width:l[a][1]-l[t][0],height:s[n][1]-s[e][0]}}}function We(a){function i(e){var t;(t=e).pageX===ye&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY);var n=a.cell(e.pageX,e.pageY);(!n!=!l||n&&(n.row!=l.row||n.col!=l.col))&&(n?(s||(s=n),o(n,s,n.row-s.row,n.col-s.col)):o(n,s),l=n)}var r,o,s,l;this.start=function(e,t,n){o=e,s=l=null,a.build(),i(t),r=n||"mousemove",ve(document).bind(r,i)},this.stop=function(){return ve(document).unbind(r,i),l}}function ze(t){function n(e){return i[e]=i[e]||t(e)}var a=this,i={},r={},o={};a.left=function(e){return r[e]=r[e]===ye?n(e).position().left:r[e]},a.right=function(e){return o[e]=o[e]===ye?a.left(e)+n(e).width():o[e]},a.clear=function(){i={},r={},o={}}}var p={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十月","十二月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["日","一","二","三","四","五","六"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"今天",month:"月",week:"周",day:"天"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},d={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},J=ve.fullCalendar={version:"1.6.4"},X=J.views={};ve.fn.fullCalendar=function(i){if("string"==typeof i){var n,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=ve.data(this,"fullCalendar");if(e&&ve.isFunction(e[i])){var t=e[i].apply(e,a);n===ye&&(n=t),"destroy"==i&&ve.removeData(this,"fullCalendar")}}),n!==ye?n:this}var r=(i=i||{}).eventSources||[];return delete i.eventSources,i.events&&(r.push(i.events),delete i.events),i=ve.extend(!0,{},p,i.isRTL||i.isRTL===ye&&p.isRTL?d:{},i),this.each(function(e,t){var n=ve(t),a=new o(n,i,r);n.data("fullCalendar",a),a.render()}),this},J.sourceNormalizers=[];var Q={dataType:"json",cache:!(J.sourceFetchers=[])},K=1;J.addDays=be,J.cloneDate=Se,J.parseDate=L,J.parseISO8601=U,J.parseTime=Me,J.formatDate=P,J.formatDates=R;var Ge=["日","一","二","三","四","五","六"],i=864e5,f=36e5,qe=6e4,m={s:function(e){return e.getSeconds()},ss:function(e){return t(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return t(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return t(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return t(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return t(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return t(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"上午":"下午"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"上午":"下午"},u:function(e){return P(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return 10<t&&t<20?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return(n=new Date(e.getTime())).setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1;var t,n}};J.dateFormatters=m,J.applyAll=z,X.month=function(e,t){var u=this;u.render=function(e,t){t&&(H(e,t),e.setDate(1));var n=c("firstDay"),a=Se(e,!0);a.setDate(1);var i=H(Se(a),1),r=Se(a);be(r,-(r.getDay()-n+7)%7),f(r);var o=Se(i);be(o,(7-o.getDay()+n)%7),f(o,-1,!0);var s=h(),l=Math.round(xe(o,r)/7);"fixed"==c("weekMode")&&(be(o,7*(6-l)),l=6),u.title=p(a,c("titleFormat")),u.start=a,u.end=i,u.visStart=r,u.visEnd=o,d(l,s,!0)},n.call(u,e,t,"month");var c=u.opt,d=u.renderBasic,f=u.skipHiddenDays,h=u.getCellsPerWeek,p=t.formatDate},X.basicWeek=function(e,t){var s=this;s.render=function(e,t){t&&be(e,7*t);var n=be(Se(e),-(e.getDay()-l("firstDay")+7)%7),a=be(Se(n),7),i=Se(n);c(i);var r=Se(a);c(r,-1,!0);var o=d();s.start=n,s.end=a,s.visStart=i,s.visEnd=r,s.title=f(i,be(Se(r),-1),l("titleFormat")),u(1,o,!1)},n.call(s,e,t,"basicWeek");var l=s.opt,u=s.renderBasic,c=s.skipHiddenDays,d=s.getCellsPerWeek,f=t.formatDates},X.basicDay=function(e,t){var i=this;i.render=function(e,t){t&&be(e,t),s(e,t<0?-1:1);var n=Se(e,!0),a=be(Se(n),1);i.title=l(e,r("titleFormat")),i.start=i.visStart=n,i.end=i.visEnd=a,o(1,1,!1)},n.call(i,e,t,"basicDay");var r=i.opt,o=i.renderBasic,s=i.skipHiddenDays,l=t.formatDate},e({weekMode:"fixed"}),X.agendaWeek=function(e,t){var s=this;s.render=function(e,t){t&&be(e,7*t);var n=be(Se(e),-(e.getDay()-l("firstDay")+7)%7),a=be(Se(n),7),i=Se(n);c(i);var r=Se(a);c(r,-1,!0);var o=d();s.title=f(i,be(Se(r),-1),l("titleFormat")),s.start=n,s.end=a,s.visStart=i,s.visEnd=r,u(o)},a.call(s,e,t,"agendaWeek");var l=s.opt,u=s.renderAgenda,c=s.skipHiddenDays,d=s.getCellsPerWeek,f=t.formatDates},X.agendaDay=function(e,t){var i=this;i.render=function(e,t){t&&be(e,t),s(e,t<0?-1:1);var n=Se(e,!0),a=be(Se(n),1);i.title=l(e,r("titleFormat")),i.start=i.visStart=n,i.end=i.visEnd=a,o(1)},a.call(i,e,t,"agendaDay");var r=i.opt,o=i.renderAgenda,s=i.skipHiddenDays,l=t.formatDate},e({allDaySlot:!0,allDayText:"全天",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(e){var t;t=function(){var x,M=function(){return C.moment().startOf("day").yearDay()},C=function(t,e){if("function"==typeof document.addEventListener||k.isIE8()){var n=!1;try{n=t instanceof Element}catch(e){n=!!t&&1===n.nodeType}n||"string"==typeof t||(e=t);var a,i,r,o,s,l,u,c,d=this,f=d.classes,h=d.settings=k.merge(d.defaults,{attachTo:t},e||{}),p=d.container=k.make("div",{class:f.container}),m=d.calendars=[],g=x().day(h.weekStart),v=[],y=[],b=0,_=h.months;for(k.isIE8()&&k.addClassName(p,"ie8"),b=7;b--;)v.push(g.format(h.columnHeaderFormat)),g.add(1,"days");if(T(d),"object"==typeof h.subscribe)for(b in h.subscribe)h.subscribe.hasOwnProperty(b)&&d.subscribe(b,h.subscribe[b]);a=h.viewStartDate?x(h.viewStartDate,h.format):x(),d.viewStartDate=a.date(1),d._sel=[],h.selected&&(d.setSelected(h.selected,!1),d.viewStartDate=x(d._sel[0]));var w={past:h.months-1,"today-past":h.months-1,any:2<h.months?Math.floor(h.months/2):0,"today-future":0,future:0}[this.settings.direction];if(w&&x().month()==x(d.viewStartDate).month()&&(d.viewStartDate=x(d.viewStartDate).subtract({M:w}).date(1)),d.defaultView=x(d.viewStartDate),"function"==typeof h.blackout)d.blackout=h.blackout;else if(h.blackout){var S=D(h.blackout,h.parseSplitDelimiter,h.format);d.blackout=function(e){if((e=x(e).startOf("day").yearDay())<1||!d._sel)return!1;for(var t=S.length;t--;)if(S[t].startOf("day").yearDay()===e)return!0;return!1}}else d.blackout=function(){return!1};for(d.direction=d.directions[h.direction]?d.directions[h.direction]:d.directions.any,_=Math.max(h.months,1);_--;){for((i=k.make("div",{class:f.calendar},p)).setAttribute("data-cal-index",_),1<h.months&&(_==Math.max(h.months-1,1)?k.addClassName(i,f.monthFirst):0===_?k.addClassName(i,f.monthLast):k.addClassName(i,f.monthMiddle)),r=k.make("div",{class:f.title},i),h.useYearNav||k.addClassName(r,f.disableYearNav),k.make("a",{class:f.previousYear},r),k.make("a",{class:f.previousMonth},r),k.make("a",{class:f.nextYear},r),k.make("a",{class:f.nextMonth},r),o=k.make("span",{class:f.caption},r),s=k.make("div",{class:f.header+" "+(1==h.dayHeaderClickable?f.dayActive:"")},i),b=0;c=k.make("span",{"data-day":b},s),1==h.dayHeaderClickable&&"multiple"==h.mode&&(c.addEventListener("mouseover",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),0<daysToHover.length)for(var n=0;n<daysToHover.length;n++)k.hasClassName(daysToHover[n],f.dayActive)&&k.addClassName(daysToHover[n],"k-day-hover-active")}),c.addEventListener("mouseleave",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),0<daysToHover.length)for(var n=0;n<daysToHover.length;n++)k.hasClassName(daysToHover[n],f.dayActive)&&k.removeClassName(daysToHover[n],"k-day-hover-active")})),c.innerHTML=v[b],++b<7;);for(l=k.make("div",{class:f.days},i),b=0,y=[];"week"==h.mode?(b%7==0&&(u=k.make("div",{class:f.week+" clearfix"},l),y.push(u)),k.make("span",{},u)):y.push(k.make("span",{},l)),++b<42;);m.push({header:s,caption:o,days:y}),_&&k.make("div",{class:f.monthSeparator},p)}d.draw(),k.addEvent(p,"mousedown",function(e,t){var n;if(k.hasClassName(t,f.nextMonth))return d.disableNext||!1===d.publish("view-changed",d,["next-month"])||(d.viewStartDate.add(1,"months"),d.draw()),!1;if(k.hasClassName(t,f.previousMonth))return d.disablePreviousMonth||!1===d.publish("view-changed",d,["previous-month"])||(d.viewStartDate.subtract(1,"months"),d.draw()),!1;if(k.hasClassName(t,f.nextYear))return d.disableNext||!1===d.publish("view-changed",d,["next-year"])||(d.viewStartDate.add(1,"years"),d.draw()),!1;if(k.hasClassName(t,f.previousYear))return d.disablePreviousMonth||!1===d.publish("view-changed",d,["previous-year"])||(d.viewStartDate.subtract(1,"years"),d.draw()),!1;if((k.hasClassName(t.parentNode,f.days)||k.hasClassName(t.parentNode,f.week))&&k.hasClassName(t,f.dayActive)&&(n=t.getAttribute("data-date"))){if(n=x(n,h.dayAttributeFormat).hours(12),!1!==d.publish("date-clicked",d,[n]))switch(h.mode){case"multiple":d.addSelected(n)||d.removeSelected(n);break;case"range":d.addSelected(n);break;case"week":d.weekSelected(n);break;case"single":default:d.addSelected(n)}return!1}if(k.hasClassName(t.parentNode,f.week)&&(n=t.getAttribute("data-date")))return n=x(n,h.dayAttributeFormat).hours(12),!1!==d.publish("date-clicked",d,[n])&&"week"==h.mode&&d.weekSelected(n),!1;if(k.hasClassName(t.parentNode,f.header)){if("multiple"==h.mode&&1==h.dayHeaderClickable){var a=k.hasClassName(t,f.daySelected),i=t.parentNode.parentNode.getAttribute("data-datestart"),r=t.getAttribute("data-day");1==a?d.monthDaySelected(i,r,!0):d.monthDaySelected(i,r,!1)}return!1}return!1}),(h.attachTo=k.$(h.attachTo))&&h.attachTo.appendChild(p)}};C.prototype={defaults:{attachTo:null,months:1,weekStart:0,disableDate:!1,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,dayHeaderClickable:!1,format:null,subscribe:null,columnHeaderFormat:"dd",titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:!0,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",week:"k-week",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayInRangeStart:"k-range-start",dayInRangeEnd:"k-range-end",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(e){return x(e).startOf("day").yearDay()>=M()},"today-past":function(e){return x(e).startOf("day").yearDay()>M()},any:function(e){return!1},"today-future":function(e){return x(e).startOf("day").yearDay()<M()},future:function(e){return x(e).startOf("day").yearDay()<=M()}},getSelectedAsDates:function(){for(var e=[],t=0,n=this._sel.length;t<n;t++)e.push(this._sel[t].toDate());return e},getSelectedAsText:function(e){for(var t=[],n=0,a=this._sel.length;n<a;n++)t.push(this._sel[n].format(e||this.settings.format||"YYYY-MM-DD"));return t},getSelectedRaw:function(){for(var e=[],t=0,n=this._sel.length;t<n;t++)e.push(x(this._sel[t]));return e},getSelected:function(e){var t=this.getSelectedAsText(e);switch(this.settings.mode){case"week":case"range":return t.splice(2),t.join(this.settings.rangeDelimiter);case"multiple":return t.join(this.settings.multipleDelimiter);case"single":default:return t[0]||null}},isSelected:function(e){if((e=x(e).startOf("day").yearDay())<1||!this._sel||this._sel.length<1)return!1;switch(this.settings.mode){case"week":case"range":var t=this._sel[0]?this._sel[0].startOf("day").yearDay():0,n=this._sel[1]?this._sel[1].startOf("day").yearDay():0;return t===e||n===e?1:t&&n?(t<e&&e<n||t<n&&e<t&&n<e)&&-1:0;case"multiple":for(var a=this._sel.length;a--;)if(this._sel[a].startOf("day").yearDay()===e)return!0;return!1;case"single":default:return this._sel[0]&&this._sel[0].startOf("day").yearDay()===e}return!1},setSelected:function(e,t){var n,a=D(e,this.settings.parseSplitDelimiter,this.settings.format),i=D(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);for(n=i.length;n--;)this.removeSelected(i[n],!1);for(n=a.length;n--;)this.addSelected(a[n],!1);!1!==t&&(a[0]&&(this.viewStartDate=x(a[0],this.settings.format)),this.draw())},addSelected:function(e,t){switch(e=x(e,this.settings.format).hours(12),this.settings.dayOutOfMonthClickable&&"range"!==this.settings.mode&&this.makeSelectedDateVisible(e),this.settings.mode){case"multiple":if(this.isSelected(e))return!1;this._sel.push(e);break;case"range":1!==this._sel.length?this._sel=[e]:e.startOf("day").yearDay()>this._sel[0].startOf("day").yearDay()?this._sel[1]=e:this._sel=[e,this._sel[0]];break;case"single":default:this._sel=[e]}return this._sel.sort(function(e,t){return e.startOf("day").yearDay()-t.startOf("day").yearDay()}),this.publish("change",this,[e]),!1!==t&&this.draw(),!0},weekSelected:function(e){var t=e.toDate(),n=x(t).startOf("week"),a=x(t).endOf("week").subtract(1,"day");this._sel=[n,a],this.publish("change",this,[e.day()]),this.draw()},monthDaySelected:function(e,t,n){var a=x(e).startOf("month").weekday(t),i=x(e).endOf("month");for(selected=[];a<=i;)a>=x(e).startOf("month")&&!this.direction(a)&&(n?this.removeSelected(x(a).hours(12)):this.addSelected(x(a).hours(12))),a.add(7,"d")},makeSelectedDateVisible:function(e){outOfViewMonth=x(e).date("1").diff(this.viewStartDate,"months"),outOfViewMonth<0?this.viewStartDate.subtract(1,"months"):0<outOfViewMonth&&outOfViewMonth>=this.settings.months&&this.viewStartDate.add(1,"months")},removeSelected:function(e,t){e=x(e,this.settings.format).hours(12);for(var n=this._sel.length;n--;)if(this._sel[n].startOf("day").yearDay()===e.startOf("day").yearDay())return this._sel.splice(n,1),this.publish("change",this,[e]),!1!==t&&this.draw(),!0;return!1},draw:function(){var e,t,n,a,i,r,o,s,l,u,c=x(this.viewStartDate).startOf("month").add(12,"hours"),d=this.classes,f=0,h=0,p=0,m=this.settings;i=this.calendars.length;do{(e=x(c).date(1)).day(e.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),(t=this.calendars[f]).header.parentNode.setAttribute("data-datestart",c.format(this.settings.dayAttributeFormat)),t.caption.innerHTML=c.format(this.settings.titleFormat),s=[];for(var g=p=r=h=0;g<7;g++)k.removeClassName(t.header.children[g],d.daySelected),s[g]=0;for(;"week"==m.mode?(h%7==0&&0!==h&&r++,n=t.days[r].childNodes[h%7]):n=t.days[h],a=[],(o=this.isSelected(e))&&a.push({"-1":d.dayInRange,1:d.daySelected,true:d.daySelected}[o]),"range"===m.mode&&(this._sel[0]&&this._sel[0].startOf("day").yearDay()===e.clone().startOf("day").yearDay()&&a.push(d.dayInRangeStart),this._sel[1]&&this._sel[1].startOf("day").yearDay()===e.clone().startOf("day").yearDay()&&a.push(d.dayInRangeEnd)),m.dayHeaderClickable&&"multiple"===m.mode&&(a.push("k-day-week-"+e.weekday()),1!=o&&1!=o||this.direction(e)||c.format("M")!=e.format("M")||(s[e.weekday()]=s[e.weekday()]+1)),e.month()!=c.month()?a.push(d.dayOutOfMonth):a.push(d.dayInMonth),(!(this.blackout(e)||this.direction(e)||e.month()!=c.month()&&!1===m.dayOutOfMonthClickable)||0<o)&&a.push(d.dayActive),e.clone().startOf("day").yearDay()===M()&&a.push(d.dayToday),l=e.format(this.settings.dayAttributeFormat),m.dateClassMap[l]&&a.push(m.dateClassMap[l]),n.innerHTML=e.format(m.dayNumberFormat),n.className=a.join(" "),n.setAttribute("data-date",l),e.add(1,"days"),++h<42;);if((g=0)<s.length)do{if(0<s[g]){var v=C.moment(c).startOf("month").weekday(g),y=C.moment(c).startOf("month");for(endMonth=C.moment(c).endOf("month"),p=0;y<=v&&!this.direction(v)&&p++,v.add(7,"d"),v<=endMonth;);p==s[g]?k.addClassName(t.header.children[g],d.daySelected):k.removeClassName(t.header.children[g],d.daySelected)}}while(++g<s.length);c.add(1,"months")}while(++f<i);if(m.directionScrolling){var b=x().startOf("day").hours(12);u=c.diff(b,"months",!0),"today-past"===m.direction||"past"===m.direction?u<=0?(this.disableNextMonth=!1,k.removeClassName(this.container,d.disableNextMonth)):(this.disableNextMonth=!0,k.addClassName(this.container,d.disableNextMonth)):"today-future"!==m.direction&&"future"!==m.direction||(u>m.months?(this.disablePreviousMonth=!1,k.removeClassName(this.container,d.disablePreviousMonth)):(this.disablePreviousMonth=!0,k.addClassName(this.container,d.disablePreviousMonth))),"today-past"===m.direction||"past"===m.direction?u<=-11?(this.disableNextYear=!1,k.removeClassName(this.container,d.disableNextYear)):(this.disableNextYear=!0,k.addClassName(this.container,d.disableNextYear)):"today-future"!==m.direction&&"future"!==m.direction||(u>11+m.months?(this.disablePreviousYear=!1,k.removeClassName(this.container,d.disablePreviousYear)):(this.disablePreviousYear=!0,k.addClassName(this.container,d.disablePreviousYear)))}if(m.disableDate){var _=new Date,w=_.getFullYear(),S=_.getMonth()+1,D=_.getDate();$(this.container).find(".k-week").each(function(e,t){var n=$(t).find("span"),o=!1;n.each(function(e,t){var n=$(t).attr("data-date").split("-"),a=Number(n[0]),i=Number(n[1]),r=Number(n[2]);if(!(w<a||a==w&&S<i||a==w&&i==S&&D<r))return!(o=!0)}),$(t).css("pointer-events","auto"),!o&&$(t).css("pointer-events","none")})}}};var D=function(e,t,n){var a=[];"string"==typeof e?e=e.split(t):k.isArray(e)||(e=[e]);for(var i,r=e.length,o=0;e[o]&&(i=x(e[o],n).hours(12)).isValid()&&a.push(i),++o<r;);return a},k=(window.Kalendae=C).util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(e){return"string"==typeof e?document.getElementById(e):e},$$:function(e){return document.querySelectorAll(e)},make:function(e,t,n){var a,i=document.createElement(e);if(t)for(a in t)t.hasOwnProperty(a)&&i.setAttribute(a,t[a]);return n&&n.appendChild(i),i},isVisible:function(e){return 0<e.offsetWidth||0<e.offsetHeight},getStyle:function(e,t){var n,a;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=(a=window.getComputedStyle(e,null))?a[t]:""),n},domReady:function(e){var t=document.readyState;"complete"===t||"interactive"===t?e():setTimeout(function(){k.domReady(e)},9)},addEvent:function(a,e,i){var t=function(e){var t=(e=e||window.event).target||e.srcElement,n=i.apply(a,[e,t]);return!1===n&&(e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0)),n};return a.attachEvent?a.attachEvent("on"+e,t):a.addEventListener(e,t,!1),t},removeEvent:function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},fireEvent:function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}else document.createEventObject?e.fireEvent("on"+t):"function"==typeof e["on"+t]&&e["on"+t]()},hasClassName:function(e,t){if(!(e=k.$(e)))return!1;var n=e.className;return 0<n.length&&(n==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(n))},addClassName:function(e,t){(e=k.$(e))&&(k.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t))},removeClassName:function(e,t){(e=k.$(e))&&(e.className=k.trimString(e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")))},isFixed:function(e){do{if("fixed"===k.getStyle(e,"position"))return!0}while(e=e.offsetParent);return!1},scrollContainer:function(e){do{var t=k.getStyle(e,"overflow");if("auto"===t||"scroll"===t)return e}while((e=e.parentNode)&&e!=window.document.body);return null},getPosition:function(e,t){var n=e.offsetLeft,a=e.offsetTop,i={};if(!t)for(;e=e.offsetParent;)n+=e.offsetLeft,a+=e.offsetTop;return i[0]=i.left=n,i[1]=i.top=a,i},getHeight:function(e){return e.offsetHeight||e.scrollHeight},getWidth:function(e){return e.offsetWidth||e.scrollWidth},trimString:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],e={},t=a?1:0,n=function(e,t){if("object"==typeof t){for(var n in t)t.hasOwnProperty(n)&&(a&&"object"==typeof e[n]&&"object"==typeof t[n]?_update(e[n],t[n]):e[n]=t[n]);return e}};t<arguments.length;t++)n(e,arguments[t]);return e},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)}};"function"==typeof document.addEventListener&&C.util.domReady(function(){for(var e,t,n,a=k.$$(".auto-kal"),i=a.length;i--;)t=null==(n=(e=a[i]).getAttribute("data-kal"))||""==n?{}:new Function("return {"+n+"};")(),"INPUT"===e.tagName?new C.Input(e,t):new C(k.merge(t,{attachTo:e}))}),C.Input=function(e,t){if("function"==typeof document.addEventListener||k.isIE8()){var n,a,i=this.input=k.$(e),r=!1;if(!i||"INPUT"!==i.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var o=this,s=o.classes,l=o.settings=k.merge(o.defaults,t);this._events={},l.attachTo=window.document.body,l.selected?n=!0:l.selected=i.value,C.call(o,l),l.closeButton&&(a=k.make("a",{class:s.closeButton},o.container),k.addEvent(a,"click",function(){i.blur()})),n&&(i.value=o.getSelected());var u=o.container,c=!1;u.style.display="none",k.addClassName(u,s.positioned),this._events.containerMouseDown=k.addEvent(u,"mousedown",function(e,t){c=!0}),this._events.documentMousedown=k.addEvent(window.document,"mousedown",function(e,t){c=!1}),this._events.inputFocus=k.addEvent(i,"focus",function(){r=!0,o.setSelected(this.value),r=!1,o.show()}),this._events.inputBlur=k.addEvent(i,"blur",function(){c&&k.isIE8()?(c=!1,i.focus()):o.hide()}),this._events.inputKeyup=k.addEvent(i,"keyup",function(e){r=!0;var t=D(this.value,o.settings.parseSplitDelimiter,o.settings.format);t&&t.length&&t[0]&&1e3<t[0].year()?o.setSelected(this.value):(o.setSelected("",null),o.viewStartDate=x(o.defaultView),o.draw()),r=!1});var d=k.scrollContainer(i);d&&k.addEvent(d,"scroll",function(e){i.blur()}),o.subscribe("change",function(){r||(i.value=o.getSelected(),k.fireEvent(i,"change"))})}},C.Input.prototype=k.merge(C.prototype,{defaults:k.merge(C.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:k.merge(C.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var e=this.container,t=e.style,n=this.input,a=k.getPosition(n),i=k.scrollContainer(n),r=i?i.scrollTop:0,o=i?i.scrollLeft:0,s=this.settings;switch(t.display="",s.side){case"left":t.left=a.left-k.getWidth(e)+s.offsetLeft-o+"px",t.top=a.top+s.offsetTop-r+"px";break;case"right":t.left=a.left+k.getWidth(n)-o+"px",t.top=a.top+s.offsetTop-r+"px";break;case"top":t.left=a.left+s.offsetLeft-o+"px",t.top=a.top-k.getHeight(e)+s.offsetTop-r+"px";break;case"bottom right":t.left=a.left-k.getWidth(e)+k.getWidth(n)+s.offsetLeft+"px",t.top=a.top+k.getHeight(n)+s.offsetTop-r+"px";break;case"middle":t.left="0px",t.top="0px";break;case"bottom":default:t.left=a.left+s.offsetLeft-o+"px",t.top=a.top+k.getHeight(n)+s.offsetTop-r+"px"}t.position=k.isFixed(n)?"fixed":"absolute",this.publish("show",this)},hide:function(){this.container.style.display="none",this.publish("hide",this)},destroy:function(){var e=this.container,t=this.input;k.removeEvent(e,"mousedown",this._events.containerMousedown),k.removeEvent(window.document,"mousedown",this._events.documentMousedown),k.removeEvent(t,"focus",this._events.inputFocus),k.removeEvent(t,"blur",this._events.inputBlur),k.removeEvent(t,"keyup",this._events.inputKeyup),e.parentNode&&e.parentNode.removeChild(e)}});var T=function(e){e||(e=this);var o=e.c_||{};e.publish=function(e,t,n){for(var a,i=o[e],r=i?i.length:0;r--;)if("boolean"==typeof(a=i[r].apply(t,n||[])))return a},e.subscribe=function(e,t,n){return o[e]||(o[e]=[]),n?o[e].push(t):o[e].unshift(t),[e,t]},e.unsubscribe=function(e){for(var t=o[e[0]],n=e[1],a=t?t.length:0;a--;)t[a]===n&&t.splice(a,1)}};if(function(h){var m,e,t="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,p=Math.round,n=Object.prototype.hasOwnProperty,g=0,l=1,d=2,v=3,f=4,y=5,b=6,a={},r=[],i="undefined"!=typeof module&&module&&module.exports,o=/^\/?Date\((\-?\d+)/i,_=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,w=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,S=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,s=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,u=/\d\d?/,c=/\d{1,3}/,D=/\d{1,4}/,x=/[+\-]?\d{1,6}/,M=/\d+/,C=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,k=/Z|[\+\-]\d\d:?\d\d/gi,T=/T/i,O=/[\+\-]?\d+/,$=/[\+\-]?\d+(\.\d{1,3})?/,A=/\d/,E=/\d\d/,Y=/\d{3}/,N=/\d{4}/,F=/[+-]?\d{6}/,j=/[+-]?\d+/,B=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,H=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],I=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],L=/([\+\-]|\d\d)/gi,P=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),U={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},R={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},W={},z={s:45,m:45,h:22,d:26,M:11},G="DDD w W M D d".split(" "),q="M D H h m s w W".split(" "),V={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return ce(this.year()%100,2)},YYYY:function(){return ce(this.year(),4)},YYYYY:function(){return ce(this.year(),5)},YYYYYY:function(){var e=this.year();return(0<=e?"+":"-")+ce(Math.abs(e),6)},gg:function(){return ce(this.weekYear()%100,2)},gggg:function(){return ce(this.weekYear(),4)},ggggg:function(){return ce(this.weekYear(),5)},GG:function(){return ce(this.isoWeekYear()%100,2)},GGGG:function(){return ce(this.isoWeekYear(),4)},GGGGG:function(){return ce(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return _e(this.milliseconds()/100)},SS:function(){return ce(_e(this.milliseconds()/10),2)},SSS:function(){return ce(this.milliseconds(),3)},SSSS:function(){return ce(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+ce(_e(e/60),2)+":"+ce(_e(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+ce(_e(e/60),2)+ce(_e(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Z={},J=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],X=!1;function Q(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function K(e,t){return n.call(e,t)}function ee(e){!1===m.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function te(e,t){var n=!0;return se(function(){return n&&(ee(e),n=!1),t.apply(this,arguments)},t)}function ne(t,n){return function(e){return ce(t.call(this,e),n)}}function ae(t,n){return function(e){return this.localeData().ordinal(t.call(this,e),n)}}for(;G.length;)e=G.pop(),V[e+"o"]=ae(V[e],e);for(;q.length;)e=q.pop(),V[e+e]=ne(V[e],2);function ie(){}function re(e,t){!1!==t&&Me(e),le(this,e),this._d=new Date(+e._d),!1===X&&(X=!0,m.updateOffset(this),X=!1)}function oe(e){var t=ye(e),n=t.year||0,a=t.quarter||0,i=t.month||0,r=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+o+8*r,this._months=+i+3*a+12*n,this._data={},this._locale=m.localeData(),this._bubble()}function se(e,t){for(var n in t)K(t,n)&&(e[n]=t[n]);return K(t,"toString")&&(e.toString=t.toString),K(t,"valueOf")&&(e.valueOf=t.valueOf),e}function le(e,t){var n,a,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=t._pf),void 0!==t._locale&&(e._locale=t._locale),0<r.length)for(n in r)void 0!==(i=t[a=r[n]])&&(e[a]=i);return e}function ue(e){return e<0?Math.ceil(e):Math.floor(e)}function ce(e,t,n){for(var a=""+Math.abs(e),i=0<=e;a.length<t;)a="0"+a;return(i?n?"+":"":"-")+a}function de(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function fe(r,o){return function(e,t){var n,a,i;return null===t||isNaN(+t)||(i="moment()."+(a=o)+"(period, number) is deprecated. Please use moment()."+o+"(number, period).",Z[a]||(ee(i),Z[a]=!0),n=e,e=t,t=n),e="string"==typeof e?+e:e,he(this,m.duration(e,t),r),this}}function he(e,t,n,a){var i=t._milliseconds,r=t._days,o=t._months;a=null==a||a,i&&e._d.setTime(+e._d+i*n),r&&Ge(e,"Date",ze(e,"Date")+r*n),o&&We(e,ze(e,"Month")+o*n),a&&m.updateOffset(e,r||o)}function pe(e){return"[object Array]"===Object.prototype.toString.call(e)}function me(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function ge(e,t,n){var a,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(a=0;a<i;a++)(n&&e[a]!==t[a]||!n&&_e(e[a])!==_e(t[a]))&&o++;return o+r}function ve(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=U[e]||R[t]||t}return e}function ye(e){var t,n,a={};for(n in e)K(e,n)&&(t=ve(n))&&(a[t]=e[n]);return a}function be(o){var s,l;if(0===o.indexOf("week"))s=7,l="day";else{if(0!==o.indexOf("month"))return;s=12,l="month"}m[o]=function(n,e){var t,a,i=m._locale[o],r=[];if("number"==typeof n&&(e=n,n=h),a=function(e){var t=m().utc().set(l,e);return i.call(m._locale,t,n||"")},null!=e)return a(e);for(t=0;t<s;t++)r.push(a(t));return r}}function _e(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=0<=t?Math.floor(t):Math.ceil(t)),n}function we(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function Se(e,t,n){return Pe(m([e,11,31+t-n]),t,n).week}function De(e){return xe(e)?366:365}function xe(e){return e%4==0&&e%100!=0||e%400==0}function Me(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[l]<0||11<e._a[l]?l:e._a[d]<1||e._a[d]>we(e._a[g],e._a[l])?d:e._a[v]<0||24<e._a[v]||24===e._a[v]&&(0!==e._a[f]||0!==e._a[y]||0!==e._a[b])?v:e._a[f]<0||59<e._a[f]?f:e._a[y]<0||59<e._a[y]?y:e._a[b]<0||999<e._a[b]?b:-1,e._pf._overflowDayOfYear&&(t<g||d<t)&&(t=d),e._pf.overflow=t)}function Ce(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===h)),e._isValid}function ke(e){return e?e.toLowerCase().replace("_","-"):e}function Te(e){var t=null;if(!a[e]&&i)try{t=m.locale(),require("./locale/"+e),m.locale(t)}catch(e){}return a[e]}function Oe(e,t){var n,a;return t._isUTC?(n=t.clone(),a=(m.isMoment(e)||me(e)?+e:+m(e))-+n,n._d.setTime(+n._d+a),m.updateOffset(n,!1),n):m(e).local()}function $e(e,t){return e.isValid()?(t=Ae(t,e.localeData()),W[t]||(W[t]=function(n){var a,i,e,r=n.match(S);for(a=0,i=r.length;a<i;a++)V[r[a]]?r[a]=V[r[a]]:r[a]=(e=r[a]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var t="";for(a=0;a<i;a++)t+=r[a]instanceof Function?r[a].call(e,n):r[a];return t}}(t)),W[t](e)):e.localeData().invalidDate()}function Ae(e,t){var n=5;function a(e){return t.longDateFormat(e)||e}for(s.lastIndex=0;0<=n&&s.test(e);)e=e.replace(s,a),s.lastIndex=0,n-=1;return e}function Ee(e,t){var n,a=t._strict;switch(e){case"Q":return A;case"DDDD":return Y;case"YYYY":case"GGGG":case"gggg":return a?N:D;case"Y":case"G":case"g":return j;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return a?F:x;case"S":if(a)return A;case"SS":if(a)return E;case"SSS":if(a)return Y;case"DDD":return c;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return C;case"a":case"A":return t._locale._meridiemParse;case"x":return O;case"X":return $;case"Z":case"ZZ":return k;case"T":return T;case"SSSS":return M;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return a?E:u;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return u;case"Do":return a?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp((n=e.replace("\\",""),n.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,i){return t||n||a||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")))}}function Ye(e){var t=(e=e||"").match(k)||[],n=((t[t.length-1]||[])+"").match(L)||["-",0,0],a=60*n[1]+_e(n[2]);return"+"===n[0]?a:-a}function Ne(e,t,n){var a,i=n._a;switch(e){case"Q":null!=t&&(i[l]=3*(_e(t)-1));break;case"M":case"MM":null!=t&&(i[l]=_e(t)-1);break;case"MMM":case"MMMM":null!=(a=n._locale.monthsParse(t,e,n._strict))?i[l]=a:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[d]=_e(t));break;case"Do":null!=t&&(i[d]=_e(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=_e(t));break;case"YY":i[g]=m.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[g]=_e(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":i[v]=_e(t);break;case"m":case"mm":i[f]=_e(t);break;case"s":case"ss":i[y]=_e(t);break;case"S":case"SS":case"SSS":case"SSSS":i[b]=_e(1e3*("0."+t));break;case"x":n._d=new Date(_e(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=Ye(t);break;case"dd":case"ddd":case"dddd":null!=(a=n._locale.weekdaysParse(t))?(n._w=n._w||{},n._w.d=a):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=_e(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=m.parseTwoDigitYear(t)}}function Fe(e){var t,n,a,i,r,o,s,l,u,c,d,f,h,p;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,o=4,n=Q(t.GG,e._a[g],Pe(m(),1,4).year),a=Q(t.W,1),i=Q(t.E,1)):(r=e._locale._week.dow,o=e._locale._week.doy,n=Q(t.gg,e._a[g],Pe(m(),r,o).year),a=Q(t.w,1),null!=t.d?(i=t.d)<r&&++a:i=null!=t.e?t.e+r:r),u=a,c=i,d=o,f=r,p=Le(l=n,0,1).getUTCDay(),s={year:0<(h=7*(u-1)+((c=null!=c?c:f)-f)+(f-(p=0===p?7:p)+(d<p?7:0)-(p<f?7:0))+1)?l:l-1,dayOfYear:0<h?h:De(l-1)+h},e._a[g]=s.year,e._dayOfYear=s.dayOfYear}function je(e){var t,n,a,i,r=[];if(!e._d){var o,s;for(o=e,s=new Date,a=o._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()],e._w&&null==e._a[d]&&null==e._a[l]&&Fe(e),e._dayOfYear&&(i=Q(e._a[g],a[g]),e._dayOfYear>De(i)&&(e._pf._overflowDayOfYear=!0),n=Le(i,0,e._dayOfYear),e._a[l]=n.getUTCMonth(),e._a[d]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=a[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[v]&&0===e._a[f]&&0===e._a[y]&&0===e._a[b]&&(e._nextDay=!0,e._a[v]=0),e._d=(e._useUTC?Le:function(e,t,n,a,i,r,o){var s=new Date(e,t,n,a,i,r,o);e<1970&&s.setFullYear(e);return s}).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[v]=24)}}function Be(e){if(e._f!==m.ISO_8601){e._a=[],e._pf.empty=!0;var t,n,a,i,r,o,s,l,u,c=""+e._i,d=c.length,f=0;for(a=Ae(e._f,e._locale).match(S)||[],t=0;t<a.length;t++)i=a[t],(n=(c.match(Ee(i,e))||[])[0])&&(0<(r=c.substr(0,c.indexOf(n))).length&&e._pf.unusedInput.push(r),c=c.slice(c.indexOf(n)+n.length),f+=n.length),V[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),Ne(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=d-f,0<c.length&&e._pf.unusedInput.push(c),!0===e._pf.bigHour&&e._a[v]<=12&&(e._pf.bigHour=h),e._a[v]=(o=e._locale,s=e._a[v],null==(l=e._meridiem)?s:null!=o.meridiemHour?o.meridiemHour(s,l):(null!=o.isPM&&((u=o.isPM(l))&&s<12&&(s+=12),u||12!==s||(s=0)),s)),je(e),Me(e)}else He(e)}function He(e){var t,n,a=e._i,i=B.exec(a);if(i){for(e._pf.iso=!0,t=0,n=H.length;t<n;t++)if(H[t][1].exec(a)){e._f=H[t][0]+(i[6]||" ");break}for(t=0,n=I.length;t<n;t++)if(I[t][1].exec(a)){e._f+=I[t][0];break}a.match(k)&&(e._f+="Z"),Be(e)}else e._isValid=!1}function Ie(e){var t,n,a,i,r=e._i;r===h?e._d=new Date:me(r)?e._d=new Date(+r):null!==(t=o.exec(r))?e._d=new Date(+t[1]):"string"==typeof r?(He(i=e),!1===i._isValid&&(delete i._isValid,m.createFromInputFallback(i))):pe(r)?(e._a=function(e,t){var n,a=[];for(n=0;n<e.length;++n)a.push(t(e[n],n));return a}(r.slice(0),function(e){return parseInt(e,10)}),je(e)):"object"==typeof r?(n=e)._d||(a=ye(n._i),n._a=[a.year,a.month,a.day||a.date,a.hour,a.minute,a.second,a.millisecond],je(n)):"number"==typeof r?e._d=new Date(r):m.createFromInputFallback(e)}function Le(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Pe(e,t,n){var a,i=n-t,r=n-e.day();return i<r&&(r-=7),r<i-7&&(r+=7),a=m(e).add(r,"d"),{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function Ue(e){var t,n=e._i,a=e._f;return e._locale=e._locale||m.localeData(e._l),null===n||a===h&&""===n?m.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),m.isMoment(n)?new re(n,!0):(a?pe(a)?function(e){var t,n,a,i,r;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,t=le({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},t._f=e._f[i],Be(t),Ce(t)&&(r+=t._pf.charsLeftOver,r+=10*t._pf.unusedTokens.length,t._pf.score=r,(null==a||r<a)&&(a=r,n=t));se(e,n||t)}(e):Be(e):Ie(e),(t=new re(e))._nextDay&&(t.add(1,"d"),t._nextDay=h),t))}function Re(e,t){var n,a;if(1===t.length&&pe(t[0])&&(t=t[0]),!t.length)return m();for(n=t[0],a=1;a<t.length;++a)t[a][e](n)&&(n=t[a]);return n}for(V.DDDD=ne(V.DDD,3),se(ie.prototype,{set:function(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var a,i,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(i=m.utc([2e3,a]),n&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[a]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[a]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(n&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!n&&this._monthsParse[a].test(e))return a}},_weekdays:"星期天_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"周天_周一_周二_周三_周四_周五_周六".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"日_一_二_三_四_五_六".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,a;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(n=m([2e3,1]).day(t),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var a=this._calendar[e];return"function"==typeof a?a.apply(t,[n]):a},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,a){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,a):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[0<e?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Pe(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(m=function(e,t,n,a){var i;return"boolean"==typeof n&&(a=n,n=h),(i={_isAMomentObject:!0})._i=e,i._f=t,i._l=n,i._strict=a,i._isUTC=!1,i._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},Ue(i)}).suppressDeprecationWarnings=!1,m.createFromInputFallback=te("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),m.min=function(){return Re("isBefore",[].slice.call(arguments,0))},m.max=function(){return Re("isAfter",[].slice.call(arguments,0))},m.utc=function(e,t,n,a){var i;return"boolean"==typeof n&&(a=n,n=h),(i={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0})._l=n,i._i=e,i._f=t,i._strict=a,i._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},Ue(i).utc()},m.unix=function(e){return m(1e3*e)},m.duration=function(e,t){var n,a,i,r,o,s,l,u=e,c=null;return m.isDuration(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(u={},t?u[t]=e:u.milliseconds=e):(c=_.exec(e))?(n="-"===c[1]?-1:1,u={y:0,d:_e(c[d])*n,h:_e(c[v])*n,m:_e(c[f])*n,s:_e(c[y])*n,ms:_e(c[b])*n}):(c=w.exec(e))?(n="-"===c[1]?-1:1,u={y:(i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n})(c[2]),M:i(c[3]),d:i(c[4]),h:i(c[5]),m:i(c[6]),s:i(c[7]),w:i(c[8])}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(o=m(u.from),s=Oe(s=m(u.to),o),o.isBefore(s)?l=de(o,s):((l=de(s,o)).milliseconds=-l.milliseconds,l.months=-l.months),(u={}).ms=(r=l).milliseconds,u.M=r.months),a=new oe(u),m.isDuration(e)&&K(e,"_locale")&&(a._locale=e._locale),a},m.version="2.9.0",m.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",m.ISO_8601=function(){},m.momentProperties=r,m.updateOffset=function(){},m.relativeTimeThreshold=function(e,t){return z[e]!==h&&(t===h?z[e]:(z[e]=t,!0))},m.lang=te("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return m.locale(e,t)}),m.locale=function(e,t){var n;return e&&(n=void 0!==t?m.defineLocale(e,t):m.localeData(e))&&(m.duration._locale=m._locale=n),m._locale._abbr},m.defineLocale=function(e,t){return null!==t?(t.abbr=e,a[e]||(a[e]=new ie),a[e].set(t),m.locale(e),a[e]):(delete a[e],null)},m.langData=te("moment.langData is deprecated. Use moment.localeData instead.",function(e){return m.localeData(e)}),m.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return m._locale;if(!pe(e)){if(t=Te(e))return t;e=[e]}return function(e){for(var t,n,a,i,r=0;r<e.length;){for(t=(i=ke(e[r]).split("-")).length,n=(n=ke(e[r+1]))?n.split("-"):null;0<t;){if(a=Te(i.slice(0,t).join("-")))return a;if(n&&n.length>=t&&ge(i,n,!0)>=t-1)break;t--}r++}return null}(e)},m.isMoment=function(e){return e instanceof re||null!=e&&K(e,"_isAMomentObject")},m.isDuration=function(e){return e instanceof oe},e=J.length-1;0<=e;--e)be(J[e]);function We(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))||(n=Math.min(e.date(),we(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)),e}function ze(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function Ge(e,t,n){return"Month"===t?We(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function qe(t,n){return function(e){return null!=e?(Ge(this,t,e),m.updateOffset(this,n),this):ze(this,t)}}function Ve(e){return 400*e/146097}function Ze(e){return 146097*e/400}function Je(e){m.duration.fn[e]=function(){return this._data[e]}}for(e in m.normalizeUnits=function(e){return ve(e)},m.invalid=function(e){var t=m.utc(NaN);return null!=e?se(t._pf,e):t._pf.userInvalidated=!0,t},m.parseZone=function(){return m.apply(null,arguments).parseZone()},m.parseTwoDigitYear=function(e){return _e(e)+(68<_e(e)?1900:2e3)},m.isDate=me,se(m.fn=re.prototype,{clone:function(){return m(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=m(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():$e(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):$e(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return Ce(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&0<ge(this._a,(this._isUTC?m.utc(this._a):m(this._a)).toArray()))},parsingFlags:function(){return se({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=$e(this,e||m.defaultFormat);return this.localeData().postformat(t)},add:fe(1,"add"),subtract:fe(-1,"subtract"),diff:function(e,t,n){var a,i,r,o,s,l,u=Oe(e,this),c=6e4*(u.utcOffset()-this.utcOffset());return"year"===(t=ve(t))||"month"===t||"quarter"===t?(r=this,s=12*((o=u).year()-r.year())+(o.month()-r.month()),l=r.clone().add(s,"months"),i=-(s+(o-l<0?(o-l)/(l-r.clone().add(s-1,"months")):(o-l)/(r.clone().add(s+1,"months")-l))),"quarter"===t?i/=3:"year"===t&&(i/=12)):(a=this-u,i="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-c)/864e5:"week"===t?(a-c)/6048e5:a),n?i:ue(i)},from:function(e,t){return m.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(m(),e)},calendar:function(e){var t=e||m(),n=Oe(t,this).startOf("day"),a=this.diff(n,"days",!0),i=a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,m(t)))},isLeapYear:function(){return xe(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}(e,this.localeData()),this.add(e-t,"d")):t},month:qe("Month",!0),startOf:function(e){switch(e=ve(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return(e=ve(e))===h||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return"millisecond"===(t=ve(void 0!==t?t:"millisecond"))?+(e=m.isMoment(e)?e:m(e))<+this:(m.isMoment(e)?+e:+m(e))<+this.clone().startOf(t)},isBefore:function(e,t){var n;return"millisecond"===(t=ve(void 0!==t?t:"millisecond"))?+this<+(e=m.isMoment(e)?e:m(e)):(n=m.isMoment(e)?+e:+m(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return"millisecond"===(t=ve(t||"millisecond"))?+this==+(e=m.isMoment(e)?e:m(e)):(n=+m(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:te("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return(e=m.apply(null,arguments))<this?this:e}),max:te("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return this<(e=m.apply(null,arguments))?this:e}),zone:te("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,a=this._offset||0;return null!=e?("string"==typeof e&&(e=Ye(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),a!==e&&(!t||this._changeInProgress?he(this,m.duration(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,m.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?a:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ye(this._i)),this},hasAlignedHourOffset:function(e){return e=e?m(e).utcOffset():0,(this.utcOffset()-e)%60==0},daysInMonth:function(){return we(this.year(),this.month())},dayOfYear:function(e){var t=p((m(this).startOf("day")-m(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=Pe(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=Pe(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=Pe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Se(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)},get:function(e){return this[e=ve(e)]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else"function"==typeof this[e=ve(e)]&&this[e](t);return this},locale:function(e){var t;return e===h?this._locale._abbr:(null!=(t=m.localeData(e))&&(this._locale=t),this)},lang:te("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===h?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),m.fn.millisecond=m.fn.milliseconds=qe("Milliseconds",!1),m.fn.second=m.fn.seconds=qe("Seconds",!1),m.fn.minute=m.fn.minutes=qe("Minutes",!1),m.fn.hour=m.fn.hours=qe("Hours",!0),m.fn.date=qe("Date",!0),m.fn.dates=te("dates accessor is deprecated. Use date instead.",qe("Date",!0)),m.fn.year=qe("FullYear",!0),m.fn.years=te("years accessor is deprecated. Use year instead.",qe("FullYear",!0)),m.fn.days=m.fn.day,m.fn.months=m.fn.month,m.fn.weeks=m.fn.week,m.fn.isoWeeks=m.fn.isoWeek,m.fn.quarters=m.fn.quarter,m.fn.toJSON=m.fn.toISOString,m.fn.isUTC=m.fn.isUtc,se(m.duration.fn=oe.prototype,{_bubble:function(){var e,t,n,a=this._milliseconds,i=this._days,r=this._months,o=this._data,s=0;o.milliseconds=a%1e3,e=ue(a/1e3),o.seconds=e%60,t=ue(e/60),o.minutes=t%60,n=ue(t/60),o.hours=n%24,i+=ue(n/24),r+=ue((i-=ue(Ze(s=ue(Ve(i)))))/30),i%=30,s+=ue(r/12),r%=12,o.days=i,o.months=r,o.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return ue(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_e(this._months/12)},humanize:function(e){var t,n,a,i,r,o,s,l,u,c,d,f=(n=!e,a=(t=this).localeData(),i=m.duration(t).abs(),r=p(i.as("s")),o=p(i.as("m")),s=p(i.as("h")),l=p(i.as("d")),u=p(i.as("M")),c=p(i.as("y")),(d=r<z.s&&["s",r]||1===o&&["m"]||o<z.m&&["mm",o]||1===s&&["h"]||s<z.h&&["hh",s]||1===l&&["d"]||l<z.d&&["dd",l]||1===u&&["M"]||u<z.M&&["MM",u]||1===c&&["y"]||["yy",c])[2]=n,d[3]=0<+t,d[4]=a,function(e,t,n,a,i){return i.relativeTime(t||1,!!n,e,a)}.apply({},d));return e&&(f=this.localeData().pastFuture(+this,f)),this.localeData().postformat(f)},add:function(e,t){var n=m.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=m.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return this[(e=ve(e)).toLowerCase()+"s"]()},as:function(e){var t,n;if("month"===(e=ve(e))||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*Ve(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Ze(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:m.fn.lang,locale:m.fn.locale,toIsoString:te("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),a=Math.abs(this.hours()),i=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(a||i||r?"T":"")+(a?a+"H":"")+(i?i+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),m.duration.fn.toString=m.duration.fn.toISOString,P)K(P,e)&&Je(e.toLowerCase());m.duration.fn.asMilliseconds=function(){return this.as("ms")},m.duration.fn.asSeconds=function(){return this.as("s")},m.duration.fn.asMinutes=function(){return this.as("m")},m.duration.fn.asHours=function(){return this.as("h")},m.duration.fn.asDays=function(){return this.as("d")},m.duration.fn.asWeeks=function(){return this.as("weeks")},m.duration.fn.asMonths=function(){return this.as("M")},m.duration.fn.asYears=function(){return this.as("y")},m.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===_e(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.moment=m}.call(C),void 0!==x&&(C.moment=x),!C.moment){if(!window.moment)throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page.";C.moment=window.moment}return(x=C.moment).fn.yearDay=function(e){var t=Math.floor(this._d/864e5);return void 0===e?t:this.add({d:e-t})},"undefined"==typeof jQuery||"function"!=typeof document.addEventListener&&!k.isIE8()||(jQuery.fn.kalendae=function(n){return this.each(function(e,t){"INPUT"===t.tagName?jQuery(t).data("kalendae",new C.Input(t,n)):jQuery(t).data("kalendae",new C(jQuery.extend({},{attachTo:t},n)))}),this}),C},"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.Kalendae=t()}(),function(){function t(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}function o(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function e(e,t){return r.call((t||document).querySelectorAll(e))}function n(){e("input.awesomplete").forEach(function(e){new a(e)})}var a=function(e,t){var n=this;Awesomplete.count=(Awesomplete.count||0)+1,this.count=Awesomplete.count,this.isOpened=!1,this.input=o(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),t=t||{},function(e,t,n){for(var a in t){var i=t[a],r=e.input.getAttribute("data-"+a.toLowerCase());"number"==typeof i?e[a]=parseInt(r):!1===i?e[a]=null!==r:i instanceof Function?e[a]=null:e[a]=r,e[a]||0===e[a]||(e[a]=a in n?n[a]:i)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:a.DATA,filter:a.FILTER_CONTAINS,sort:!1!==t.sort&&a.SORT_BYLENGTH,item:a.ITEM,replace:a.REPLACE},t),this.index=-1,this.container=o.create("div",{className:"awesomplete",around:e}),this.ul=o.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=o.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;n.opened&&(13===t&&n.selected?(e.preventDefault(),n.select()):27===t?n.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),n[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){e.preventDefault()},click:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),n.select(t,e.target))}}}},o.bind(this.input,this._events.input),o.bind(this.input.form,this._events.form),o.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[],a.all.push(this)};a.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&-1<e.indexOf(","))this._list=e.split(/\s*,\s*/);else if((e=o(e))&&e.children){var i=[];r.apply(e.children).forEach(function(e){if(!e.disabled){var t=e.textContent.trim(),n=e.value||t,a=e.label||t;""!==n&&i.push({label:a,value:n})}}),this._list=i}document.activeElement===this.input&&this.evaluate()},get selected(){return-1<this.index},get opened(){return this.isOpened},close:function(e){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),o.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),o.fire(this.input,"awesomplete-open")},destroy:function(){o.unbind(this.input,this._events.input),o.unbind(this.input.form,this._events.form);var e=this.container.parentNode;e.insertBefore(this.input,this.container),e.removeChild(this.container),this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var t=a.all.indexOf(this);-1!==t&&a.all.splice(t,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),-1<(this.index=e)&&0<t.length&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,o.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t){if(e?this.index=o.siblingIndex(e):e=this.ul.children[this.index],e){var n=this.suggestions[this.index];o.fire(this.input,"awesomplete-select",{text:n,origin:t||e})&&(this.replace(n),this.close({reason:"select"}),o.fire(this.input,"awesomplete-selectcomplete",{text:n}))}},evaluate:function(){var n=this,a=this.input.value;a.length>=this.minChars&&this._list&&0<this._list.length?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(e){return new t(n.data(e,a))}).filter(function(e){return n.filter(e,a)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(e,t){n.ul.appendChild(n.item(e,a,t))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},a.all=[],a.FILTER_CONTAINS=function(e,t){return RegExp(o.regExpEscape(t.trim()),"i").test(e)},a.FILTER_STARTSWITH=function(e,t){return RegExp("^"+o.regExpEscape(t.trim()),"i").test(e)},a.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},a.ITEM=function(e,t,n){return o.create("li",{innerHTML:""===t.trim()?e:e.replace(RegExp(o.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+n})},a.REPLACE=function(e){this.input.value=e.value},a.DATA=function(e){return e},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var r=Array.prototype.slice;o.create=function(e,t){var n=document.createElement(e);for(var a in t){var i=t[a];if("inside"===a)o(i).appendChild(n);else if("around"===a){var r=o(i);r.parentNode.insertBefore(n,r),n.appendChild(r)}else a in n?n[a]=i:n.setAttribute(a,i)}return n},o.bind=function(t,e){if(t)for(var n in e){var a=e[n];n.split(/\s+/).forEach(function(e){t.addEventListener(e,a)})}},o.unbind=function(t,e){if(t)for(var n in e){var a=e[n];n.split(/\s+/).forEach(function(e){t.removeEventListener(e,a)})}},o.fire=function(e,t,n){var a=document.createEvent("HTMLEvents");for(var i in a.initEvent(t,!0,!0),n)a[i]=n[i];return e.dispatchEvent(a)},o.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},o.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof Document&&("loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)),a.$=o,a.$$=e,"undefined"!=typeof self&&(self.Awesomplete=a),"object"==typeof module&&module.exports&&(module.exports=a)}(),function(){$.MsgBox={Alert:function(e,t,n){a("alert",e,t),r(n),s()},Judge:function(e,t,n){a("judge",e,t),o(n),s()},Confirm:function(e,t,n){a("confirm",e,t),r(n),s()},Prompt:function(e,t,n){a("prompt",e,t),r(n),s()},Remind:function(e,t,n){a("remind",e,t),r(n),s()}};var a=function(e,t,n){var a="";a+='<div id="mb_box"></div><div id="mb_con"><span id="mb_tit">'+t+"</span>",a+='<a id="mb_ico"></a><div id="mb_msg">'+n+'</div><div id="mb_btnbox">',"alert"==e&&(a+='<input id="mb_btn_ok" type="button" value="确定" />'),"judge"==e&&(a+='<input id="mb_jug_ok" type="button" value="确定" />'),"confirm"==e&&(a+='<input id="mb_btn_ok" type="button" value="是" />',a+='<input id="mb_btn_no" type="button" value="否" />'),"prompt"==e&&(a+='<span style="display:inline-block;width:100%;height:27px;background:#00aeef"></span>'),"remind"==e&&(a+='<span style="display:inline-block;width:100%;height:27px;background:#fff;margin-top: -1px;"></span>'),a+="</div></div>",$("body").append(a),i()},i=function(){$("#mb_box").css({width:"100%",height:"100%",zIndex:"99999",position:"fixed",filter:"Alpha(opacity=60)",backgroundColor:"rgba(10%,20%,30%,0.6)",top:"0",left:"0",opacity:"0.6"}),$("#mb_con").css({zIndex:"999999",width:"355px",height:"189px",position:"fixed",backgroundColor:"White",borderRadius:"",border:"1px solid #fff"}),$("#mb_tit").css({display:"block",fontSize:"16px",color:"#444",padding:"2px 15px",backgroundColor:"#00aeef",borderRadius:"",borderBottom:"",fontWeight:"normal",fontFamily:"microsoft yahei"}),$("#mb_msg").css({height:"60px",lineHeight:"125px",fontSize:"13px",textAlign:"center",fontSize:"16px",fontFamily:"microsoft yahei"}),$("#mb_msg p").css({height:"30px",lineHeight:"30px",width:"350px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),$("#mb_btnbox").css({margin:"75px 0 0",textAlign:"center",background:"#00aeef",paddingTop:"1px"}),$("#mb_btn_ok,#mb_jug_ok,#mb_btn_no").css({width:"60px",height:"28px",color:"#000",border:"1px solid #fff",borderRadius:"3px",background:"#00aeef",fontSize:"14px",fontFamily:"microsoft yahei"}),$("#mb_btn_ok,#mb_jug_ok").css({backgroundColor:"#00aeef"}),$("#mb_btn_no").css({backgroundColor:"#00aeef",marginLeft:"20px"}),$("#mb_ico").hover(function(){$(this).css({backgroundColor:"Red",color:"White"})},function(){$(this).css({backgroundColor:"#DDD",color:"black"})});var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=$("#mb_con").width(),a=$("#mb_con").height();$("#mb_con").css({top:(t-a)/2+"px",left:(e-n)/2+"px"})},r=function(e){$("#mb_btn_ok").click(function(){$("#mb_box,#mb_con").remove(),"function"==typeof e&&e()})},o=function(e){$("#mb_jug_ok").click(function(){$("#mb_box,#mb_con").remove(),"function"==typeof e&&e()})},s=function(){$("#mb_btn_no,#mb_ico").click(function(){$("#mb_box,#mb_con").remove()})}}(),window.localStorage){var storage=window.localStorage,inow=Date.now(),schedule_provinceANDcityStr=storage.getItem("schedule_provinceANDcity");if(null==schedule_provinceANDcityStr)getprovinceANDcityJSON();else if(eouluGlobal.S_getPageAllConfig().Schedule.provinceANDcityRefreshFlag)getprovinceANDcityJSON();else{var iexpires=JSON.parse(schedule_provinceANDcityStr).expires;iexpires<inow?getprovinceANDcityJSON():schedule_provinceANDcity=JSON.parse(schedule_provinceANDcityStr).data}}else alert("浏览器不支持localstorage");function getprovinceANDcityJSON(){jQuery.getJSON("html/modules/serviced/provinceANDcity.json",void 0,function(e,t,n){if("success"==t){var a={};a.expires=inow+2592e6,a.data=_.cloneDeep(e),console.log("iObj.data"),console.log(a.data),schedule_provinceANDcity=_.cloneDeep(e);var i=JSON.stringify(a);storage.setItem("schedule_provinceANDcity",i)}else $.MsgBox_Unload.Alert("提示","获取中国省市数据失败！")})}function searchCity(t){if(null!==ScheduleState.provinceANDcityStr)return _.find(ScheduleState.provinceANDcityStr,function(e){return e.value==t})}var ScheduleState=new Object;function addupdateAwesomplete(e,t){if(null===ScheduleState.provinceANDcityStr){var r=[];schedule_provinceANDcity.provinces.map(function(i,e,t){i.citys.map(function(e,t,n){var a={};a.label=i.provinceName+","+e.citysName,a.value=e.citysName,r.push(a)})}),ScheduleState.provinceANDcityStr=_.cloneDeep(r)}"add"==e?ScheduleState.addprovinceANDcityFlag||(t.each(function(e,t){new Awesomplete(t,{list:ScheduleState.provinceANDcityStr,minChars:1,maxItems:20,autoFirst:!0})}),ScheduleState.addprovinceANDcityFlag=!0):"update"==e&&(ScheduleState.updateprovinceANDcityFlag||(t.each(function(e,t){new Awesomplete(t,{list:ScheduleState.provinceANDcityStr,minChars:1,maxItems:20,autoFirst:!0})}),ScheduleState.updateprovinceANDcityFlag=!0))}function alterDistance(e,t,u){var n="https://api.map.baidu.com/geocoder/v2/?ak=ZHnpqUp55qaTvkE27KGjUBYLcUfsaRTV&output=json&address="+encodeURIComponent(e),a="https://api.map.baidu.com/geocoder/v2/?ak=ZHnpqUp55qaTvkE27KGjUBYLcUfsaRTV&output=json&address="+encodeURIComponent(t);$.ajax({type:"POST",url:n,dataType:"JSONP",success:function(e){if(0==parseInt(e.status)){var s=e.result.location.lng,l=e.result.location.lat;console.log("lng1:"+s),console.log("lat1:"+l),$.ajax({type:"POST",url:a,dataType:"JSONP",success:function(e){if(0==parseInt(e.status)){var t=e.result.location.lng,n=e.result.location.lat;console.log("lng2:"+t),console.log("lat2:"+n);var a=new BMap.Map,i=new BMap.Point(s,l),r=new BMap.Point(t,n),o=(a.getDistance(i,r)/1e3).toFixed(2);console.warn(o),u&&u(o)}else alert("第三方库计算距离失败！")}})}}})}function AddContract(){addupdateAwesomplete("add",$("#add_info_Departure, #add_info_Destination")),$("[id^='add_info_']").each(function(){return!(!$(this).is("#add_info_Name")&&!$(this).is("#add_info_TrafficExpense"))||($(this).is("#add_info_TransportTool")?($(this).val("请选择"),!0):$(this).is("#add_info_HotelExpense")?($(this).val("请选择住宿费用"),!0):void $(this).val(""))}),$("#add_info_TransportTool").trigger("change"),$(".MailBar_cover_color, .contract_add").slideDown(200)}function INSearch(){var e=$(".classify").find("option:selected").text();if("员工姓名"==e){var t=$("select.staffName").find("option:selected").attr("value");t=Trim(t)}else{t=$("#searchContent1").val();t=Trim(t)}""!=t?window.location.href="ScheduleRoute?classify="+e+"&parameter="+t:$.MsgBox_Unload.Alert("提示","搜索内容不为空！")}function Cancel(){$("#search").val("cancel"),$('input[name="Name"]').val(""),$("#top_text_from").attr("action","Schedule?Date="+currentDate),$("#top_text_from").submit()}function SelectContent(){for(var e=$("span.engineer").html().split(","),t=e.length,n="",a="",i=1;i<t-1;i++)n+='<option value="'+e[i].substring(12,e[i].length-1)+'">'+e[i].substring(12,e[i].length-1)+"</option>";a+='<option value="'+e[t-1].substring(12,e[t-1].length-2)+'">'+e[t-1].substring(12,e[t-1].length-2)+"</option>",Str='<select class="staffName" ><option value="所有人">所有人</option>'+n+a+"</select>",$(".select1").html("").html(Str)}ScheduleState.addSubmitObj=new Object,ScheduleState.addSubmitObj.Name=null,ScheduleState.addSubmitObj.CustomerUnit=null,ScheduleState.addSubmitObj.ServiceItem=null,ScheduleState.addSubmitObj.TransportTool=null,ScheduleState.addSubmitObj.TrainNumber=null,ScheduleState.addSubmitObj.Hotel=null,ScheduleState.addSubmitObj.OperateType=null,ScheduleState.addSubmitObj.Departure=null,ScheduleState.addSubmitObj.Destination=null,ScheduleState.addSubmitObj.DepartureDate=null,ScheduleState.addSubmitObj.DestinationDate=null,ScheduleState.addSubmitObj.HotelExpense=null,ScheduleState.addSubmitObj.TrafficExpense=null,ScheduleState.addSubmitObj.TravelDistance=null,ScheduleState.addSubmitObj.Date=null,ScheduleState.updateSubmitObj=new Object,ScheduleState.updateSubmitObj.ID=null,ScheduleState.updateSubmitObj.Name=null,ScheduleState.updateSubmitObj.CustomerUnit=null,ScheduleState.updateSubmitObj.ServiceItem=null,ScheduleState.updateSubmitObj.TransportTool=null,ScheduleState.updateSubmitObj.TrainNumber=null,ScheduleState.updateSubmitObj.Hotel=null,ScheduleState.updateSubmitObj.OperateType=null,ScheduleState.updateSubmitObj.Departure=null,ScheduleState.updateSubmitObj.Destination=null,ScheduleState.updateSubmitObj.DepartureDate=null,ScheduleState.updateSubmitObj.DestinationDate=null,ScheduleState.updateSubmitObj.HotelExpense=null,ScheduleState.updateSubmitObj.TrafficExpense=null,ScheduleState.updateSubmitObj.TravelDistance=null,ScheduleState.updateSubmitObj.Date=null,ScheduleState.provinceANDcityStr=null,ScheduleState.addprovinceANDcityFlag=!1,ScheduleState.updateprovinceANDcityFlag=!1,$(document).on("click","#add_submit",function(){var n=$(this);for(var e in ScheduleState.addSubmitObj)"OperateType"!=e?"Date"!=e?"TravelDistance"!=e&&(ScheduleState.addSubmitObj[e]=$("#add_info_"+e).val()):ScheduleState.addSubmitObj[e]=currentDate:ScheduleState.addSubmitObj[e]="Add";var t=new RegExp("[0-9]{2}:[0-9]{2}");for(var a in ScheduleState.addSubmitObj){if(ScheduleState.addSubmitObj[a]=globalDataHandle(ScheduleState.addSubmitObj[a],"").trim(),"CustomerUnit"==a&&""==ScheduleState.addSubmitObj[a])return $.MsgBox_Unload.Alert("提示","客户单位必填！"),!1;if("HotelExpense"==a&&(""==ScheduleState.addSubmitObj[a]||"请选择住宿费用"==ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择住宿费用！"),!1;if("TrafficExpense"==a&&(""==ScheduleState.addSubmitObj[a]||"请选择交通方式"==ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择交通费用！"),!1;if("Departure"==a&&""==ScheduleState.addSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择出发地！"),!1;if("Destination"==a&&""==ScheduleState.addSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择目的地！"),!1;if("DepartureDate"==a&&""!=ScheduleState.addSubmitObj[a]&&!t.test(ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","出发时间格式错误！"),!1;if("DestinationDate"==a&&""!=ScheduleState.addSubmitObj[a]&&!t.test(ScheduleState.addSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","到达时间格式错误！"),!1}null==searchCity(ScheduleState.addSubmitObj.Departure)||null==searchCity(ScheduleState.addSubmitObj.Destination)?$.MsgBox_Unload.Confirm("出发地&目的地异常提示","无法计算距离，继续提交吗？",function(){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.addSubmitObj.TravelDistance="0.00",$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.addSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","添加成功"),$(".MailBar_cover_color, .contract_add").hide()):$.MsgBox_Unload.Alert("提示","添加失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})}):alterDistance(ScheduleState.addSubmitObj.Departure,ScheduleState.addSubmitObj.Destination,function(e){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.addSubmitObj.TravelDistance=e<20?20:e,$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.addSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","添加成功"),$(".MailBar_cover_color, .contract_add").hide()):$.MsgBox_Unload.Alert("提示","添加失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})})}),$(document).on("click",".xiugai",function(){addupdateAwesomplete("update",$("#update_info_Departure, #update_info_Destination")),$(this).css("color","red");var n=$(this).parent();$("[id^='update_info_']").each(function(){if($(this).is("#update_info_TrafficExpense"))return!0;var e=$(this).attr("id").replace("update_info_","td_"),t=globalDataHandle(n.find("."+e).text(),"");$(this).val(t)}),$("#update_info_TransportTool").trigger("change"),$("#update_info_TrafficExpense").val(globalDataHandle(n.find(".td_TrafficExpense").text(),""));var e=n.find(".DateTime").text(),t=$("#update_submit");e>moment().subtract(1,"months").format("YYYY-MM-DD")?(eouluGlobal.C_btnAbled(t,!1),t.children("span.glyphicon").css("cursor","pointer")):(eouluGlobal.C_btnDisabled(t,!1),t.children("span.glyphicon").css("cursor","not-allowed")),ScheduleState.updateSubmitObj.ID=$(this).attr("value"),$(".MailBar_cover_color, .contract_update").slideDown(200)}),$("#update_submit").click(function(){var n=$(this);for(var e in ScheduleState.updateSubmitObj)"OperateType"!=e?"Date"!=e?"TravelDistance"!=e&&"ID"!=e&&(ScheduleState.updateSubmitObj[e]=$("#update_info_"+e).val()):ScheduleState.updateSubmitObj[e]=currentDate:ScheduleState.updateSubmitObj[e]="Modify";var t=new RegExp("[0-9]{2}:[0-9]{2}");for(var a in ScheduleState.updateSubmitObj){if(ScheduleState.updateSubmitObj[a]=globalDataHandle(ScheduleState.updateSubmitObj[a],"").trim(),"CustomerUnit"==a&&""==ScheduleState.updateSubmitObj[a])return $.MsgBox_Unload.Alert("提示","客户单位必填！"),!1;if("HotelExpense"==a&&(""==ScheduleState.updateSubmitObj[a]||"请选择住宿费用"==ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择住宿费用！"),!1;if("TrafficExpense"==a&&(""==ScheduleState.updateSubmitObj[a]||"请选择交通方式"==ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","未选择交通费用！"),!1;if("Departure"==a&&""==ScheduleState.updateSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择出发地！"),!1;if("Destination"==a&&""==ScheduleState.updateSubmitObj[a])return $.MsgBox_Unload.Alert("提示","未选择目的地！"),!1;if("DepartureDate"==a&&""!=ScheduleState.updateSubmitObj[a]&&!t.test(ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","出发时间格式错误！"),!1;if("DestinationDate"==a&&""!=ScheduleState.updateSubmitObj[a]&&!t.test(ScheduleState.updateSubmitObj[a]))return $.MsgBox_Unload.Alert("提示","到达时间格式错误！"),!1}null==searchCity(ScheduleState.updateSubmitObj.Departure)||null==searchCity(ScheduleState.updateSubmitObj.Destination)?$.MsgBox_Unload.Confirm("出发地&目的地异常提示","无法计算距离，继续提交吗？",function(){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.updateSubmitObj.TravelDistance="0.00",$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.updateSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","修改成功"),$(".MailBar_cover_color, .contract_update").hide()):$.MsgBox_Unload.Alert("提示","修改失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})}):alterDistance(ScheduleState.updateSubmitObj.Departure,ScheduleState.updateSubmitObj.Destination,function(e){eouluGlobal.C_btnDisabled(n,!1),ScheduleState.updateSubmitObj.TravelDistance=e<20?20:e,$.ajax({type:"get",url:"ScheduleOperate",data:ScheduleState.updateSubmitObj,dataType:"json",success:function(e){1==e?($.MsgBox.Alert("提示","修改成功"),$(".MailBar_cover_color, .contract_update").hide()):$.MsgBox_Unload.Alert("提示","修改失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")},complete:function(e,t){eouluGlobal.C_btnAbled(n,!1)}})})}),$(document).on("click","#mb_btn_ok",function(){window.location.reload()}),$("#add_cancel").click(function(){$(".MailBar_cover_color, .contract_add").slideUp(200)}),$("#update_cancel").click(function(){$(".MailBar_cover_color, .contract_update").slideUp(200)}),$(".backToday").click(function(){window.location.href="Schedule"}),$(".deleteInfo").click(function(){"删除"==$(".deleteInfo").val()?($(".deleteInfo").val("").val("取消删除"),$(".deleteInfo").css("width","70px"),$("#table1 .tbody_tr td.xiugai").removeClass("xiugai").addClass("delete"),$("#table1  td.xiugai1").eq(0).text("删除"),$("#table1 .tbody_tr td.delete").text("X"),$(".tbody_tr td.delete").click(function(){var t=$(this).parent(),e=t.find("td.delete").attr("value"),n=t.find("td.Name").text(),a=t.find(".DateTime").text(),i=new Date(Date.parse(a.replace(/-/g,"/"))),r=new Date,o=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),s=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();r<i||o==s?$.ajax({type:"get",url:"ScheduleOperate",data:{OperateType:"Delete",ID:e,Name:n},success:function(e){console.log(e),e?($.MsgBox_Unload.Alert("提示","删除成功！"),t.remove()):$.MsgBox_Unload.Alert("提示","删除失败！")},error:function(){$.MsgBox_Unload.Alert("提示","服务器繁忙，稍后重试！")}}):$.MsgBox_Unload.Alert("提示","不能删除过去的信息！")})):window.location.reload()}),$(function(){var e=window.location.href,t=e.indexOf("?"),n=e.indexOf("Schedule?Date");if(-1==t||-1!=n)SelectContent();else{var a=e.substring(t+1),i=decodeURI(a),r=i.indexOf("&"),o=i.substring(9,r),s=i.substring(r+1).indexOf("&"),l=i.substring(r+1),u=l.indexOf("=");if(-1==s){var c=l.substring(u+1);c=Trim(c)}else{c=l.substring(u+1,s);c=Trim(c)}if("员工姓名"!=o)$(".classify").find('option[value="'+o+'"]').attr("selected",!0),$(".select1").html("").html('<input type="text" id="searchContent1" name="parameter" value="'+c+'" style="width:80%;height:29px;border:1px solid darkgrey;border-left:none;float:left;">');else{SelectContent();for(var d=0;d<$("select.staffName").find("option").length;d++){var f=$("select.staffName").find("option").eq(d).attr("value");Trim(f)==c&&$("select.staffName").find('option[value="'+f+'"]').attr("selected",!0)}}}}),$(".classify").change(function(e){"员工姓名"==$(".classify").val()?SelectContent():$(".select1").html("").html('<input type="text" id="searchContent1" name="parameter"  style="width:80%;height:29px;border:1px solid darkgrey;border-left:none;float:left;">')}),$(function(){$(".info-rili i").click(function(){$(this).parent().find("input").click()});var e={startDate:moment(new Date(Date.parse((new Date).getFullYear()+"-01-01"))),endDate:moment(new Date),maxDate:moment(new Date),opens:"left",ranges:{"今天":[moment(),moment()],"昨天":[moment().subtract(1,"days"),moment().subtract(1,"days")],"上周":[moment().subtract(6,"days"),moment()],"前30天":[moment().subtract(29,"days"),moment()],"本月":[moment().startOf("month"),moment().endOf("month")],"上月":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},showWeekNumbers:!0,alwaysShowCalendars:!0,locale:{format:"YYYY-MM-DD",applyLabel:"确定",cancelLabel:"取消",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}};$("#config-demo").daterangepicker(e,function(e,t,n){timeRangeChange=[e.format("YYYY-MM-DD HH:mm:ss"),t.format("YYYY-MM-DD HH:mm:ss")],console.log(timeRangeChange)});var n={"飞机":_.range(0,4200,200),"铁路":_.range(0,2050,50),"自驾":_.range(0,3050,50),"打车":_.range(0,1050,50),"其他":_.range(0,2010,10)};$(document).on("change","select[name='TransportTool_sel']",function(){var e;$(this).is("#add_info_TransportTool")?e=$("#add_info_TrafficExpense"):$(this).is("#update_info_TransportTool")&&(e=$("#update_info_TrafficExpense"));var t=$(this).val(),a="";"请选择"==t||null==t?a="<option value='请选择交通方式'>请选择交通方式</option>":n[t].map(function(e,t,n){a+="<option value="+e+">"+e+"元</option>"}),e.empty().append(a)})});var schedule_startTime,schedule_endTime,k4=new Kalendae.Input("week_sel",{months:1,mode:"week",format:"YYYY-MM-DD",rangeDelimiter:"至",side:"bottom",disableDate:!0,selected:Kalendae.moment(),subscribe:{change:function(e){$(".k-btn-close").trigger("click")}}});function switchDate(){if("dateRange"==$("input[name='date_sel']:checked").val()){var e=$(".calendar.left .input-mini").val(),t=$(".calendar.right .input-mini").val();if(schedule_startTime=""==e||null==e?(new Date).getFullYear()+"-01-01":e,""==t||null==t){var n=new Date,a=n.getFullYear(),i=n.getMonth()+1;i<10&&(i="0"+i);var r=n.getDate();r<10&&(r="0"+r),schedule_endTime=a+"-"+i+"-"+r}else schedule_endTime=t}else if("dateWeek"==$("input[name='date_sel']:checked").val())if(-1<$("#week_sel").val().indexOf("至"))schedule_startTime=$("#week_sel").val().split("至")[0],schedule_endTime=$("#week_sel").val().split("至")[1];else if(-1==$("#week_sel").val().indexOf("至")){schedule_startTime=$("#week_sel").val().trim();var o=new Date,s=o.getFullYear(),l=o.getMonth()+1;l<10&&(l="0"+l);var u=o.getDate();u<10&&(u="0"+u),schedule_endTime=s+"-"+l+"-"+u}}$(document).on("change","input[name='date_sel']",function(){"dateWeek"==$("input[name='date_sel']:checked").val()?($(".dateRange_div").css({display:"none"}),$(".dateWeek_div").css({display:"inline-block"})):"dateRange"==$("input[name='date_sel']:checked").val()&&($(".dateWeek_div").css({display:"none"}),$(".dateRange_div").css({display:"inline-block"}))}),$(function(){$(".tbody_tr").length&&$(".tbody_tr").each(function(){var e=$(this).find(".showTripCost1").text(),t=$(this).find(".showTripCost2").text();""!=e&&"--"!=e&&null!=e&&null!=e||(e=0),""!=t&&"--"!=t&&null!=t&&null!=t||(t=0),$(this).find(".showTripCost").text(1*e+1*t)})});var myChart1,myChart2,myChart3,myChart4,myChart5,cruurntCardIndex,currentDate,city={"北京":["东城区","西城区","崇文区","宣武区","朝阳区","海淀区","丰台区","石景山区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区","门头沟区","密云县","延庆县"],"天津":["和平区","河东区","河西区","南开区","河北区","红桥区","东丽区","西青区","北辰区","津南区","武清区","宝坻区","滨海新区","静海县","宁河县","蓟县"],"上海":["黄浦区","卢湾区","徐汇区","长宁区","静安区","普陀区","闸北区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","奉贤区","崇明县"],"重庆":["渝中区","大渡口区","江北区","南岸区","北碚区","渝北区","巴南区","长寿区","双桥区","沙坪坝区","万盛区","万州区","涪陵区","黔江区","永川区","合川区","江津区","九龙坡区","南川区","綦江县","潼南县","荣昌县","璧山县","大足县","铜梁县","梁平县","开县","忠县","城口县","垫江县","武隆县","丰都县","奉节县","云阳县","巫溪县","巫山县"],"河北":["石家庄","唐山","秦皇岛","邯郸","邢台","保定","张家口","承德","沧州","廊坊","衡水"],"山西":["太原","大同","阳泉","长治","晋城","朔州","晋中","运城","忻州","临汾","吕梁"],"辽宁":["沈阳","大连","鞍山","抚顺","本溪","丹东","锦州","营口","阜新","辽阳","盘锦","铁岭","朝阳","葫芦岛"],"吉林":["长春","吉林","四平","辽源","通化","白山","松原","白城","延边朝鲜族自治州"],"黑龙江":["哈尔滨","齐齐哈尔","鹤岗","双鸭山","鸡西","大庆","伊春","牡丹江","佳木斯","七台河","黑河","绥化","大兴安岭"],"江苏":["南京","苏州","无锡","常州","镇江","南通","泰州","扬州","盐城","连云港","徐州","淮安","宿迁"],"浙江":["杭州","宁波","温州","嘉兴","湖州","绍兴","金华","衢州","舟山","台州","丽水"],"安徽":["合肥","芜湖","蚌埠","淮南","马鞍山","淮北","铜陵","安庆","黄山","滁州","阜阳","宿州","巢湖","六安","亳州","池州","宣城"],"福建":["福州","厦门","莆田","三明","泉州","漳州","南平","龙岩","宁德"],"江西":["南昌","景德镇","萍乡","九江","新余","鹰潭","赣州","吉安","宜春","抚州","上饶"],"山东":["济南","青岛","淄博","枣庄","东营","烟台","潍坊","济宁","泰安","威海","日照","莱芜","临沂","德州","聊城","滨州","菏泽"],"河南":["郑州","开封","洛阳","平顶山","安阳","鹤壁","新乡","焦作","濮阳","许昌","漯河","三门峡","南阳","商丘","信阳","周口","驻马店"],"湖北":["武汉","黄石","十堰","荆州","宜昌","襄樊","鄂州","荆门","孝感","黄冈","咸宁","随州","恩施"],"湖南":["长沙","株洲","湘潭","衡阳","邵阳","岳阳","常德","张家界","益阳","郴州","永州","怀化","娄底","湘西"],"广东":["广州","深圳","珠海","汕头","韶关","佛山","江门","湛江","茂名","肇庆","惠州","梅州","汕尾","河源","阳江","清远","东莞","中山","潮州","揭阳","云浮"],"海南":["海口","三亚"],"四川":["成都","自贡","攀枝花","泸州","德阳","绵阳","广元","遂宁","内江","乐山","南充","眉山","宜宾","广安","达州","雅安","巴中","资阳","阿坝","甘孜","凉山"],"贵州":["贵阳","六盘水","遵义","安顺","铜仁","毕节","黔西南","黔东南","黔南"],"云南":["昆明","曲靖","玉溪","保山","昭通","丽江","普洱","临沧","德宏","怒江","迪庆","大理","楚雄","红河","文山","西双版纳","腾冲"],"陕西":["西安","铜川","宝鸡","咸阳","渭南","延安","汉中","榆林","安康","商洛"],"甘肃":["兰州","嘉峪关","金昌","白银","天水","武威","酒泉","张掖","庆阳","平凉","定西","陇南","临夏","甘南"],"青海":["西宁","海东","海北","海南","黄南","果洛","玉树","海西"],"内蒙古":["呼和浩特","包头","乌海","赤峰","通辽","鄂尔多斯","呼伦贝尔","巴彦淖尔","乌兰察布","锡林郭勒盟","兴安盟","阿拉善盟"],"广西":["南宁","柳州","桂林","梧州","北海","防城港","钦州","贵港","玉林","百色","贺州","河池","来宾","崇左"],"西藏":["拉萨","那曲","昌都","林芝","山南","日喀则","阿里"],"宁夏":["银川","石嘴山","吴忠","固原","中卫"],"新疆":["乌鲁木齐","克拉玛依","吐鲁番","哈密","和田","阿克苏","喀什","克孜勒苏","巴音郭楞","昌吉","博尔塔拉","伊犁","塔城","阿勒泰"],"香港":["香港岛","九龙东","九龙西","新界东","新界西"],"澳门":["澳门半岛","离岛"],"台湾":["台北","高雄","基隆","新竹","台中","嘉义","台南"],"加拿大温哥华":["加拿大温哥华"]};function province(e){for(var t in city)if(-1<city[t].indexOf(e))return t}function showMap(e,t){$.ajax({type:"get",url:"ScheduleProvince",data:{StartTime:e,EndTime:t,Name:""},success:function(e){console.log("出差省份分布"),console.log(e),console.log(typeof e),e=JSON.parse(e),console.log(e),console.log(typeof e);var t=[],n=[];if(1<e.length){for(var a=1;a<e.length-1;a++)""!=e[a].province&&"--"!=e[a].province&&t.push(e[a].province),""!=e[a].times&&"--"!=e[a].times&&n.push(Number(e[a].times));console.log(t),console.log(n),$(".mapContent").html("");$(".mapContent").append('<div id="main"></div>'),provMap(t,n)}else $.MsgBox_Unload.Alert("提示","该时间段无出差省份记录")},error:function(){alert("网络错误")}})}function provMap(e,t){for(var n=[],a=0;a<e.length;a++){var i={};-1<e[a].indexOf("内蒙古")?i.name="内蒙古":-1<e[a].indexOf("自治区")?i.name=e[a].substring(0,2):i.name=e[a].substring(0,e[a].length-1),i.value=t[a],n.push(i)}console.log("出差统计分布，去除后缀的省"),console.log(n),console.log(typeof n),myChart1=echarts.init(document.getElementById("main"));echarts.config,zrender.tool.event;!function(e){myChart1=e.init(document.getElementById("main")),console.log("基于准备好的dom，初始化echarts图表"),console.log(n);var t={tooltip:{trigger:"item",formatter:"{b}"},series:[{name:"中国",type:"map",mapType:"china",roam:!1,selectedMode:"multiple",itemStyle:{normal:{label:{show:!0}},emphasis:{label:{show:!0}}},data:n}],dataRange:{x:"left",y:"bottom",splitList:[{start:300},{start:150,end:300},{start:50,end:150},{start:1,end:50},{end:1}],color:["#c00000","#ff0000","#ff9600","#ffff00","#fff"]}};myChart1.setOption(t)}(echarts)}function showRangeTimeMap(){showMap(schedule_startTime,schedule_endTime)}function ajaxDistanceStatistics(e,t){return $.ajax({type:"get",url:"DistanceStatistics",dataType:"json",data:{startTime:e,endTime:t},success:function(e){console.log("这里是距离统计"),console.log(e),console.log(typeof e);var t=[],n=[];if(1<e.length){for(var a=1;a<e.length;a++){t.push(e[a].Name),""!=e[a].SumDistance&&"--"!=e[a].SumDistance&&null!=e[a].SumDistance||(e[a].SumDistance=0);var i=(1*e[a].SumDistance).toFixed(0);n.push(i)}console.log("最新的"),console.log(t),console.log(n),$(".trip-distance-body").html("");$(".trip-distance-body").append('<div id="main3"></div>'),MapDistanceStatistics(t,n)}else $.MsgBox_Unload.Alert("提示","该时间段无距离统计记录")},error:function(){$.MsgBox.Alert("提示","网络繁忙，请重新加载")}})}function showDistanceStatistics(){ajaxDistanceStatistics(schedule_startTime,schedule_endTime)}function MapDistanceStatistics(e,t){var n={title:{text:"单位：km",textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:e,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontSize:14},fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",formatter:function(e){var t="",n=e.length,a=Math.ceil(n/1);if(1<a){for(var i=0;i<a;i++){var r=1*i,o=r+1;t+=e.substring(r,o)+"\n"}return t}return e}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"距离",type:"bar",data:t,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CA2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:4,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}},emphasis:{barBorderRadius:7}}}]};(myChart2=echarts.init(document.getElementById("main3"))).setOption(n)}function barGraphAjax(e,t,o){return $.ajax({type:"get",url:"ScheduleByTime",dataType:"json",data:{StartTime:e,EndTime:t,Name:o},success:function(e){console.log("#员工按姓名出差原始数据"),console.log(e),console.log(typeof e),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n});var t=[],n=[];if(Object.keys(e).length){for(var a in e)if(""==a&&delete e[a],0!=e[a]&&""!=e[a]||delete e[a],a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市")){province(r=a.substring(0,a.length-1))||"北京"==r||"上海"==r||"重庆"==r||"天津"==r||"香港"==r||"澳门"==r||delete e[a];var i=r+"市"}else{province(r=a)||"北京"==r||"上海"==r||"重庆"==r||"天津"==r||"香港"==r||"澳门"==r||delete e[a];i=r}for(var a in console.log("最终输出的城市数组"),console.log(e),e){if(a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市"))province(r=a.substring(0,a.length-1)),i=r+"市";else{var r;province(r=a),i=r}t.push(r),n.push(e[i])}console.log("@员工按姓名出差城市分布，处理后的数据"),console.log(t),console.log(n),$(".trip-city-body").html("");$(".trip-city-body").append('<div id="main2"></div>'),BarMap(o,t,n)}else BarMap(o,["苏州"],["0"]),$.MsgBox_Unload.Alert("提示","该员工此时间段无出差记录")},error:function(){console.log("***员工出差城市次数统计获取失败了***")}})}function BarMap(e,t,n){var a;myChart3=echarts.init(document.getElementById("main2")),a={title:{text:"单位：次数",subtext:e,textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:t,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontSize:14},fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"次数",type:"bar",data:n,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CF2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:5,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}}}}]},myChart3.setOption(a)}function showTripCity(){var e=$(".trip-city-tit-right .staffName").val();"所有人"==e&&(e=""),$(".trip-city-tit-left span").text(e),barGraphAjax(schedule_startTime,schedule_endTime,e)}function echartsStaffTripTimes(e,t){var n={title:{text:"单位：次数",textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:e,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",fontSize:14},formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"次数",type:"bar",data:t,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CF2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:5,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}}}}]};(myChart4=echarts.init(document.getElementById("echartContainer1"))).setOption(n)}function StaffTripTimesAjax(e,t){return $.ajax({type:"get",url:"FrequenceStatistics",dataType:"json",data:{startTime:e,endTime:t},success:function(e){console.log("@@@员工出差次数排行"),console.log(typeof e),console.log(e);var t=[],n=[];if(1<e.length){for(var a=1;a<e.length;a++)null!=e[a].Name&&""!=e[a].Name&&t.push(e[a].Name),null!=e[a].times&&""!=e[a].times&&n.push(Number(e[a].times));if(t.length!=n.length)$.MsgBox.Alert("提示","网络异常，请重新加载");else{console.log("员工出差次数排行处理后数据"),console.log(t),console.log(n),$(".trip-staff-times-body").html("");$(".trip-staff-times-body").append('<div id="echartContainer1"></div>'),echartsStaffTripTimes(t,n)}}else $.MsgBox_Unload.Alert("提示","该时间段无出差次数排行")},error:function(){$.MsgBox_Unload.Alert("提示","网络出错，出差次数排行绘制失败")}})}function showStaffTripTimes(){StaffTripTimesAjax(schedule_startTime,schedule_endTime)}function echartsExpenseStatistics(e,t){var n={title:{text:"单位：元",textStyle:{color:"#999",fontSize:14}},tooltip:{trigger:"axis"},legend:{data:["",""]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:e,axisLabel:{interval:0,rotate:0,textStyle:{color:"rgba(0,0,0,0.9)",fontSize:14},fontFamily:"微软雅黑, 宋体, Arial, Verdana, sans-serif",formatter:function(e){return e.split("").join("\n")}},splitLine:{show:!1}}],yAxis:[{type:"value"}],series:[{name:"差旅费",type:"bar",data:t,markPoint:{data:[]},markLine:{data:[]},itemStyle:{normal:{color:function(e){var t=["#EE4775","#E3497F","#DD4B84","#D04B84","#CA4D91","#C04D91","#BF4E9A","#B84FA0","#B04FA0","#AA51AA","#A051AA","#9353BB","#8754C3","#8054C3","#7E56CA","#7056CA","#6F58D7","#685AE1","#605AE1","#5B5BE6","#505BE6","#4F5CF2","#4A5CF2","#455CF2","#405CF2","#3B5CA2","#305CA2"];return t[e.dataIndex%t.length]},barBorderRadius:5,label:{show:!0,position:"top",textStyle:{color:"rgba(0,0,0,0.7)",fontSize:10},formatter:function(e){return 0==e.value?"":e.value}}}}}]};(myChart5=echarts.init(document.getElementById("echartContainer2"))).setOption(n)}function ExpenseStatisticsAjax(e,t){return $.ajax({type:"get",url:"ExpenseStatistics",dataType:"json",data:{startTime:e,endTime:t},success:function(e){console.log("#费用统计原始数据"),console.log(e),console.log(typeof e);var t=[],n=[];if(1<e.length){for(i=1;i<e.length;i++){var a=e[i].Destination,r=e[i].Expense;a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市")?a=a.substring(0,a.length-1):a.lastIndexOf("县")==a.length-1&&-1!=a.lastIndexOf("县")&&(a=a.substring(0,a.length-1)),a.lastIndexOf("市")==a.length-1&&-1!=a.lastIndexOf("市")?a=a.substring(0,a.length-1):a.lastIndexOf("县")==a.length-1&&-1!=a.lastIndexOf("县")&&(a=a.substring(0,a.length-1)),null!=r&&""!=r&&"--"!=r||(r="0"),t.push(a),n.push(r)}if(t.length!=n.length)$.MsgBox.Alert("提示","网络异常，请重新加载");else{console.log("差旅费用处理后数据"),console.log(t),console.log(n),$(".trip-cost-calc-body").html("");$(".trip-cost-calc-body").append('<div id="echartContainer2"></div>'),echartsExpenseStatistics(t,n)}}else echartsExpenseStatistics(["苏州市"],["0"]),$.MsgBox_Unload.Alert("提示","该时间段无费用数据")},error:function(){$.MsgBox_Unload.Alert("提示","网络出错，费用统计绘制失败")}})}function showExpenseStatistics(){ExpenseStatisticsAjax(schedule_startTime,schedule_endTime)}function FistPage(e){window.location.href=e+"1"}function UpPage(e){window.location.href=e}function NextPage(e){window.location.href=e}function PageJump(e){var t=document.getElementById("jumpNumber").value;null==t||0==t?t=$("#currentPage").html():t>parseInt($("#allPage").html())&&(t=$("#allPage").html()),window.location.href=e+t}function LastPage(e){var t=parseInt($("#allPage").html());window.location.href=e+t}$(".changeBox .Domestic").click(function(){$(".changeBox").css("background","url(image/bg11.png)"),$(".bodyContent").css("height","705px");var e=$(".bodyContent").height()+190;$("body.nav-body").css("height",e+"px"),$(".reloadDiv").fadeOut(50),$(".mapBox").fadeOut(50),$(".trip-city").fadeOut(50),$(".trip-cost-calc").fadeOut(50),$(".trip-staff-times").fadeOut(50),$(".trip-distance").fadeOut(50),$("#engineer-schedule-container").fadeIn(50)}),$(".changeBox .ExitOrEn").click(function(){cruurntCardIndex=2,$(".changeBox").css("background","url(image/bg22.png)"),$(".bodyContent").css("height","1640px");var e=$(".bodyContent").height()+190;$("body.nav-body").css("height",e+"px"),$("#engineer-schedule-container").hide(),$(".trip-staff-times").fadeOut(50),$(".trip-distance").fadeOut(50),$(".reloadDiv").fadeIn(50),$(".mapBox").fadeIn(50),$(".trip-city").fadeIn(50),$(".trip-cost-calc").fadeIn(50);for(var t=$("span.engineer").html().split(","),n=t.length,a="",i="",r=1;r<n-1;r++)a+='<option value="'+t[r].substring(12,t[r].length-1)+'">'+t[r].substring(12,t[r].length-1)+"</option>";i+='<option value="'+t[n-1].substring(12,t[n-1].length-2)+'">'+t[n-1].substring(12,t[n-1].length-2)+"</option>",Str='<select class="staffName" style="width: 90%;height:27px;border-radius:5px;border:1px solid #999"><option value="所有人">所有人</option>'+a+i+"</select>",$(".trip-city-tit-right .staffName").remove(),$(".trip-city-tit-right").append(Str),switchDate(),showRangeTimeMap(),showTripCity(),showExpenseStatistics()}),$(".changeBox .staffData").on("click",function(){cruurntCardIndex=3,$(".changeBox").css("background","url(image/bg33.png)"),$(".bodyContent").css("height","1120px");var e=$(".bodyContent").height()+190;$("body.nav-body").css("height",e+"px"),$("#engineer-schedule-container").hide(),$(".mapBox").fadeOut(50),$(".trip-city").fadeOut(50),$(".trip-cost-calc").fadeOut(50),$(".reloadDiv").fadeIn(50),$(".trip-staff-times").fadeIn(50),$(".trip-distance").fadeIn(50),switchDate(),showStaffTripTimes(),showDistanceStatistics()}),$(".tongji_btn").click(function(){switchDate(),2==cruurntCardIndex?(showRangeTimeMap(),showTripCity(),showExpenseStatistics()):3==cruurntCardIndex&&(showStaffTripTimes(),showDistanceStatistics())}),$(document).on("change",".trip-city-tit-right .staffName",function(){switchDate(),showTripCity()}),$(function(){var n='<%=request.getAttribute("allDate")%>';console.log(n),null!=n&&"[{col1=Date}]"!=n&&(n=n.replace(/ /g,"").replace(/{Date=/g,"").replace(/}/g,"").replace("{","").replace("[","").replace("]","").split(",").unique()),console.log(n);var e=window.location.href,t=new Date;function a(){$("table.fc-border-separate tbody tr").width($(".fc-day.fc-六.fc-widget-content.fc-future").width())}if(0<e.indexOf("-")?-1<(currentDate=e.split("?Date=")[1]).indexOf("&")&&(currentDate=currentDate.split("&")[0]):currentDate=globalGetToday(!1),$("#calendar").fullCalendar({header:{left:"",center:"prevYear,prev,title,next,nextYear",right:""},buttonText:{prev:"<",next:">",prevYear:"<<",nextYear:">>"},titleFormat:{month:"yyyy年MM月",week:"周ddd"},locale:"zh-cn",weekMode:5,firstDay:1,editable:!1,timeFormat:"H:mm",axisFormat:"H:mm",minTime:"7",maxTime:"19",allDaySlot:!1,dayNamesShort:["日","一","二","三","四","五","六"],events:[],dayClick:function(e,t,n){var a=$.fullCalendar.formatDate(e,"yyyy-MM-dd"),i=a;$(".table1 .DateTime").attr("value",i),currentDate=a,$("#help-form #All_upload").val(i),$("#help-form").submit()},eventClick:function(e,t,n){}}),0<e.indexOf("?Date=")){t=new Date;var i=e.split("?Date=")[1].split("-")[0],r=parseFloat(t.getFullYear());if(0<i-r)for(var o=document.getElementsByClassName("fc-button-nextYear")[0],s=0;s<i-r;s++)o.click();else if(i-r<0){var l=document.getElementsByClassName("fc-button-prevYear")[0];for(s=0;s<r-i;s++)l.click()}var u=e.split("?Date=")[1].split("-")[1],c=parseFloat(t.getMonth())+1;if(0<u-c){var d=document.getElementsByClassName("fc-button-next")[0];for(s=0;s<u-c;s++)d.click()}else if(u-c<0){var f=document.getElementsByClassName("fc-button-prev")[0];for(s=0;s<c-u;s++)f.click()}}for(s=0;s<$(".fc-border-separate .fc-day").length;s++){if("object"==typeof n)for(var h=1;h<n.length;h++)if($(".fc-border-separate .fc-day").eq(s).attr("data-date")==n[h]){$(".fc-border-separate .fc-day").eq(s).find(".fc-day-content").after('<div class="fc_flag" style="width:8px;height:8px;border-radius: 50%;background:red;float: right;margin-top: 0px;"></div>')}$(".fc-border-separate .fc-day").eq(s).attr("data-date")==currentDate&&($(".fc-border-separate .fc-day").eq(s).addClass("fc-state-highlight"),$(".fc-border-separate .fc-day").eq(s).siblings().removeClass("fc-state-highlight"))}$(".fc-button").click(function(){for(var e=0;e<$(".fc-border-separate .fc-day").length;e++)if("object"==typeof n)for(var t=1;t<n.length;t++)if($(".fc-border-separate .fc-day").eq(e).attr("data-date")==n[t]){$(".fc-border-separate .fc-day").eq(e).find(".fc-day-content").after('<div class="fc_flag" style="width:8px;height:8px;border-radius: 50%;background:red;float: right;margin-top: 10px;"></div>')}}),$("body").on("click",".fc-day",function(){var e=$(this);e.data("date");$(".fc-state-highlight").removeClass("fc-state-highlight"),e.addClass("fc-state-highlight")}),a(),$("#calendar").on("click","span.fc-button",function(){a()}),1==$("#currentPage").html()&&($("#fistPage").attr("disabled","true"),$("#fistPage").removeClass("bToggle"),$("#upPage").attr("disabled","true"),$("#upPage").removeClass("bToggle")),$("#allPage").html()==$("#currentPage").html()&&($("#lastPage").attr("disabled","true"),$("#lastPage").removeClass("bToggle"),$("#nextPage").attr("disabled","true"),$("#nextPage").removeClass("bToggle"));var p=(new Date).getDate(),m=window.location.href;if("-1"==(s=m.indexOf("?Date")))var g=p,v=new Date;else{var y=m.substring(s+1);(g=(y=-1<y.indexOf("&")?y.split("&")[0]:y).substring(13))<10&&(g=g.substring(1));var b=y.substring(5);v=new Date(Date.parse(b))}var w,S,D=$(".fc-header-title h2").html();$(".dateBox_title").html(D),$(".dateBox_day").html(g),w=v,(S=new Array(7))[0]="星期日",S[1]="星期一",S[2]="星期二",S[3]="星期三",S[4]="星期四",S[5]="星期五",S[6]="星期六",$(".dataBox_textDay").html(S[w.getDay()]);var x,M,C,k,T=new Array(100),O=new Array(12),A="甲乙丙丁戊己庚辛壬癸",E="子丑寅卯辰巳午未申酉戌亥",Y="一二三四五六七八九十",N="正二三四五六七八九十冬腊",F="鼠牛虎兔龙蛇马羊猴鸡狗猪";function j(e,t){return e>>t&1}T=new Array(2635,333387,1701,1748,267701,694,2391,133423,1175,396438,3402,3749,331177,1453,694,201326,2350,465197,3221,3402,400202,2901,1386,267611,605,2349,137515,2709,464533,1738,2901,330421,1242,2651,199255,1323,529706,3733,1706,398762,2741,1206,267438,2647,1318,204070,3477,461653,1386,2413,330077,1197,2637,268877,3365,531109,2900,2922,398042,2395,1179,267415,2635,661067,1701,1748,398772,2742,2391,330031,1175,1611,200010,3749,527717,1452,2742,332397,2350,3222,268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877),O[0]=0,O[1]=31,O[2]=59,O[3]=90,O[4]=120,O[5]=151,O[6]=181,O[7]=212,O[8]=243,O[9]=273,O[10]=304,O[11]=334;var B,H,I,L,P,U,R,W,z,G=(R=(U=v).getFullYear(),W=U.getMonth()+1,z=U.getDate(),U.getDay(),parseInt(U.getTime()/1e3),R<100&&(R="19"+R),L=W,P=z,(I=R)<1921||2020<I?"":(L=0<parseInt(L)?L-1:11,function(){var e,t,n,a;k=3!=arguments.length?new Date:new Date(arguments[0],arguments[1],arguments[2]);var i=!1,r=k.getYear();for(r<1900&&(r+=1900),e=365*(r-1921)+Math.floor((r-1921)/4)+O[k.getMonth()]+k.getDate()-38,k.getYear()%4==0&&1<k.getMonth()&&e++,t=0;;t++){for(a=T[t]<4095?11:12,n=a;0<=n;n--){if(e<=29+j(T[t],n)){i=!0;break}e=e-29-j(T[t],n)}if(i)break}x=1921+t,M=a-n+1,C=e,12==a&&(M==Math.floor(T[t]/65536)+1&&(M=1-M),M>Math.floor(T[t]/65536)+1&&M--)}(I,L,P),H=B="",B+=A.charAt((x-4)%10),B+=E.charAt((x-4)%12),B+="(",B+=F.charAt((x-4)%12),B+=")年 ",M<1?(B+="(闰)",H+=N.charAt(-M-1)):H+=N.charAt(M-1),H+="月",H+=C<11?"初":C<20?"十":C<30?"廿":"三十",(C%10!=0||10==C)&&(H+=Y.charAt((C-1)%10)),B+"好"+H)),q=G.indexOf("好"),V=G.substring(0,q),Z="农历 "+G.substring(q+1);$(".dataBox_textLunar").html(Z),$(".dataBox_textYear").html(V);var J=$("span.engineer").html().split(","),X=J.length,Q="",K="";for(s=1;s<X-1;s++)Q+='<option value="'+J[s].substring(12,J[s].length-1)+'">'+J[s].substring(12,J[s].length-1)+"</option>";var ee=Q+(K+='<option value="'+J[X-1].substring(12,J[X-1].length-2)+'">'+J[X-1].substring(12,J[X-1].length-2)+"</option>");$("select[name='staffName_sel']").append(ee),["请选择","飞机","铁路","自驾","打车","其他"].map(function(e,t,n){$("select[name='TransportTool_sel']").append("<option value='"+e+"'>"+e+"</option>")}),_.range(0,1050,50).map(function(e,t,n){0==t&&$("select[name='HotelExpense_sel']").append("<option value='请选择住宿费用'>请选择住宿费用</option>"),$("select[name='HotelExpense_sel']").append("<option value='"+e+"'>"+e+"元</option>")})}),Array.prototype.unique=function(){for(var e=[],t={},n=0;n<this.length;n++)t[this[n]]||(e.push(this[n]),t[this[n]]=1);return e},$(function(){$(window).scrollTop(0);var t=$("#main-box").offset().top,n=$("#main-box").offset().left-1;$(window).scroll(function(){var e=$(window).scrollTop();t<=e?$(".left-fixed-div").css({position:"fixed",left:n+"px",top:"0"}):$(".left-fixed-div").css({position:"static"})}),$(".cover-all").fadeOut(30),$(".cover-all-img").fadeOut(30),$("input[name='date_sel'][value='dateRange']").prop("checked","checked")});